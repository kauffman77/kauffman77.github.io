<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-02-24 Mon 15:13 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CMSC216 Project 2: Bit Ops, Debugging, Data Structures</title>
<meta name="author" content="Chris Kauffman" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<meta name="viewport" content="width=device-width, maximum-scale=1, minimum-scale=1" />
<style type="text/css">
@media screen {
:root {
--heading-bg-color:#e21833;
--heading-fg-color:#ffd200;
}
html {
font-family: serif;
text-align: justify;
}
pre.src, pre.example {
overflow-x: scroll;
}
/* Merge subtitle area with title area */
.subtitle {
text-align: center;
margin-top: -2em;
padding-top: 1em;
padding-bottom: 0.1em;
}
.title, .subtitle {
color: var(--heading-fg-color);
background-color: var(--heading-bg-color);
}
/* Section borders, left section header style */
div.outline-2, #table-of-contents {
background-color: rgb(250,250,250);
border: 0.75em solid var(--heading-bg-color);
border-top: 0em;
padding: 0em .5em .5em .5em; /* top right bottom left */
margin: 1em 0em 1em 0em; /* top right bottom left */
}
div.outline-2 > h2, #table-of-contents > h2 {
background-color: var(--heading-bg-color);
color: var(--heading-fg-color);
font-variant: small-caps;
padding: 0em 0em 0em .5em; /* top right bottom left */
margin: 0em -.5em 0em -.75em; /* top right bottom left */
text-align: left;
}
blockquote {
font-style: italic;
}
td, th {
padding-top: 2px;
padding-bottom: 2px;
}
body {
background-color: #EEE;
}
pre {
}
#content, #preamble, #postamble {
margin-left:300px;
max-width: 100%;
}
.tag {
background-color: inherit; font-family: inherit;
padding: inherit; font-size: 80%; font-weight: inherit;
text-transform: uppercase;
}

.figure p { text-align: inherit; }
figure-number { font-style: italic; }
#table-of-contents {
text-align: left;
position: fixed;
left: 0;
margin: 0 auto;
padding: 0;
width: 300px;
top: 0;
height: 100%;
border: 0;
display: block;
}
#text-table-of-contents {
overflow-y: scroll;
height: 100%;
}
#text-table-of-contents ul {
padding-left: 1em;
margin-left: 0.5em;
}
#table-of-contents > h2 {
padding: 0.1em;
margin: 0;
}
/* adjustments for small screen, toc at top only */
@media (max-width: 800px) { /* landscape for iphone */
html {
-webkit-text-size-adjust: none;  /* prevent scaling of text on mobile */
}
body {
background-color: #EEE;
width:100%;
margin:0 auto;
}
#content, #preamble, #postamble {
margin-left:0;
}
#table-of-contents {
position: static;
left: inherit;
width:inherit;
height: auto;
border-top: 0em;
padding: 0em .5em .5em .5em; /* top right bottom left */
margin: 1em 0em 1em 0em; /* top right bottom left */
border: 0.75em solid #006633;
}
div.outline-2, #table-of-contents {
background-color: rgb(250,250,250);
border: 0.75em solid var(--heading-bg-color);
border-top: 0em;
padding: 0em .5em .5em .5em; /* top right bottom left */
margin: 1em 0em 1em 0em; /* top right bottom left */
}
div.outline-2 > h2, #table-of-contents > h2 {
background-color: var(--heading-bg-color);
color: var(--heading-fg-color);
font-variant: small-caps;
padding: 0em 0em 0em .5em; /* top right bottom left */
margin: 0em -.5em 0em -.75em; /* top right bottom left */
text-align: left;
}
#text-table-of-contents {
overflow-y: visible;
height: inherit;
}
#text-table-of-contents ul {
padding-left: 1em;
margin-left: 0.5em;
}
}
.linenr { font-size: xx-small; }
th.org-left   { text-align: left;   }
}

@media print {
html {
font-family: serif;
font-size: 10pt;
text-align: justify;
.linenr { font-size: xx-small; }
}
}
</style>
<style>
/* Theme: Srcery
Description: Srcery dark color scheme for highlight.js
Author: Chen Bin <chen.bin@gmail.com>
Maintainer: @redguardtoo
Website: https://srcery-colors.github.io/
Date: 2021-04-13
https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/srcery.css

Tailored by: Chris Kauffman <profk@umd.edu>
Date: Sat Nov 25 06:16:20 PM EST 2023
*/
pre code.hljs {
display: block;
overflow-x: auto;
padding: 1em
}
code.hljs {
padding: 3px 5px
}
.hljs {
background: #1C1B19;
/* Black */
color: #FFFFFF/* Bright White */

}
/* Bright White */
.hljs-subst,
.hljs-quote,
.hljs-literal {
color: #FCE8C3
}
/* Bright Blue */
.hljs-type,
.hljs-symbol {
color: #68A8E4
}
/* Red */
.hljs-keyword,
.hljs-deletion {
color: #EF2F27
}
/* Yellow */
.hljs-name,
.hljs-function,
.hljs-attribute,
.hljs-selector-attr,
.hljs-selector-id,
.hljs-selector-class,
.hljs-selector-pseudo,
.hljs-section,
.hljs-title {
color: #FBB829
}
/* Cyan */
.hljs-code,
.hljs-variable,
.hljs-property,
.hljs-template-variable,
.hljs-class {
color: #0AAEB3
}
/* Bright Green */
.hljs-string,
.hljs-regexp,
.hljs-bullet,
.hljs-addition {
color: #98BC37
}
/* Bright Magenta */
.hljs-built_in,
.hljs-params {
color: #FF5C8F
}
/* Blue */
.hljs-template-tag,
.hljs-selector-tag {
color: #2C78BF
}
/* Bright Black */
.hljs-link,
.hljs-number,
.hljs-comment,
.hljs-meta {
color: #B1B195
/* color: #918175 */
}
.hljs-emphasis {
font-style: italic
}
.hljs-strong {
font-weight: bold
}
/* @see https://github.com/srcery-colors/srcery-emacs for reference */
</style>

<link rel="stylesheet" href="./srcery-ck.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', (event) => {
function interactive_lang() {      // define a custom "interactive" language
return {
name: 'interactive',           // language name
keywords: {
$pattern: /[^ \t\n]+/,       // lex based on non-whitespace
keyword: [">>","(shellac)","HM>","TM>","HS>","homeputer>","grace3:","grace4:","grace5:","grace6:","grace7:","grace8:","grace9:","grace10:","grace3>>","grace4>>","grace5>>","grace6>>","grace7>>","grace8>>","grace9>>","grace10>>"], // allowed interactive prompts
},
contains: [
// hljs.HASH_COMMENT_MODE,   // use standard hash comments, any # is a comment
hljs.COMMENT(/#+ /, /$/),    // use custom comment of # w/ whitespace
hljs.COMMENT(/#+/, /$/),     // and a sequence of hashes
]
};
};
hljs.registerLanguage('interactive', interactive_lang);     // register custom language

// Add highlighjs CSS classes to elemens marked with relevant org classes
lang_map = new Map();              // map of org to hljs languages
lang_map.set("src-c"     , "language-c");
lang_map.set("src-python", "language-python");
lang_map.set("src-text"  , "language-plaintext");
lang_map.set("src-sh"    , "language-interactive");
function add_class(el) {           // applied to each pre.src element
for (let [org_lang, hljs_lang] of lang_map) {
if(el.classList.contains(org_lang)){
el.classList.add(hljs_lang);
}
}
}
// visit all pre.src elements and apply function to add language class
document.querySelectorAll('pre.src').forEach(add_class);
hljs.configure({cssSelector: 'pre'}); // select pre blocks only to highligh
hljs.highlightAll();                  // perform highlighting on all pre blocks
});
</script>
</head>
<body>
<div id="preamble" class="status">
<i>Last Updated: 2025-02-24 Mon 15:13</i>
</div>
<div id="content" class="content">
<h1 class="title">CMSC216 Project 2: Bit Ops, Debugging, Data Structures</h1>
<ul class="org-ul">
<li><b>Due: 11:59pm Fri 14-Mar-2025</b></li>
<li><i>Approximately 4.0% of total grade</i></li>
<li>Submit to <a href="https://www.gradescope.com/"><b>Gradescope</b></a></li>
<li>Projects are <b>individual work</b>: no collaboration with other students
is allowed. Seek help from course staff if you get stuck for too long.</li>
</ul>

<div id="outline-container-org3893060" class="outline-4">
<h4 id="org3893060">CODE/TEST DISTRIBUTION: <a href="p2-code.zip">p2-code.zip</a></h4>
</div>

<div id="outline-container-org49bbc2f" class="outline-4">
<h4 id="org49bbc2f">VIDEO OVERVIEW: <a href="https://youtu.be/xAHOlPjnkZs">https://youtu.be/xAHOlPjnkZs</a></h4>
</div>
<div id="outline-container-org29bc06b" class="outline-4">
<h4 id="org29bc06b">CHANGELOG:</h4>
<div class="outline-text-4" id="text-org29bc06b">
</div>
</div>

<div id="outline-container-org3e3c9c1" class="outline-4">
<h4 id="org3e3c9c1"></h4>
<div class="outline-text-4" id="text-org3e3c9c1">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org4f81da1">1. Introduction</a></li>
<li><a href="#org19506be">2. Download Code and Setup</a></li>
<li><a href="#org627caec">3. <b>Problem 1</b>: Digital Clock Simulation</a>
<ul>
<li><a href="#org785a0e1">3.1. Overview</a></li>
<li><a href="#orgf9b491f">3.2. Diagrams of Digits</a></li>
<li><a href="#orgd72abb3">3.3. Diagram of Time Display</a></li>
<li><a href="#orgdd1ecc1">3.4. <code>clock_update.c</code>: Updating the Display with User Code</a></li>
<li><a href="#orgd28fa8d">3.5. Clock Simulator</a></li>
<li><a href="#orgf538def">3.6. Sample Runs of <code>clock_main</code></a></li>
<li><a href="#org97b93bb">3.7. Problem 1 Grading Criteria</a></li>
</ul>
</li>
<li><a href="#orgb442011">4. <b>Problem 2</b>: Debugging the Puzzlebox</a>
<ul>
<li><a href="#org86ecc15">4.1. Overview</a></li>
<li><a href="#org2eeab8d">4.2. <code>input.txt</code> Input File</a></li>
<li><a href="#org25ea43e">4.3. <code>gdb</code> The GNU Debugger</a></li>
<li><a href="#orgf6ce444">4.4. Typical Cycle</a></li>
<li><a href="#org259df50">4.5. Kinds of Puzzles</a></li>
<li><a href="#org47d3ffe">4.6. Tests for <code>puzzlebox.c</code></a></li>
</ul>
</li>
<li><a href="#org41ed9b9">5. <b>Problem 3</b>: Hash Tables in C</a>
<ul>
<li><a href="#org4eb2e55">5.1. Overview</a></li>
<li><a href="#org6782b23">5.2. <code>hashset_main</code> Demonstration</a></li>
<li><a href="#org57e70a3">5.3. Diagram of Hash Set Data structures</a></li>
<li><a href="#org6a9048c">5.4. Hash Table Data Types</a></li>
<li><a href="#org7f42246">5.5. Provided <code>hash_code()</code> Function</a></li>
<li><a href="#org03ba944">5.6. <code>hashset_funcs.c</code> Outline</a></li>
<li><a href="#org8ce593b">5.7. <code>hashset_main.c</code>: main function / application</a></li>
<li><a href="#org9c076dd">5.8. Grading Criteria for Problem 3</a></li>
</ul>
</li>
<li><a href="#org0dae1a8">6. Project Submission</a>
<ul>
<li><a href="#orgfff87f1">6.1. Submit to Gradescope</a></li>
<li><a href="#org6866a1a">6.2. Late Policies</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org4f81da1" class="outline-2">
<h2 id="org4f81da1"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
This project addresses more advanced C programming topics each in its
own problem.
</p>

<ol class="org-ol">
<li><b>Bit-level operations</b> are common in C and systems programming.  This
assignment features a problem in which shifting and bitwise AND/OR-ing
are required to complete the requirements.</li>

<li>Debugging is also a critical skill enabled by the <b>debugger</b>. The
second problem in the assignment makes use of the GNU Debugger, <code>gdb</code>,
to work through a puzzle program requiring specific inputs to pass its
"phases".</li>

<li>Data structures pervade computing and getting some practice with
them in C will improve one's skill at pointers and memory usage
while also giving a great appreciation for garbage collected
languages.  A basic "map" application which maps keys to values is
implemented that is backed by a binary search tree.</li>
</ol>
</div>


<div id="outline-container-org5c585ef" class="outline-4">
<h4 id="org5c585ef">Difficulty Notice*</h4>
<div class="outline-text-4" id="text-org5c585ef">
<p>
Past students have found this content to be <b>more challenging than
Project 1.</b>
</p>

<p>
If you were pressed for time to finish Project 1, start this project
<b>as early as possible</b>.  Most students have found the first two
problems (bit manipulations and debugging) only mildly challenging but
run out of time on the larger third problem.
</p>
<div class="org-center">
<p>
<b><i>You have been warned.</i></b>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org19506be" class="outline-2">
<h2 id="org19506be"><span class="section-number-2">2</span> <a id="org4db2912"></a> Download Code and Setup</h2>
<div class="outline-text-2" id="text-2">
<p>
Download the code pack linked at the top of the page. Unzip this which
will create a project folder. Create new files in this
folder. Ultimately you will re-zip this folder to submit it.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">File</th>
<th scope="col" class="org-left">State</th>
<th scope="col" class="org-left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>clock_update.c</code></td>
<td class="org-left">CREATE</td>
<td class="org-left">Create this file and write required function in it to complete Problem 1</td>
</tr>

<tr>
<td class="org-left"><code>clock.h</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 1 header file</td>
</tr>

<tr>
<td class="org-left"><code>clock_main.c</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 1 main() function for clockmeter simulation</td>
</tr>

<tr>
<td class="org-left"><code>clock_sim.c</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 1 suppor functions to assist with simulating clock device</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>test_clock_update.c</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Problem 1 function tests for <code>clock_upate.c</code></td>
</tr>

<tr>
<td class="org-left"><code>test_clock_update.org</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Problem 1 testing data file</td>
</tr>

<tr>
<td class="org-left"><code>testy</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Problem 1 test running script</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>clock_examples.sh</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 1 script to produce a variety of clock examples</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>puzzlebox.c</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 2 Debugging problem</td>
</tr>

<tr>
<td class="org-left"><code>input.txt</code></td>
<td class="org-left">EDIT</td>
<td class="org-left">Problem 2 Input for <code>puzzlebox</code>, fill this in</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>hashset.h</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 3 header file</td>
</tr>

<tr>
<td class="org-left"><code>hashset_funcs.c</code></td>
<td class="org-left">CREATE</td>
<td class="org-left">Problem 3 functions to write</td>
</tr>

<tr>
<td class="org-left"><code>hashset_main.c</code></td>
<td class="org-left">CREATE</td>
<td class="org-left">Problem 3 main function to write</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>data/hashset_demo.script</code></td>
<td class="org-left">Data</td>
<td class="org-left">Problem 3 sample input scripts to main program</td>
</tr>

<tr>
<td class="org-left"><code>data/alphabet.script</code></td>
<td class="org-left">Data</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>data/rm.hashset</code></td>
<td class="org-left">Data</td>
<td class="org-left">Problem 3 sample hash set save files</td>
</tr>

<tr>
<td class="org-left"><code>data/alphabet.hashset</code></td>
<td class="org-left">Data</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>data/alphabet_expand.hashset</code></td>
<td class="org-left">Data</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>test_hashmap.org</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Problem 3 tests</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>Makefile</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Build file to compile all programs</td>
</tr>

<tr>
<td class="org-left"><code>testy</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Test running script</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org2e7f8e0" class="outline-4">
<h4 id="org2e7f8e0">Makefile</h4>
<div class="outline-text-4" id="text-org2e7f8e0">
<p>
As in the first assignment, a <code>Makefile</code> is provided as part of this
project. The essential targets pertinent to each problem are described
in those sections. The <code>Makefile</code> is equipped with a brief help
listing:
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make help
Typical usage is:
  &gt; make                          # build all programs
  &gt; make clean                    # remove all compiled items
  &gt; make zip                      # create a zip file for submission
  &gt; make prob1                    # built targets associated with problem 1
  &gt; make test                     # run all tests
  &gt; make test-prob2               # run test for problem 2
  &gt; make test-prob2 testnum=5     # run problem 2 test #5 only
  &gt; make update                   # download and install any updates to project files
</pre>
</div>
</div>
</div>


<div id="outline-container-orgd6078b5" class="outline-4">
<h4 id="orgd6078b5">Automated Tests</h4>
<div class="outline-text-4" id="text-orgd6078b5">
<p>
As in previous assignments, automated tests are provided and
associated with problems. Each problem describes how to run tests
associated with it. Generally this is done as before:
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make test-prob1
gcc -Wall -Wno-comment -Werror -g  -c clock_main.c
gcc -Wall -Wno-comment -Werror -g  -c clock_update.c
...
./testy -o md test_clock_update.org 
===========================================================================
== test_clock_update.org : Problem 1 test_clock_update and clock_main tests
== Running 40 / 40 tests
 1) set_tod_from_ports check-initialized-set       : ok
 2) set_tod_from_ports midnight-set                : ok
 3) set_tod_from_ports after-midnight-set          : ok
...

&gt;&gt; make test-prob2         # run "tests" associated with problem 2
... 
&gt;&gt; ./puzzlebox input.txt   # same as above: run puzzlebox to test answers
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org627caec" class="outline-2">
<h2 id="org627caec"><span class="section-number-2">3</span> <b>Problem 1</b>: Digital Clock Simulation</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org785a0e1" class="outline-3">
<h3 id="org785a0e1"><span class="section-number-3">3.1</span> Overview</h3>
<div class="outline-text-3" id="text-3-1">
<p>
You are tasked with writing code which will be run by a
microcontroller in a digital clock.  The hardware has the following
relevant features.
</p>
<ul class="org-ul">
<li>An internal clock that increments 16 time per second. The value
reported by the clock is stored in a special hardware location that
is presented as a global variable.</li>
<li>A digital display with a control port; setting certain global
variable will change the display to show information to a user of
the clock.</li>
<li>User code that you will need to write to update the display based on
the value reported by the internal clock.</li>
<li>A simulator program with <code>Makefile</code> to test your code</li>
</ul>
<p>
Each feature is discussed in subsequent sections.
</p>
</div>

<div id="outline-container-org7706930" class="outline-4">
<h4 id="org7706930">Time of Day Register</h4>
<div class="outline-text-4" id="text-org7706930">
<p>
A special register is periodically updated to contain an integer that
reflects how much time has passed since the beginning of the day.
This special hardware location is accessible in C programs via a
global variable:
</p>
<div class="org-src-container">
<pre class="src src-c">extern int CLOCK_TIME_PORT;
// Time of day in units of 1/16th of a second. Tied to a hardware
// clock that automatically increments it 16 times per second starting
// at midnight. The simulatator provides a C global variable to
// emulate this part of the hardware. This variable is present when
// #include "clock.h" is used and should not be declared in any user
// code.
</pre>
</div>
<p>
You do not need to define this variable as it is already there. You
do not need to set this variable as it is automatically changed by
the hardware.  Instead, you will need to access its value to
determine various aspects of the current time relevant to display.
</p>
<ul class="org-ul">
<li>Calculate the total number of seconds since midnight and round this
up if 8/16th or more of a second has passed. This can be done using
bit shift and mask operations due to the power of 2 involved.</li>
<li>Whether it is AM or PM (AM is hours 12midnight to 11:59am, PM if
12noon to 11:59pm)</li>
<li>The hour of the day (12-hour format so this is 1-12)</li>
<li>The ones and tens digits in the hour (blank or 1 for tens, 0-9 for ones)</li>
<li>The time in minutes (0-59)</li>
<li>The ones and tens digits in the minutes (0-5 for tens, 0-9 for ones)</li>
</ul>
</div>
</div>

<div id="outline-container-orge7d6e67" class="outline-4">
<h4 id="orge7d6e67">Clock Display Port Register</h4>
<div class="outline-text-4" id="text-orge7d6e67">
<p>
A special register controls the display of the LCD clock.  This
register is accessible in C programs via a global variable.
</p>
<div class="org-src-container">
<pre class="src src-c">extern int CLOCK_DISPLAY_PORT;
// Global variable used to control the LCD display on the
// clock. Making changes to this variable will change the clock
// time. Type ensures 32 bits.
</pre>
</div>
<p>
Your code can examine the current values of the register but this is
not relevant to the present problem. More importantly you will need to
set the bits of this variable to properly show the time.
</p>
</div>
</div>
</div>

<div id="outline-container-orgf9b491f" class="outline-3">
<h3 id="orgf9b491f"><span class="section-number-3">3.2</span> Diagrams of Digits</h3>
<div class="outline-text-3" id="text-3-2">
<p>
The following diagram shows bit patterns for various digits and how
they will be displayed in the ones digit of the minutes place.
Digits are displayed by darkening certain <b>bars</b> in the display which
correspond to certain bits in the <code>CLOCK_DISPLAY_PORT</code> register being
set. 
</p>

<div class="org-center">

<div id="orgbab25a7" class="figure">
<p><img src="digital-digits-top-down.png" alt="digital-digits-top-down.png" style="max-width:100%;" />
</p>
<p><span class="figure-number">Figure 1: </span>Bit to clock display bar correspondence for the ones digit of the minute.  The 0th bit controls the upper horizontal bar, the 1th bit controls the horizontal bar counter-clockwise from it, and so on around the 6 outer bars in a counter-clockwise fashion. The 6th bit controls the middle horizontal bar. When a bit is 1 (set), the bar will be darkened while when the bit is 0 (clear) the bar will not be displayed (shown as empty).  The combinations of bits shown are the only ones that arise when showing digits for times.</p>
</div>
</div>


<p>
Notice the following.
</p>
<ul class="org-ul">
<li>Bits that are set (equal to 1) will turn on (darken) one <b>bar</b> of
the clock digit</li>
<li>Bits that are clear (equal to 0) will turn off one bar of the digit</li>
<li>7 bits are required to control the display of one digit</li>
<li>The bits are arranged with the low order bit (bit 0) at the top and
progress counter-clockwise around the digit.
<ul class="org-ul">
<li>Bit 0 top</li>
<li>Bit 1 upper left</li>
<li>Bit 2 upper right</li>
<li>Bit 3 middle</li>
<li>Bit 4 lower left</li>
<li>Bit 5 lower right</li>
<li>Bit 6 bottom</li>
</ul></li>
<li>The programmer can set bits to any pattern which will be displayed
but only patterns shown in the figure correspond to digits of
interest.</li>
</ul>
</div>
</div>

<div id="outline-container-orgd72abb3" class="outline-3">
<h3 id="orgd72abb3"><span class="section-number-3">3.3</span> Diagram of Time Display</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Time is displayed with several adjacent digits along with an AM/PM
display.  The diagram below shows two full times along with the bits
representing the digits.  The bits correspond to how the global
variable <code>CLOCK_DISPLAY_PORT</code> should be set in order to make the clock
appear as it does.
</p>

<div class="org-center">

<div id="orgf47aa5f" class="figure">
<p><img src="digital-clock-topdown.png" alt="digital-clock-topdown.png" style="max-width:100%;" />
</p>
<p><span class="figure-number">Figure 2: </span>Two full examples of how the 30 bits of the clock display state control which parts of the clock are shown.  Each digit follows the same pattern of bit to bar correspondence as the right-most with bits. The lowest order (rightmost) bit controls the top bar of each digit and proceed around the outside counter-clockwise with the final bit for each digit controlling the middle bar.  The highest order bits (28 and 29) control whether the "AM" or "PM" lights are shown. Note that both could be shown at the same time or neither shown but this should not be done for actual times.</p>
</div>
</div>

<p>
Notice the following.
</p>
<ul class="org-ul">
<li>You may presume that the <code>CLOCK_DISPLAY_PORT</code> register is a 32-bit
integer.</li>
<li>30 bits are used to control the full clock display.</li>
<li>Bits 0-6 control the ones place of the minutes</li>
<li>Bits 7-13 control the tens place of the minutes</li>
<li>Bits 14-20 control the ones place of the hours</li>
<li>Bits 21-27 control the tens place of the hours</li>
<li>Bit 28 controls whether AM is displayed</li>
<li>Bit 29 controls whether PM is displayed</li>
<li>Bits 30 and 31 are not used and should always be 0.</li>
</ul>
</div>
</div>


<div id="outline-container-orgdd1ecc1" class="outline-3">
<h3 id="orgdd1ecc1"><span class="section-number-3">3.4</span> <code>clock_update.c</code>: Updating the Display with User Code</h3>
<div class="outline-text-3" id="text-3-4">
<p>
Periodically the microcontroller will run code to adjust the LCD
display for the clock to show the current time.  This function is
called:
</p>
<pre class="example">
clock_update()
</pre>

<p>
and it will be your job to write this function.
</p>

<p>
Rather than write everything that needs to be done within
<code>clock_update()</code>, several helper functions will be used to divide this
task into several more manageable and testable chunks.
</p>

<p>
These should all be written in <code>clock_update.c</code> and are as follows.
</p>
</div>



<div id="outline-container-orgfe7a2df" class="outline-4">
<h4 id="orgfe7a2df">Converting time of Day in Seconds to a Struct</h4>
<div class="outline-text-4" id="text-orgfe7a2df">
<div class="org-src-container">
<pre class="src src-c">int set_tod_from_ports(tod_t *tod);
// Reads the time of day from the CLOCK_TIME_PORT global variable. If
// the port's value is invalid (negative or larger than 16 times the
// number of seconds in a day) does nothing to tod and returns 1 to
// indicate an error. Otherwise, this function uses the port value to
// calculate the number of seconds from start of day (port value is
// 16*number of seconds from midnight). Rounds seconds up if there at
// least 8/16 have passed. Uses shifts and masks for this calculation
// to be efficient. Then uses division on the seconds since the
// begining of the day to calculate the time of day broken into hours,
// minutes, seconds, and sets the AM/PM designation with 1 for AM and
// 2 for PM. By the end, all fields of the `tod` struct are filled in
// and 0 is returned for success.
 // 
// CONSTRAINT: Uses only integer operations. No floating point
// operations are used as the target machine does not have a FPU.
// 
// CONSTRAINT: Limit the complexity of code as much as possible. Do
// not use deeply nested conditional structures. Seek to make the code
// as short, and simple as possible. Code longer than 40 lines may be
// penalized for complexity.
</pre>
</div>

<p>
This function works with the <code>struct tod_t</code> defined in <code>clock.h</code> which
has the following layout.
</p>
<div class="org-src-container">
<pre class="src src-c">// Breaks time down into 12-hour format
typedef struct{
  int   day_secs;    // seconds from start of day
  short time_secs;   // seconds in current hour
  short time_mins;   // minutes in current hour
  short time_hours;  // current hour of day
  char ampm;         // 1 for am, 2 for pm
} tod_t;
</pre>
</div>

<p>
Calculating <code>day_secs</code> should be done using bitwise operations: shifts
and logical operations. Once the <code>day_secs</code> has been determined, the
process of filling in values is simply a matter of doing some
division/modulo and assigning field values.
</p>

<p>
<b>HINT</b>: Review the correspondence between right shift operations and
division and note that any bits shifted off would be the remainder
of a division.
</p>
</div>
</div>

<div id="outline-container-org8c7a485" class="outline-4">
<h4 id="org8c7a485">Setting bits in an integer according to a <code>tod_t</code></h4>
<div class="outline-text-4" id="text-org8c7a485">
<div class="org-src-container">
<pre class="src src-c">int set_display_from_tod(tod_t tod, int *display);
// Accepts a tod and alters the bits in the int pointed at by display
// to reflect how the LCD clock should appear. If any time_** fields
// of tod are negative or too large (e.g. bigger than 12 for hours,
// bigger than 59 for min/sec) or if the AM/PM is not 1 or 2, no
// change is made to display and 1 is returned to indicate an
// error. The display pattern is constructed via shifting bit patterns
// representing digits and using logical operations to combine them.
// May make use of an array of bit masks corresponding to the pattern
// for each digit of the clock to make the task easier.  Returns 0 to
// indicate success. This function DOES NOT modify any global
// variables
// 
// CONSTRAINT: Limit the complexity of code as much as possible. Do
// not use deeply nested conditional structures. Seek to make the code
// as short, and simple as possible. Code longer than 85 lines may be
// penalized for complexity.
</pre>
</div>

<p>
This function will need to do bit shifting along with bitwise
operations to construct the correct bit patter for the clock display.  
</p>

<p>
A good trick to use is to create a series of bit patterns that
correspond to the various digits. For example, according to the
diagrams above, the bit pattern for <code>9</code> is <code>0b1101111</code>.  If a <code>9</code>
should appear on the clock somewhere, this bit pattern should be
shifted and combined with the existing bits in <code>display</code> so that a 9
will show.  Creating similar constant <i>mask</i> patterns for each digit
and AM/PM is a good way to simplify this problem. 
</p>

<p>
A detailed explanation of one approach to the problem:
</p>
<ul class="org-ul">
<li>Create an array of bit masks for each of the digits 0-9. The 0th
element of the array contains a bit mask like <code>0b1110111</code> which
represents the bits that should be set for a 0 digit, the 1th
element of this array has a mask like <code>0b0100100</code> which are the bits
to be set for a 1. There should be ten entries in this array in
indices 0-9.</li>
<li>Use modulo to determine the integer value for the ones and tens
digits for both hours and minutes. Call these variables something
like <code>min_ones</code> and <code>min_tens</code> and similarly for hours. Each
variable should be in the range 0-9.</li>
<li>Start with a state variable of 0 (all 0 bits).</li>
<li>Use <code>min_ones</code> to index into your array of masks to determine the
bits that should be set for it. Combine the state variable with
<code>min_ones</code> mask.</li>
<li>Combining bits here is a logical operation of setting all bits that
are one in the mask to 1 in the state variable.</li>
<li>Use <code>min_tens</code> to index into your array of masks for the right mask
for that digit. The bits corresponding to the tens place of the
minutes is shifted to the left by 7 bits so shift the mask to the
left and combine it with the state variable.</li>
<li>Repeat this process for the ones digit of the hours (shifted by 14
to the left) and the tens digit of the hour (shifted by
21).</li>
<li>The tens digit of the hour is special in that it should be either 1
or blank (don't show a 0 for hours 1-9) so adjust your mask
appropriately before shifting.</li>
<li>Set the 28th bit of the state if the time is in the AM or the 29th
bit if time is in the PM.</li>
<li>The state variable should now be populated.</li>
</ul>
</div>
</div>


<div id="outline-container-org7bc0ad7" class="outline-4">
<h4 id="org7bc0ad7">Changing the clock display</h4>
<div class="outline-text-4" id="text-org7bc0ad7">
<div class="org-src-container">
<pre class="src src-c">int clock_update();
// Examines the CLOCK_TIME_PORT global variable to determine hour,
// minute, and am/pm.  Sets the global variable CLOCK_DISPLAY_PORT bits
// to show the proper time.  If CLOCK_TIME_PORT appears to be in error
// (to large/small) makes no change to CLOCK_DISPLAY_PORT and returns 1
// to indicate an error. Otherwise returns 0 to indicate success.
//
// Makes use of the previous two functions: set_tod_from_ports() and
// set_display_from_tod().
// 
// CONSTRAINT: Does not allocate any heap memory as malloc() is NOT
// available on the target microcontroller.  Uses stack and global
// memory only.
</pre>
</div>
<p>
This function makes use of the previous two functions and the global
variables that correspond to the clock hardware to alter the
display. It should be relatively short by making use of the previous
functions. 
</p>
</div>
</div>
</div>

<div id="outline-container-orgd28fa8d" class="outline-3">
<h3 id="orgd28fa8d"><span class="section-number-3">3.5</span> Clock Simulator</h3>
<div class="outline-text-3" id="text-3-5">
<p>
While we do not have actual hardware with the features mentioned, a
simulator for the clock system is in the provided files <code>clock_main.c</code>
and <code>clock_sim.c</code>.  You do not need to modify or understand code in
either file to complete the HW though it will certainly expand you C
skills to spend some time examining them.
</p>

<p>
The <code>main()</code> function in <code>clock_main.c</code> accepts a command line argument
which is a number of seconds since the beginning of the day and will
call your functions for this problem and show results for it.  You are
encouraged to use this function to test your code incrementally
</p>
<ul class="org-ul">
<li>Examine whether <code>set_tod_from_ports()</code> is correct based on the first
part of output in <code>clock_main.c</code></li>
<li>Once <code>set_tod_from_ports()</code> is complete, examine whether the output
of <code>set_display_from_tod()</code> is correct based on the latter part
of the output.</li>
<li>Once both these functions are correct, examine whether
<code>cock_update()</code> is correct based on the final part of the output of
the <code>main()</code> function.</li>
</ul>

<p>
Note that there are a variety of functions in the file <code>clock_sim.c</code>
which are used to simulate how the clock will display. This is also
where the global variables <code>CLOCK_DISPLAY_PORT</code> and <code>TIME_OF_DAY_SEC</code>
are defined.  However, you do not need to modify or even understand
the code in <code>clock_sim.c</code>. It is only used to show how the clock would
look when the <code>CLOCK_DISPLAY_PORT</code> bits are set.
</p>
</div>
</div>

<div id="outline-container-orgf538def" class="outline-3">
<h3 id="orgf538def"><span class="section-number-3">3.6</span> Sample Runs of <code>clock_main</code></h3>
<div class="outline-text-3" id="text-3-6">
<p>
You can build the <code>clock_main</code> executable via
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt; make
OR
&gt; make clock_main
</pre>
</div>
<p>
Below are samples generated by compiling and running the <code>main()</code>
function in the <code>clock_main.c</code> file.  The code is compiled by using the
provided <code>Makefile</code> to create the <code>clock_main</code> program.  It compiles the
<code>clock_sim.c</code> library along with the functions you write in the file
<code>clock_update.c</code> and the <code>main()</code> in <code>clock_main.c</code>.
</p>

<pre class="example" id="org4da3fbf">
&gt; make clock_main
make: 'clock_main' is up to date.

&gt; ./clock_main 0
CLOCK_TIME_PORT set to: 0
result = set_tod_from_ports( &amp;tod );
result: 0
tod = {
  .day_secs   = 0
  .time_hours = 12
  .time_mins  = 0
  .time_secs  = 0
  .ampm       = 1
}              
Simulated time is: 12 : 00 : 00 am
result = set_display_from_tod(tod, &amp;display);
result: 0
display is
bits:  00 01 0100100 1011101 1110111 1110111
index: 30 28      21      14       7       0

result = clock_update();
result: 0
CLOCK_DISPLAY_PORT is
bits:  00 01 0100100 1011101 1110111 1110111
index: 30 28      21      14       7       0

Clock Display:
   # ####   #### ####   
   #    #   #  # #  #   
   #    # o #  # #  #   
   # ####   #  # #  #   
   # #    o #  # #  #   
   # #      #  # #  # AM
   # ####   #### ####   


&gt; ./clock_main 16
CLOCK_TIME_PORT set to: 16
result = set_tod_from_ports( &amp;tod );
result: 0
tod = {
  .day_secs   = 1
  .time_hours = 12
  .time_mins  = 0
  .time_secs  = 1
  .ampm       = 1
}              
Simulated time is: 12 : 00 : 01 am
result = set_display_from_tod(tod, &amp;display);
result: 0
display is
bits:  00 01 0100100 1011101 1110111 1110111
index: 30 28      21      14       7       0

result = clock_update();
result: 0
CLOCK_DISPLAY_PORT is
bits:  00 01 0100100 1011101 1110111 1110111
index: 30 28      21      14       7       0

Clock Display:
   # ####   #### ####   
   #    #   #  # #  #   
   #    # o #  # #  #   
   # ####   #  # #  #   
   # #    o #  # #  #   
   # #      #  # #  # AM
   # ####   #### ####   


&gt; ./clock_main 89
CLOCK_TIME_PORT set to: 89
result = set_tod_from_ports( &amp;tod );
result: 0
tod = {
  .day_secs   = 6
  .time_hours = 12
  .time_mins  = 0
  .time_secs  = 6
  .ampm       = 1
}              
Simulated time is: 12 : 00 : 06 am
result = set_display_from_tod(tod, &amp;display);
result: 0
display is
bits:  00 01 0100100 1011101 1110111 1110111
index: 30 28      21      14       7       0

result = clock_update();
result: 0
CLOCK_DISPLAY_PORT is
bits:  00 01 0100100 1011101 1110111 1110111
index: 30 28      21      14       7       0

Clock Display:
   # ####   #### ####   
   #    #   #  # #  #   
   #    # o #  # #  #   
   # ####   #  # #  #   
   # #    o #  # #  #   
   # #      #  # #  # AM
   # ####   #### ####   


&gt; ./clock_main 961
CLOCK_TIME_PORT set to: 961
result = set_tod_from_ports( &amp;tod );
result: 0
tod = {
  .day_secs   = 60
  .time_hours = 12
  .time_mins  = 1
  .time_secs  = 0
  .ampm       = 1
}              
Simulated time is: 12 : 01 : 00 am
result = set_display_from_tod(tod, &amp;display);
result: 0
display is
bits:  00 01 0100100 1011101 1110111 0100100
index: 30 28      21      14       7       0

result = clock_update();
result: 0
CLOCK_DISPLAY_PORT is
bits:  00 01 0100100 1011101 1110111 0100100
index: 30 28      21      14       7       0

Clock Display:
   # ####   ####    #   
   #    #   #  #    #   
   #    # o #  #    #   
   # ####   #  #    #   
   # #    o #  #    #   
   # #      #  #    # AM
   # ####   ####    #   


&gt; ./clock_main 72115
CLOCK_TIME_PORT set to: 72115
result = set_tod_from_ports( &amp;tod );
result: 0
tod = {
  .day_secs   = 4507
  .time_hours = 1
  .time_mins  = 15
  .time_secs  = 7
  .ampm       = 1
}              
Simulated time is: 01 : 15 : 07 am
result = set_display_from_tod(tod, &amp;display);
result: 0
display is
bits:  00 01 0000000 0100100 0100100 1101011
index: 30 28      21      14       7       0

result = clock_update();
result: 0
CLOCK_DISPLAY_PORT is
bits:  00 01 0000000 0100100 0100100 1101011
index: 30 28      21      14       7       0

Clock Display:
        #      # ####   
        #      # #      
        # o    # #      
        #      # ####   
        # o    #    #   
        #      #    # AM
        #      # ####   


&gt; ./clock_main 612199
CLOCK_TIME_PORT set to: 612199
result = set_tod_from_ports( &amp;tod );
result: 0
tod = {
  .day_secs   = 38262
  .time_hours = 10
  .time_mins  = 37
  .time_secs  = 42
  .ampm       = 1
}              
Simulated time is: 10 : 37 : 42 am
result = set_display_from_tod(tod, &amp;display);
result: 0
display is
bits:  00 01 0100100 1110111 1101101 0100101
index: 30 28      21      14       7       0

result = clock_update();
result: 0
CLOCK_DISPLAY_PORT is
bits:  00 01 0100100 1110111 1101101 0100101
index: 30 28      21      14       7       0

Clock Display:
   # ####   #### ####   
   # #  #      #    #   
   # #  # o    #    #   
   # #  #   ####    #   
   # #  # o    #    #   
   # #  #      #    # AM
   # ####   ####    #   


&gt; ./clock_main 691191
CLOCK_TIME_PORT set to: 691191
result = set_tod_from_ports( &amp;tod );
result: 0
tod = {
  .day_secs   = 43199
  .time_hours = 11
  .time_mins  = 59
  .time_secs  = 59
  .ampm       = 1
}              
Simulated time is: 11 : 59 : 59 am
result = set_display_from_tod(tod, &amp;display);
result: 0
display is
bits:  00 01 0100100 0100100 1101011 1101111
index: 30 28      21      14       7       0

result = clock_update();
result: 0
CLOCK_DISPLAY_PORT is
bits:  00 01 0100100 0100100 1101011 1101111
index: 30 28      21      14       7       0

Clock Display:
   #    #   #### ####   
   #    #   #    #  #   
   #    # o #    #  #   
   #    #   #### ####   
   #    # o    #    #   
   #    #      #    # AM
   #    #   #### ####   


&gt; ./clock_main 691196
CLOCK_TIME_PORT set to: 691196
result = set_tod_from_ports( &amp;tod );
result: 0
tod = {
  .day_secs   = 43200
  .time_hours = 12
  .time_mins  = 0
  .time_secs  = 0
  .ampm       = 2
}              
Simulated time is: 12 : 00 : 00 pm
result = set_display_from_tod(tod, &amp;display);
result: 0
display is
bits:  00 10 0100100 1011101 1110111 1110111
index: 30 28      21      14       7       0

result = clock_update();
result: 0
CLOCK_DISPLAY_PORT is
bits:  00 10 0100100 1011101 1110111 1110111
index: 30 28      21      14       7       0

Clock Display:
   # ####   #### ####   
   #    #   #  # #  #   
   #    # o #  # #  #   
   # ####   #  # #  #   
   # #    o #  # #  #   
   # #      #  # #  #   
   # ####   #### #### PM


&gt; ./clock_main 852045
CLOCK_TIME_PORT set to: 852045
result = set_tod_from_ports( &amp;tod );
result: 0
tod = {
  .day_secs   = 53253
  .time_hours = 2
  .time_mins  = 47
  .time_secs  = 33
  .ampm       = 2
}              
Simulated time is: 02 : 47 : 33 pm
result = set_display_from_tod(tod, &amp;display);
result: 0
display is
bits:  00 10 0000000 1011101 0101110 0100101
index: 30 28      21      14       7       0

result = clock_update();
result: 0
CLOCK_DISPLAY_PORT is
bits:  00 10 0000000 1011101 0101110 0100101
index: 30 28      21      14       7       0

Clock Display:
     ####   #  # ####   
        #   #  #    #   
        # o #  #    #   
     ####   ####    #   
     #    o    #    #   
     #         #    #   
     ####      #    # PM


&gt; ./clock_main 1037010
CLOCK_TIME_PORT set to: 1037010
result = set_tod_from_ports( &amp;tod );
result: 0
tod = {
  .day_secs   = 64813
  .time_hours = 6
  .time_mins  = 0
  .time_secs  = 13
  .ampm       = 2
}              
Simulated time is: 06 : 00 : 13 pm
result = set_display_from_tod(tod, &amp;display);
result: 0
display is
bits:  00 10 0000000 1111011 1110111 1110111
index: 30 28      21      14       7       0

result = clock_update();
result: 0
CLOCK_DISPLAY_PORT is
bits:  00 10 0000000 1111011 1110111 1110111
index: 30 28      21      14       7       0

Clock Display:
     ####   #### ####   
     #      #  # #  #   
     #    o #  # #  #   
     ####   #  # #  #   
     #  # o #  # #  #   
     #  #   #  # #  #   
     ####   #### #### PM


&gt; ./clock_main 1368626
CLOCK_TIME_PORT set to: 1368626
result = set_tod_from_ports( &amp;tod );
result: 0
tod = {
  .day_secs   = 85539
  .time_hours = 11
  .time_mins  = 45
  .time_secs  = 39
  .ampm       = 2
}              
Simulated time is: 11 : 45 : 39 pm
result = set_display_from_tod(tod, &amp;display);
result: 0
display is
bits:  00 10 0100100 0100100 0101110 1101011
index: 30 28      21      14       7       0

result = clock_update();
result: 0
CLOCK_DISPLAY_PORT is
bits:  00 10 0100100 0100100 0101110 1101011
index: 30 28      21      14       7       0

Clock Display:
   #    #   #  # ####   
   #    #   #  # #      
   #    # o #  # #      
   #    #   #### ####   
   #    # o    #    #   
   #    #      #    #   
   #    #      # #### PM


&gt; ./clock_main 1382386
CLOCK_TIME_PORT set to: 1382386
result = set_tod_from_ports( &amp;tod );
result: 0
tod = {
  .day_secs   = 86399
  .time_hours = 11
  .time_mins  = 59
  .time_secs  = 59
  .ampm       = 2
}              
Simulated time is: 11 : 59 : 59 pm
result = set_display_from_tod(tod, &amp;display);
result: 0
display is
bits:  00 10 0100100 0100100 1101011 1101111
index: 30 28      21      14       7       0

result = clock_update();
result: 0
CLOCK_DISPLAY_PORT is
bits:  00 10 0100100 0100100 1101011 1101111
index: 30 28      21      14       7       0

Clock Display:
   #    #   #### ####   
   #    #   #    #  #   
   #    # o #    #  #   
   #    #   #### ####   
   #    # o    #    #   
   #    #      #    #   
   #    #   #### #### PM


&gt; ./clock_main 1426225
CLOCK_TIME_PORT set to: 1426225
result = set_tod_from_ports( &amp;tod );
result: 1
failed to initialize tod; bailing


</pre>
</div>
</div>

<div id="outline-container-org97b93bb" class="outline-3 grading 30">
<h3 id="org97b93bb"><span class="section-number-3">3.7</span> Problem 1 Grading Criteria&#xa0;&#xa0;&#xa0;<span class="tag"><span class="grading">grading</span>&#xa0;<span class="30">30</span></span></h3>
<div class="outline-text-3" id="text-3-7">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Weight</th>
<th scope="col" class="org-left">Criteria</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">AUTOMATED TESTS</td>
</tr>

<tr>
<td class="org-right">20</td>
<td class="org-left"><code>make test-prob1</code> which uses programs <code>test_clock_update</code> and <code>clock_main</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Provides 40 tests for functions in <code>clock_update.c</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">0.5 point per test passed</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">MANUAL INSPECTION of <code>clock_update.c</code></td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-left"><code>set_tod_from_ports()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear effort to do error checking of out of bounds values.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear flow to how each field of <code>tod</code> is calculated.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Correctly setting fields of <code>tod</code> via pointer dereference or arrow operator.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Makes use of shift / logical operations to convert port value to seconds</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Adherence to constraints: no floats, no float math ops, no deeply nested conditionals</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><b>Concise function that is not longer than 40 lines of code, avoids complex nested conditionals and loops</b></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left"><code>set_display_from_tod()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear effort to do error checking for out of bounds values in <code>tod</code> parameter</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear code that calculates digits to be displayed</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of bit masks corresponding to digits to be displayed</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of bitwise operators to shift bits appropriately</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of bitwise operators to combine shifted digit bits</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear derference/set of the integer pointed to by the <code>display</code> parameter</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Adherence to constraints: no floats, no math float ops, no deeply nested conditionals</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><b>Concise function that is not longer than 80 lines of code, avoids complex nested conditionals and loops</b></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left"><code>clock_update()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of the global variables like <code>CLOCK_DISPLAY_PORT</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Does not re-define / re-declare these variables, only checks / alters their values</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of previous two functions</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Error checking on function return values</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">No use of <code>malloc()</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-orgb442011" class="outline-2">
<h2 id="orgb442011"><span class="section-number-2">4</span> <b>Problem 2</b>: Debugging the Puzzlebox</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org86ecc15" class="outline-3">
<h3 id="org86ecc15"><span class="section-number-3">4.1</span> Overview</h3>
<div class="outline-text-3" id="text-4-1">
<p>
The file <code>puzzlebox.c</code> contains source code that reads inputs from a
file named on the command line. If the inputs are correct, points are
awarded. If inputs are incorrect, error messages are printed.  
</p>

<p>
The <code>puzzlebox</code> is arranged into a series of <i>phases</i> each of which
has some points associated with it.
</p>
<ul class="org-ul">
<li>Not all phases must be completed to get full credit but the phases
must done in order.</li>
<li>Each phase reads inputs from the file provided on the command line
and performs calculations on them to see if they are "correct"
according to various criteria</li>
<li>The very first input is your <b>internet ID</b> like <code>kauf0095</code> (first
part of your UMN email address).  This input is used to add
randomness to the puzzle so that <b>your answers will be different
from most other students</b>. You must you use your own internet ID.</li>
</ul>

<p>
<b>The purpose of this problem is get familiar with using a debugger.</b>
This is a powerful tool that pauses programs, allows internal values
to be printed and code to be stepped through line by line.  It is
nearly essential to use as the code in <code>puzzlebox</code> is intentionally
convoluted in places. Being able to pause execution and print values
at various points make it <b>much easier</b> to solve the puzzles.
</p>
</div>
</div>

<div id="outline-container-org2eeab8d" class="outline-3">
<h3 id="org2eeab8d"><span class="section-number-3">4.2</span> <code>input.txt</code> Input File</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Name your input file <code>input.txt</code> and put your internet ID in it along
with some numbers like <code>1 2 3</code>. Then compile and run the <code>puzzlebox</code>
program on it.
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make puzzlebox                             # compile puzzlebox
gcc -Wall -g -c puzzlebox.c
gcc -Wall -g -o puzzlebox puzzlebox.o

&gt;&gt; cat input.txt                              # show contents of input.txt
kauf0095 1 2 3

&gt;&gt; puzzlebox input.txt
========================================
PROBLEM 2: Puzzlebox
UserID 'KAUF0095' accepted: hash value = 1936486779
PHASE 1: A puzzle you say? Challenge accepted!

Ah ah ah, you didn't say the magic word...
Failure: Double debugger burger, order up!

RESULTS: 0 / 30 points
</pre>
</div>

<p>
This is automated with the <code>Makefile</code> target <code>make test-prob2</code>:
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make test-prob2                       # compile/run puzzlebox with input.txt
gcc -Wall -g -c puzzlebox.c
gcc -Wall -g -o puzzlebox puzzlebox.o
puzzlebox input.txt
========================================
PROBLEM 2: Puzzlebox
UserID 'KAUF0095' accepted: hash value = 1936486779
PHASE 1: A puzzle you say? Challenge accepted!

Ah ah ah, you didn't say the magic word...
Failure: Double debugger burger, order up!

RESULTS: 0 / 30 points
</pre>
</div>

<p>
These initial forays are not positive (0 / 30 points) but the real
meat of the problem is in examining the source code and determining
inputs for <code>input.txt</code>.
</p>
</div>
</div>

<div id="outline-container-org25ea43e" class="outline-3">
<h3 id="org25ea43e"><span class="section-number-3">4.3</span> <code>gdb</code> The GNU Debugger</h3>
<div class="outline-text-3" id="text-4-3">
<p>
You will definitely need to use a debugger to solve the puzzlebox and
<code>gdb</code> is the quintessential debugger associated with our compiler
<code>gcc</code>.  It is installed by default on all lab machines and is an easy
install on must Linux machines.
</p>

<p>
For a quick overview of GDB, here are some resources
</p>
<ul class="org-ul">
<li><a href="https://kauffman77.github.io/tutorials/gdb.html">Quick Guide to gdb: The GNU Debugger</a>: Page describing how
to start the debugger, a sample session using <code>puzzlebox</code>, an
overview of the most common commands.</li>
<li><a href="https://www.youtube.com/watch?v%3DPorfLSr3DDI">CppCon 2015: Greg Law " Give me 15 minutes &amp; I'll change your view
of GDB"</a>: Video giving basic overview of hope to run <code>gdb</code> on simple
programs with an emphasis on differences between "normal" mode and
TUI mode</li>
<li><a href="http://www.yolinux.com/TUTORIALS/GDB-Commands.html">GNU GDB Debugger Command Cheat Sheet</a>: Extensive list of commands</li>
<li><a href="https://sourceware.org/gdb/current/onlinedocs/gdb/">Debugging with GDB</a>: Official manual for <code>gdb</code></li>
</ul>
</div>
</div>

<div id="outline-container-orgf6ce444" class="outline-3">
<h3 id="orgf6ce444"><span class="section-number-3">4.4</span> Typical Cycle</h3>
<div class="outline-text-3" id="text-4-4">
<p>
A typical cycle of working on <code>puzzlebox</code> will be the following.
</p>
<ul class="org-ul">
<li><p>
Start the debugger with puzzlebox
</p>
<div class="org-src-container">
<pre class="src src-sh">  &gt;&gt; gdb -tui ./puzzlebox
</pre>
</div></li>
<li><p>
Set the arguments array to <code>input.txt</code>
</p>
<pre class="example">
set args input.txt
</pre></li>
<li><p>
Set a breakpoint at a phase like <code>phase03</code>
</p>
<pre class="example">
break phase03
</pre></li>
<li><p>
Run the program
</p>
<pre class="example">
run
</pre></li>
<li><p>
Do some stepping / nexting
</p>
<pre class="example">
step
next
</pre></li>
<li><p>
Print some variables
</p>
<pre class="example">
print normal_val
print/x val_in_hex
print/t val_in_binary
</pre></li>
<li>Make some changes to <code>input.txt</code> in a different window</li>
<li><p>
Re-run the program to see if things have changed favorably
</p>
<pre class="example">
kill
run
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-org259df50" class="outline-3">
<h3 id="org259df50"><span class="section-number-3">4.5</span> Kinds of Puzzles</h3>
<div class="outline-text-3" id="text-4-5">
<p>
The puzzles presented in the different phases make use of a variety of
C program techniques which we have or will discuss including.
</p>
<ul class="org-ul">
<li>Bit-wise operations and their use in place of arithmetic</li>
<li>String and character array manipulations</li>
<li>Interpreting bits as one of several kinds of things (integer, float,
character) through pointers and unions</li>
<li>More extensive C control structures like <code>goto</code> and labels</li>
</ul>
</div>
</div>

<div id="outline-container-org47d3ffe" class="outline-3 grading 30">
<h3 id="org47d3ffe"><span class="section-number-3">4.6</span> Tests for <code>puzzlebox.c</code>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="grading">grading</span>&#xa0;<span class="30">30</span></span></h3>
<div class="outline-text-3" id="text-4-6">
<p>
<code>puzzlebox.c</code> itself reports how many points one can earn at the end
of its execution.
</p>

<p>
Currently there are <b>40 points available but 30 points is considered
full credit.</b> 
</p>

<p>
If any additional points are earned, they will be counted as <b>Makeup
Credit for Projects</b> to make up for credit lost on past or future
projects.  Your total score on All Projects cannot exceed 100% so any
points beyond will simply be dropped.
</p>

<p>
<b>Run the following command to 'test' puzzlebox</b>:
</p>
<pre class="example">
make test-prob2
</pre>
</div>
</div>
</div>

<div id="outline-container-org41ed9b9" class="outline-2">
<h2 id="org41ed9b9"><span class="section-number-2">5</span> <b>Problem 3</b>: Hash Tables in C</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org4eb2e55" class="outline-3">
<h3 id="org4eb2e55"><span class="section-number-3">5.1</span> Overview</h3>
<div class="outline-text-3" id="text-5-1">
<p>
This problem implements a rudimentary hash table application in C
along with a program that uses it.  The architecture is similar to a
lab problem involving linked lists so reviewing that code can provide
some insight.
</p>

<p>
Basic Hash Tables are covered in most introductory data structure
classes such as CSCI 1913 and 1933. Should you need to review them,
the following resources may prove useful.
</p>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Hash_table">Wikipedia Article on Hash Tables</a>: Provides general overview of the
data structure. Specifically focus on <a href="https://en.wikipedia.org/wiki/Hash_table#Separate_chaining_with_linked_lists">Separate Chaining with Linked
Lists</a> which is the style of hash table implemented in the
assignment.</li>
<li><a href="https://www.youtube.com/watch?v=shs0KM3wKv8">Youtube "Data Structures: Hash Tables" by HackerRank</a>: Short video
summarizing major concepts of hash tables in any programming
language. Explains briefly hash code functions and the Separate
Chaining architecture we will use.</li>
<li><a href="https://www.youtube.com/watch?v=c3RVW3KGIIE">Youtube "How HashMap works in Java" by Ranjith Ramachandran</a>: Short
video which includes a detailed walk-through of adding elements to a
separately chained hash table.  Somewhat Java-centric including use
of a different mapping of hash codes to array indices than we will
use. Also note that they Key/Value structure used there is for a Map
whereas we will use a Set where the Key/Val are identical and
referred to as an Element.</li>
</ul>

<p>
Our particular variant will be a <b>Hash Set</b> which is a collection of
elements (strings) which are each unique. The hash table is used to
quickly add new elements and check whether an element is contained in the
set. The hash table will use the <b>separate chaining</b> technique to
resolve hash code conflicts: each hash "bucket" has a singly linked
list of elements in that bucket.
</p>

<p>
Additionally, the hash set will maintain a record of the <b>order elements
are added</b> by overlaying a linked list on elements as they are
added. This allows for efficient traversal of the hash table elements for
printing and gives a queue-like feel to parts of the table.
</p>
</div>
</div>

<div id="outline-container-org6782b23" class="outline-3">
<h3 id="org6782b23"><span class="section-number-3">5.2</span> <code>hashset_main</code> Demonstration</h3>
<div class="outline-text-3" id="text-5-2">
<p>
The intent of this problem is to develop a small application which
behaves as the following demo indicates.
</p>

<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make hashset_main                   # Compile hash table application
gcc -Wall -Wno-comment -Werror -g  -c hashset_main.c
gcc -Wall -Wno-comment -Werror -g  -c hashset_funcs.c
gcc -Wall -Wno-comment -Werror -g  -o hashset_main hashset_main.o hashset_funcs.o

&gt;&gt; ./hashset_main                      # start application, shows help message with commands
Hashset Application
Commands:
  hashcode &lt;elem&gt;  : prints out the numeric hash code for the given key (does not change the hash set)
  contains &lt;elem&gt;  : prints the value associated with the given element or NOT PRESENT
  add &lt;elem&gt;       : inserts the given element into the hash set, reports existing element
  print            : prints all elements in the hash set in the order they were addded
  structure        : prints detailed structure of the hash set
  clear            : reinitializes hash set to be empty with default size
  save &lt;file&gt;      : writes the contents of the hash set to the given file
  load &lt;file&gt;      : clears the current hash set and loads the one in the given file
  next_prime &lt;int&gt; : if &lt;int&gt; is prime, prints it, otherwise finds the next prime and prints it
  expand           : expands memory size of hash set to reduce its load factor
  quit             : exit the program

HS&gt; print                              # prints items in order, empty initially

HS&gt; structure                          # show hash table structure, empty intitially
elem_count: 0
table_size: 5
order_first: NULL
order_last : NULL
load_factor: 0.0000
[ 0] : 
[ 1] : 
[ 2] : 
[ 3] : 
[ 4] : 

HS&gt; add Rick                           # add items table
HS&gt; add Morty                             

HS&gt; print                              # show items in order added
  1 Rick
  2 Morty

HS&gt; structure                          # show internal structure of the hash table
elem_count: 2
table_size: 5
order_first: Rick
order_last : Morty
load_factor: 0.4000
[ 0] :                                 # some buckets are empty
[ 1] : 
[ 2] : 
[ 3] : {2546943 Rick &gt;&gt;Morty}          # nodes show hash code, string stored, next string
[ 4] : {74531189 Morty &gt;&gt;NULL}         # last item added, points to null

HS&gt; add Summer                         # add more items
HS&gt; add Jerry
HS&gt; add Beth
HS&gt; add Tinyrick

HS&gt; print                              # print items in order added
  1 Rick
  2 Morty
  3 Summer
  4 Jerry
  5 Beth
  6 Tinyrick

HS&gt; structure                          # show structure
elem_count: 6                          # NOTE: recently added items added to front of bucket lists
table_size: 5
order_first: Rick
order_last : Tinyrick
load_factor: 1.2000
[ 0] : 
[ 1] : {-1964728321 Tinyrick &gt;&gt;NULL} 
[ 2] : {2066967 Beth &gt;&gt;Tinyrick} 
[ 3] : {-1807340593 Summer &gt;&gt;Jerry} {2546943 Rick &gt;&gt;Morty} 
[ 4] : {71462654 Jerry &gt;&gt;Beth} {74531189 Morty &gt;&gt;Summer} 

HS&gt; contains Jerry                     # check if items contained / not in hashset
FOUND: Jerry
HS&gt; contains Rick
FOUND: Rick
HS&gt; contains Unity
NOT PRESENT
HS&gt; contains President
NOT PRESENT

HS&gt; add Jerry                          # items are unique, no changes made on detecting duplicates
Elem already present, no changes made
HS&gt; add Beth
Elem already present, no changes made

HS&gt; save rm.hashset                    # save the hash table file rm.hashset, can be loaded later
HS&gt; clear                              # clear the hash table
HS&gt; print                              # show cleared hash table is empty now
HS&gt; structure
elem_count: 0
table_size: 5
order_first: NULL
order_last : NULL
load_factor: 0.0000
[ 0] : 
[ 1] : 
[ 2] : 
[ 3] : 
[ 4] : 

HS&gt; add Birdperson                     # add new items to the empty hash table
HS&gt; add Squanchy
HS&gt; structure                          # show contents
elem_count: 2
table_size: 5
order_first: Birdperson
order_last : Squanchy
load_factor: 0.4000
[ 0] : 
[ 1] : 
[ 2] : {-724361712 Squanchy &gt;&gt;NULL} 
[ 3] : {2082041198 Birdperson &gt;&gt;Squanchy} 
[ 4] : 

HS&gt; load rm.hashset                    # clear current hash table and load from file
HS&gt; structure                          # show contents identical to when 'save' was used
elem_count: 6
table_size: 5
order_first: Rick
order_last : Tinyrick
load_factor: 1.2000
[ 0] : 
[ 1] : {-1964728321 Tinyrick &gt;&gt;NULL} 
[ 2] : {2066967 Beth &gt;&gt;Tinyrick} 
[ 3] : {-1807340593 Summer &gt;&gt;Jerry} {2546943 Rick &gt;&gt;Morty} 
[ 4] : {71462654 Jerry &gt;&gt;Beth} {74531189 Morty &gt;&gt;Summer} 

HS&gt; expand                             # expand the size of the hash table's internal array
HS&gt; print                              # no effect on items/ordering in table
  1 Rick
  2 Morty
  3 Summer
  4 Jerry
  5 Beth
  6 Tinyrick

HS&gt; structure                          # show internal sturcture: larger array now
elem_count: 6

table_size: 11                         # array size is next_prime(2*5+1) = 11
order_first: Rick
order_last : Tinyrick
load_factor: 0.5455
[ 0] : 
[ 1] : {2066967 Beth &gt;&gt;Tinyrick} 
[ 2] : 
[ 3] : {-1807340593 Summer &gt;&gt;Jerry} {2546943 Rick &gt;&gt;Morty} 
[ 4] : 
[ 5] : 
[ 6] : {-1964728321 Tinyrick &gt;&gt;NULL} 
[ 7] : {74531189 Morty &gt;&gt;Summer} 
[ 8] : 
[ 9] : 
[10] : {71462654 Jerry &gt;&gt;Beth} 

HS&gt; add Birdperson                     # add additional items
HS&gt; add Squanchy
HS&gt; add Picklerick

HS&gt; structure                          # show structure again
elem_count: 9
table_size: 11
order_first: Rick
order_last : Picklerick
load_factor: 0.8182
[ 0] : {761532761 Picklerick &gt;&gt;NULL} 
[ 1] : {2066967 Beth &gt;&gt;Tinyrick} 
[ 2] : 
[ 3] : {-1807340593 Summer &gt;&gt;Jerry} {2546943 Rick &gt;&gt;Morty} 
[ 4] : 
[ 5] : 
[ 6] : {2082041198 Birdperson &gt;&gt;Squanchy} {-1964728321 Tinyrick &gt;&gt;Birdperson} 
[ 7] : {74531189 Morty &gt;&gt;Summer} 
[ 8] : {-724361712 Squanchy &gt;&gt;Picklerick} 
[ 9] : 
[10] : {71462654 Jerry &gt;&gt;Beth} 

HS&gt; expand                             # expand again
HS&gt; structure                          # show internal structure
elem_count: 9
table_size: 23                         # size is next_prime(2*11 + 1) = 23
order_first: Rick
order_last : Picklerick
load_factor: 0.3913
[ 0] : 
[ 1] : {761532761 Picklerick &gt;&gt;NULL} 
[ 2] : 
[ 3] : {2066967 Beth &gt;&gt;Tinyrick} 
[ 4] : 
[ 5] : 
[ 6] : 
[ 7] : 
[ 8] : {2082041198 Birdperson &gt;&gt;Squanchy} 
[ 9] : 
[10] : 
[11] : {-724361712 Squanchy &gt;&gt;Picklerick} {-1964728321 Tinyrick &gt;&gt;Birdperson} {74531189 Morty &gt;&gt;Summer} 
[12] : 
[13] : 
[14] : 
[15] : {2546943 Rick &gt;&gt;Morty} 
[16] : 
[17] : 
[18] : {-1807340593 Summer &gt;&gt;Jerry} 
[19] : 
[20] : 
[21] : {71462654 Jerry &gt;&gt;Beth} 
[22] : 

HS&gt; quit                               # exit the application
&gt;&gt;                                     # back to normal shell
</pre>
</div>
</div>
</div>

<div id="outline-container-org57e70a3" class="outline-3">
<h3 id="org57e70a3"><span class="section-number-3">5.3</span> Diagram of Hash Set Data structures</h3>
<div class="outline-text-3" id="text-5-3">
<div class="org-center">

<div id="org025bc01" class="figure">
<p><img src="hashset2.png" alt="hashset2.png" style="max-width:100%;" />
</p>
<p><span class="figure-number">Figure 3: </span>Shows the structure of a hash set and the various C data structures (<code>structs</code>) which are involved. Details are discussed in subsequent sections.</p>
</div>
</div>
</div>
</div>



<div id="outline-container-org6a9048c" class="outline-3">
<h3 id="org6a9048c"><span class="section-number-3">5.4</span> Hash Table Data Types</h3>
<div class="outline-text-3" id="text-5-4">
<p>
We will favor <b>separately chained</b> hash sets which have the
following features.
</p>
<ul class="org-ul">
<li>A hash set stores elements (strings) allowing fast lookup based on the
hash code of the element. When a programming environment provides a
"set" data structure, hash tables are frequently the backing data
structure.</li>
<li>The hash set has a 'table' which is a fixed size array. Each array
element is a pointer to a linked list node or <code>NULL</code>.</li>
<li>Elements in the hash table are stored in linked list nodes. Elements that
hash to the same table location are stored in the list at that
location</li>
<li>A <code>hashcode()</code> function is provided which generates an integer from
a string and is the first step to determining where key/value is
located.</li>
<li>The hash set also tracks the ordering that elements are added via
additional pointers. The hash set tracks the first and last elements
added allowing queue-like adds. Each node is part of a list for the
table index it is stored at AND part of the overall list of all
elements added in order.</li>
</ul>

<p>
Examine the header file <code>hashset.h</code> to see the two C structs which will
be used to represent hash tables.
</p>

<div class="org-src-container">
<pre class="src src-c">// Type for linked list nodes in hash set
typedef struct hashnode {
  struct hashnode *table_next;  // pointer to next node at table index of this node, NULL if last node
  struct hashnode *order_next;  // pointer to next node in insert order, NULL if last data added
  char data[128];               // string for the data stored in this node
} hsnode_t;

// Type of hash table
typedef struct {
  int data_count;               // number of data items (elements) in the table
  int table_size;               // how big is the table array
  hsnode_t **table;             // array of "buckets" which contain nodes
  hsnode_t *order_first;        // pointer to the first node that was added
  hsnode_t *order_last;         // pointer to last node that was added
} hashset_t;
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f42246" class="outline-3">
<h3 id="org7f42246"><span class="section-number-3">5.5</span> Provided <code>hash_code()</code> Function</h3>
<div class="outline-text-3" id="text-5-5">
<p>
The code for <code>hash_code()</code> is provided below. All hash tables require
a means of converting elements into a non-unique number. For
consistency, we will use the below code which employs several
interesting C tricks that will be discussed as the course
progresses. Some of the advantages/disadvantages of the hash function
are mentioned in the comments.
</p>

<div class="org-src-container">
<pre class="src src-c">// PROVIDED: Compute a simple hash code for the given character
// string. Uses a "polyomial code" which uses all characters of the
// string to form the hash code. This is the same approach that many
// standard libraries like Java's String.hashcode() function
// use. ADVANTAGE: Gives good distribution for all strings with even
// single character variations having different hash
// codes. DISADVANTAGE: computing the hash code is linear in time on
// the length of the string.
int hashcode(char key[]){
  int hc = 0;
  for(int i=0; key[i]!='\0'; i++){
    hc = hc*31 + key[i];
  }
  return hc;
}

</pre>
</div>
</div>
</div>

<div id="outline-container-org03ba944" class="outline-3">
<h3 id="org03ba944"><span class="section-number-3">5.6</span> <code>hashset_funcs.c</code> Outline</h3>
<div class="outline-text-3" id="text-5-6">
<p>
Standard operations are supported by the hash set.
</p>
<ul class="org-ul">
<li>Adding an element</li>
<li>Determining if an element is contained or not in the set</li>
<li>Clearing the entire hash table</li>
<li>Printing all data in the hash table according to their add order</li>
<li>Printing the internal layout of the hash table</li>
<li>Expanding the memory used by the hash table to improve lookup
performance.</li>
</ul>

<p>
These are broken down into the following C functions which you will
need to implement in <code>hashset_funcs.c</code> except for the first
<code>hashcode()</code> function which is provided.
</p>

<div class="org-src-container">
<pre class="src src-c">// hashset_funcs.c: utility functions for operating on hash sets. Most
// functions are used in the hashset_main.c which provides an
// application to work with the functions.

#include "hashset.h"

// PROVIDED: Compute a simple hash code for the given character
// string. Uses a "polyomial code" which uses all characters of the
// string to form the hash code. This is the same approach that many
// standard libraries like Java's String.hashcode() function
// use. ADVANTAGE: Gives good distribution for all strings with even
// single character variations having different hash
// codes. DISADVANTAGE: computing the hash code is linear in time on
// the length of the string.
int hashcode(char key[]){
  int hc = 0;
  for(int i=0; key[i]!='\0'; i++){
    hc = hc*31 + key[i];
  }
  return hc;
}

void hashset_init(hashset_t *hs, int table_size);
// Initialize the hash set 'hs' to have given size and data_count
// 0. Ensures that the 'table' field is initialized to an array of
// size 'table_size' and is filled with NULLs. Also ensures that the
// first/last pointers are initialized to NULL

int hashset_contains(hashset_t *hs, char data[]);
// Returns 1 if the parameter `data` is in the hash set and 0
// otherwise. Uses hashcode() and field `table_size` to determine
// which index in table to search.  Iterates through the list at that
// table index using strcmp() to check for `data`. NOTE: The
// `hashcode()` function may return positive or negative
// values. Negative values are negated to make them positive. The
// "bucket" (index in hs-&gt;table) for `data` is determined by with
// 'hashcode(key) modulo table_size'.

int hashset_add(hashset_t *hs, char data[]);
// If the data is already present in the hash set, makes no changes
// to the hash set and returns 0. hashset_contains() may be used for
// this. Otherwise determines the bucket to add `data` at via the same
// process as in hashset_contains() and adds it to the FRONT of the
// list at that table index. Adjusts the `hs-&gt;order_last` pointer to
// append the new data to the ordered list of data. If this is the
// first data added, also adjsuts the `hs-&gt;first` pointer. Updates the
// `data_count` field and returns 1 to indicate a successful addition.
//
// NOTE: Adding data at the front of each bucket list allows much
// simplified logic that does not need any looping/iteration.

void hashset_free_fields(hashset_t *hs);
// De-allocates nodes/table for `hs`. Iterates through the ordered
// list of the hash set starting at the `order_first` field and
// de-allocates all nodes in the list. Also free's the `table`
// field. Sets all relevant fields to 0 or NULL as appropriate to
// indicate that the hash set has no more usable space. Does NOT
// attempt to de-allocate the `hs` itself as it may not be
// heap-allocated (e.g. in the stack or a global).

void hashset_show_structure(hashset_t *hs);
// Displays detailed structure of the hash set. Shows stats for the
// hash set as below including the load factor (data count divided
// by table_size) to 4 digits of accuracy.  Then shows each table
// array index ("bucket") on its own line with the linked list of
// data in the bucket on the same line. 
// 
// EXAMPLE:
// data_count: 4
// table_size: 5
// order_first: Rick
// order_last : Tinyrick
// load_factor: 0.8000
// [ 0] : {7738144525137111380 Tinyrick &gt;&gt;NULL} 
// [ 1] : 
// [ 2] : 
// [ 3] : {125779953153363 Summer &gt;&gt;Tinyrick} {1801677138 Rick &gt;&gt;Morty} 
// [ 4] : {521644699469 Morty &gt;&gt;Summer} 
//
// NOTES:
// - Uses format specifier "[%2d] : " to print the table indices
// - Nodes in buckets have the following format:
//   {1415930697 IceT &gt;&gt;Goldenfold}
//    |          |       |        
//    |          |       +-&gt; order_next-&gt;data OR NULL if last node
//    |          +-&gt;`data` string     
//    +-&gt; hashcode("IceT"), print using format "%ld" for 64-bit longs
// 

void hashset_write_data_ordered(hashset_t *hs, FILE *out);
// Outputs all data in the hash set according to the order they
// were added. Starts at the `order_first` field and iterates through
// the list defined there. Each data is printed on its own line
// preceded by its add position with 1 for the first data, 2 for the
// second, etc. Prints output to `FILE *out` which should be an open
// handle. NOTE: the output can be printed to the terminal screen by
// passing in the `stdout` file handle for `out`.

void hashset_save(hashset_t *hs, char *filename);
// Writes the given hash set to the given `filename` so that it can be
// loaded later.  Opens the file and writes its 'table_size' and
// 'data_count' to the file. Then uses the hashset_write_data_ordered()
// function to output all data in the hash set into the file.
// EXAMPLE FILE:
// 
// 5 6
//   1 Rick
//   2 Morty
//   3 Summer
//   4 Jerry
//   5 Beth
//   6 Tinyrick
// 
// First two numbers are the 'table_size' and 'data_count' field and
// remaining text is the output of hashset_write_data_ordered();
// e.g. insertion position and data.

int hashset_load(hashset_t *hs, char *filename);
// Loads a hash set file created with hashset_save(). If the file
// cannot be opened, prints the message
// 
// ERROR: could not open file 'somefile.hs'
//
// and returns 0 without changing anything. Otherwise clears out the
// current hash set `hs`, initializes a new one based on the size
// present in the file, and adds all data from the file into the new
// hash set. Ignores the indices at the start of each line and uses
// hashset_add() to insert data in the order they appear in the
// file. Returns 1 on successful loading (FIXED: previously indicated
// a different return value on success) . This function does no error
// checking of the contents of the file so if they are corrupted, it
// may cause an application to crash or loop infinitely.

int next_prime(int num);
// If 'num' is a prime number, returns 'num'. Otherwise, returns the
// first prime that is larger than 'num'. Uses a simple algorithm to
// calculate primeness: check if any number between 2 and (num/2)
// divide num. If none do, it is prime. If not, tries next odd number
// above num. Loops this approach until a prime number is located and
// returns this. Used to ensure that hash table_size stays prime which
// theoretically distributes data better among the array indices
// of the table.

void hashset_expand(hashset_t *hs);
// Allocates a new, larger area of memory for the `table` field and
// re-adds all current data to it. The size of the new table is
// next_prime(2*table_size+1) which keeps the size prime.  After
// allocating the new table, all table entries are initialized to NULL
// then the old table is iterated through and all data are added to
// the new table according to their hash code. The memory for the old
// table is de-allocated and the new table assigned to the hash set
// fields "table" and "table_size".  This function increases
// "table_size" while keeping "data_count" the same thereby reducing
// the load of the hash table. Ensures that the memory associated with
// the old table is free()'d. Makes NO special effort to preserve old
// nodes: re-adds everything into the new table and then frees the old
// one along with its nodes. Uses functions such as hashset_init(),
// hashset_add(), hashset_free_fields() to accomplish the transfer.

</pre>
</div>
</div>
</div>

<div id="outline-container-org8ce593b" class="outline-3">
<h3 id="org8ce593b"><span class="section-number-3">5.7</span> <code>hashset_main.c</code>: main function / application</h3>
<div class="outline-text-3" id="text-5-7">
<p>
In <code>hashset_main.c</code> implement an interactive program which allows users
to type commands to manipulate the hash set. 
</p>

<p>
The provided <code>Makefile</code> should compile the <code>hashset_main</code> program as follows.
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make hashset_main                   # Compile hash table application
gcc -Wall -Wno-comment -Werror -g  -c hashset_main.c
gcc -Wall -Wno-comment -Werror -g  -c hashset_funcs.c
gcc -Wall -Wno-comment -Werror -g  -o hashset_main hashset_main.o hashset_funcs.o

&gt;&gt; ./hashset_main                      # start application, shows help message with commands
Hashset Application
Commands:
  hashcode &lt;data&gt;  : prints out the numeric hash code for the given key (does not change the hash set)
  contains &lt;data&gt;  : prints FOUND if data is in the set NOT PRESENT otherwise
  add &lt;data&gt;       : inserts the given data into the hash set, reports existing data
  print            : prints all data in the hash set in the order they were addded
  structure        : prints detailed structure of the hash set
  clear            : reinitializes hash set to be empty with default size
  save &lt;file&gt;      : writes the contents of the hash set to the given file
  load &lt;file&gt;      : clears the current hash set and loads the one in the given file
  next_prime &lt;int&gt; : if &lt;int&gt; is prime, prints it, otherwise finds the next prime and prints it
  expand           : expands memory size of hash set to reduce its load factor
  quit             : exit the program
HS&gt; 
</pre>
</div>

<p>
The following sections provide some implementation details.
</p>
</div>

<div id="outline-container-org186d31d" class="outline-4">
<h4 id="org186d31d">Read commands, Execute</h4>
<div class="outline-text-4" id="text-org186d31d">
<p>
The basic flow of <code>hashset_main.c</code> follows the same pattern that code for
a lab exercise demonstrates.  A good way to get started on the main
application is to <b>copy over the lab solution</b> and begin modifying it.
</p>
<ul class="org-ul">
<li>Create a <code>hashset_t</code> variable, likely on the stack as a local variable in
<code>main()</code></li>
<li>Start a loop that terminates when the user exits or there is no more
input</li>
<li>Each time the user enters a string, read it and check for one of the
built-in commands</li>
<li>On identifying the command, potentially read another string if
needed (commands like <code>add</code> and <code>contains</code>)</li>
<li>Call an appropriate <code>hashset_XXX()</code> function to handle the command</li>
</ul>
</div>
</div>

<div id="outline-container-org8b3a973" class="outline-4">
<h4 id="org8b3a973">Supported Commands</h4>
<div class="outline-text-4" id="text-org8b3a973">
<p>
To indicate to users of the program the supported commands, use the
following code to print out the initial option list.
</p>

<div class="org-src-container">
<pre class="src src-c">  printf("Hashset Application\n");
  printf("Commands:\n");
  printf("  hashcode &lt;data&gt;  : prints out the numeric hash code for the given key (does not change the hash set)\n");
  printf("  contains &lt;data&gt;  : prints FOUND if data is in the set NOT PRESENT otherwise\n");
  printf("  add &lt;data&gt;       : inserts the given data into the hash set, reports existing data\n");
  printf("  print            : prints all data in the hash set in the order they were addded\n");
  printf("  structure        : prints detailed structure of the hash set\n");
  printf("  clear            : reinitializes hash set to be empty with default size\n");
  printf("  save &lt;file&gt;      : writes the contents of the hash set to the given file\n");
  printf("  load &lt;file&gt;      : clears the current hash set and loads the one in the given file\n");
  printf("  next_prime &lt;int&gt; : if &lt;int&gt; is prime, prints it, otherwise finds the next prime and prints it\n");
  printf("  expand           : expands memory size of hash set to reduce its load factor\n");
  printf("  quit             : exit the program\n");
</pre>
</div>
</div>
</div>

<div id="outline-container-org6dc2cd2" class="outline-4">
<h4 id="org6dc2cd2">Clearing Hash Table</h4>
<div class="outline-text-4" id="text-org6dc2cd2">
<p>
When issuing the <code>clear</code> command, the contents of the current hash set
should be eliminated and the hash set reinitialized to the default
size. This is most easily done via.
</p>
<ol class="org-ol">
<li>Using the <code>hashset_free_fields()</code> function</li>
<li>Using <code>hashset_init()</code> with the <code>HASHSET_DEFAULT_TABLE_SIZE</code>
constant defined in <code>hashset.h</code>.</li>
</ol>
</div>
</div>

<div id="outline-container-org2189e7f" class="outline-4">
<h4 id="org2189e7f"><a id="org7e09d42"></a> Paths to Files for Saving and Loading</h4>
<div class="outline-text-4" id="text-org2189e7f">
<p>
Saving and loading data involves writing to files. The names
associated with the files must be specified as a <i>path</i> so that if
files are to be saved or loaded from subdirectories, include this
as part of the path.  For example, the <code>rm.hashset</code> file is
provided in the <code>data/</code> directory and once loading functionality is
code, it can be loaded as follows.
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; ./hashset_main
...
HS&gt; load data/rm.hashset       # load existing hashset save file
HS&gt; print
  1 Rick
  2 Morty
  3 Summer
  4 Jerry
  5 Beth
  6 Tinyrick

HS&gt; structure                  # show structure
elem_count: 6
table_size: 5
order_first: Rick
order_last : Tinyrick
load_factor: 1.2000
[ 0] : 
[ 1] : {-1964728321 Tinyrick &gt;&gt;NULL} 
[ 2] : {2066967 Beth &gt;&gt;Tinyrick} 
[ 3] : {-1807340593 Summer &gt;&gt;Jerry} {2546943 Rick &gt;&gt;Morty} 
[ 4] : {71462654 Jerry &gt;&gt;Beth} {74531189 Morty &gt;&gt;Summer} 

HS&gt; expand                     # expand
HS&gt; add Birdperson             # add new items
HS&gt; add Goldenfold

HS&gt; save cur.hashset           # save to file in current directory

HS&gt; clear                      # empty hash table
HS&gt; print                      # show emptiness

HS&gt; load cur.hashset           # reload
HS&gt; print                      # items restored
  1 Rick
  2 Morty
  3 Summer
  4 Jerry
  5 Beth
  6 Tinyrick
  7 Birdperson
  8 Goldenfold
HS&gt; save data/new.hashset      # create another save file in data/ dir
</pre>
</div>
</div>
</div>

<div id="outline-container-org3130799" class="outline-4">
<h4 id="org3130799">Failing to Load Files</h4>
<div class="outline-text-4" id="text-org3130799">
<p>
If a file cannot be opened with the <code>load 'file.hm'</code> command, the
underlying <code>hashset_load()</code> should print an error of the form
</p>
<div class="org-src-container">
<pre class="src src-text">ERROR: could not open file 'somefile.hm'
</pre>
</div>
<p>
and the <code>hash_main.c</code> main loop should NOT change the hash set and
print the message
</p>
<div class="org-src-container">
<pre class="src src-text">load failed
</pre>
</div>
<p>
in response to the error. Below is a demonstration of this from the
automated tests.
</p>
<div class="org-src-container">
<pre class="src src-sh">...
HS&gt; print                      # current contents of set
  1 Rick
  2 Morty
  3 Summer
  4 Jerry
  5 Beth
  6 Tinyrick
  7 Birdperson
  8 Goldenfold

HS&gt; load notthere.hashset      # attempt to load file that doesn't exit
ERROR: could not open file 'notthere.hashset'
load failed

HS&gt; print                      # failed load does not modify current set
  1 Rick
  2 Morty
  3 Summer
  4 Jerry
  5 Beth
  6 Tinyrick
  7 Birdperson
  8 Goldenfold
HS&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-org8628b6b" class="outline-4">
<h4 id="org8628b6b">Command Echoing: <code>-echo</code> option to <code>hashset_main</code></h4>
<div class="outline-text-4" id="text-org8628b6b">
<p>
Some users may wish to "script" this the main program: allow it to
process input commands from a file rather than from the user typing.
This notion is discussed in a lab and should be reviewed if it is
unfamiliar.
</p>

<p>
An example of an input script is in <code>data/hashset_demo.script</code> which
looks like a lot of user commands:
</p>
<div class="org-src-container">
<pre class="src src-text">print
structure
add Rick
add Morty
print
structure
add Summer
add Jerry
add Beth
add Tinyrick
print
structure
contains Jerry
contains Rick
contains Unity
contains President
save rm.hashset
clear
print
structure
add Birdperson
add Squanchy
structure
load rm.hashset
structure
expand
print
structure
add Birdperson
add Squanchy
add Picklerick
structure
expand
structure
bye
</pre>
</div>

<p>
The file can be fed directly to the program without needing type it
using Unix pipes as per the following:
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; cat data/hashset_demo.script | ./hashset_main -echo
</pre>
</div>
<p>
Notice the use of a command line argument for <code>hashset_main</code>: the
<code>-echo</code> option. This is a REQUIRED feature which prints commands typed
by users to the screen. To implement this, do the following.
</p>

<p>
Model the structure of command echoing after what is shown in related
Lab work.
</p>
<ul class="org-ul">
<li>Use a variable in <code>main()</code> to indicate whether command echoing is on
or off; set it to off by default</li>
<li><p>
Check when <code>main()</code> starts  whether command line argument 1 is set
to <code>-echo</code> in which case turn echoing on. A condition like the
following is useful.
</p>
<div class="org-src-container">
<pre class="src src-c">  if(argc &gt; 1 &amp;&amp; strcmp("-echo",argv[1])==0) {
</pre>
</div></li>
<li>Each command should check for echoing and print the command being
run along with any arguments to it. This technique is demonstrated
in related lab work.</li>
</ul>

<p>
It will take some work to get the exact placement of echoes correct
but will ultimately lead to nice results that involve LITTLE typing
like the example below.
</p>

<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; cat hashset_demo.script | hashset_main -echo 
Hashset Application
Commands:
  hashcode &lt;data&gt;  : prints out the numeric hash code for the given key (does not change the hash set)
  contains &lt;data&gt;  : prints FOUND if data is in the set NOT PRESENT otherwise
  add &lt;data&gt;       : inserts the given data into the hash set, reports existing data
  print            : prints all data in the hash set in the order they were addded
  structure        : prints detailed structure of the hash set
  clear            : reinitializes hash set to be empty with default size
  save &lt;file&gt;      : writes the contents of the hash set to the given file
  load &lt;file&gt;      : clears the current hash set and loads the one in the given file
  next_prime &lt;int&gt; : if &lt;int&gt; is prime, prints it, otherwise finds the next prime and prints it
  expand           : expands memory size of hash set to reduce its load factor
  quit             : exit the program
HS&gt; print

HS&gt; structure
data_count: 0
table_size: 5
order_first: NULL
order_last : NULL
load_factor: 0.0000
[ 0] : 
[ 1] : 
[ 2] : 
[ 3] : 
[ 4] : 

HS&gt; add Rick
HS&gt; add Morty
HS&gt; print
  1 Rick
  2 Morty
...
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9c076dd" class="outline-3 grading 40">
<h3 id="org9c076dd"><span class="section-number-3">5.8</span> Grading Criteria for Problem 3&#xa0;&#xa0;&#xa0;<span class="tag"><span class="grading">grading</span>&#xa0;<span class="40">40</span></span></h3>
<div class="outline-text-3" id="text-5-8">
<p>
The following criteria will be checked in this problem.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Weight</th>
<th scope="col" class="org-left">Criteria</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">AUTOMATED TESTS via <code>make test-prob3</code></td>
</tr>

<tr>
<td class="org-right">20</td>
<td class="org-left"><code>test_hashset.org</code> tests</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">20 tests for <code>hashset_main</code> executable, exercises functions in <code>hashset_funcs.c</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">All tests run under Valgrind</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">1 point per test passed</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Code compiles without warnings (<code>make clean</code> followed by <code>make test-prob3</code> gives no errors/warnings)</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">NOTE: run individual tests via <code>make test-prob3 testnum=4</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">MANUAL INSPECTION</td>
</tr>

<tr>
<td class="org-right">15</td>
<td class="org-left"><code>hashset_funcs.c</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear commenting indicating intent during functions "calculate table index" or "iterate through list"</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Relatively short functions: nothing needs to be too long (50 lines tops)</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clearly written iteration loops to traverse linked lists in hash table functions</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of <code>strcmp()</code> to check data during <code>hashset_contains()</code> operation</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of <code>hashset_contains()</code> during <code>hashset_add()</code> to check for duplicates</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Concise and commented code for <code>hashset_add()</code> which calculates table index and inserts new node at the front the list via <code>table_next</code> pointers</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Maintains the <code>order_first/order_last</code> fields during add operation</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>hashset_free_fields()</code> frees all list nodes and the table array, assigns 0/NULL to all fields</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Uses the ordered list of data to easily free all nodes during <code>hashset_free_fields()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>hashset_save()</code> makes use of <code>hashset_write()</code> with an open file handle to avoid redundant code</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>hashset_load()</code> checks that files open successfully before using <code>hashset_free_fields()</code> to de-allocate memory</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">File closed after finished during saving and loading</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>next_prime()</code> is clearly written and easy to follow; follows the algorithm described in the function documentation</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>hashset_expand()</code> uses other functions in such as <code>next_prime()</code>, <code>hashset_add()</code> and <code>hashset_free_fields()</code> to avoid repeating code.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left"><code>hashset_main.c</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Comments indicating what high-level command is being implemented in each part of <code>main</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear structure of main loop, reading commands, selecting actions</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of string functions to identify which command to execute</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear efforts to honor <code>-echo</code> option and echo commands</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear effort to free all memory prior to exit by clearing hashset on exit</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org0dae1a8" class="outline-2">
<h2 id="org0dae1a8"><span class="section-number-2">6</span> Project Submission</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orgfff87f1" class="outline-3">
<h3 id="orgfff87f1"><span class="section-number-3">6.1</span> <a id="org9cee4cc"></a> Submit to Gradescope</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Refer to the Project 1 instructions and adapt them for details of how
to submit to Gradescope. In summary they are
</p>

<ol class="org-ol">
<li>Type <code>make zip</code> in the project directory to create <code>p2-complete.zip</code></li>
<li>Log into <a href="https://www.gradescope.com/">Gradescope</a>, select Project 2, and upload <code>p2-complete.zip</code></li>
</ol>
</div>
</div>

<div id="outline-container-org6866a1a" class="outline-3">
<h3 id="org6866a1a"><span class="section-number-3">6.2</span> Late Policies</h3>
<div class="outline-text-3" id="text-6-2">
<p>
You may wish to review the policy on late project submission which
will cost 1 Engagement Point per day late. <b>No projects will be
accepted more than 48 hours after the deadline.</b>
</p>


<p>
<a href="https://www.cs.umd.edu/~profk/216/syllabus.html#late-submission">https://www.cs.umd.edu/~profk/216/syllabus.html#late-submission</a>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr/> <i> <a href="https://www.umd.edu/web-accessibility" title="UMD Web Accessibility">Web Accessibility</a> <br/> Author: Chris Kauffman (<a href="mailto:profk@umd.edu">profk@umd.edu</a>) <br/> Date: 2025-02-24 Mon 15:13 <br/> </i>
</div>
</body>
</html>
