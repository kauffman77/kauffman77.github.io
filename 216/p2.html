<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-03-04 Mon 10:54 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CMSC216 Project 2: Bit Ops, Debugging, Data Structures</title>
<meta name="author" content="Chris Kauffman" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<meta name="viewport" content="width=device-width, maximum-scale=1, minimum-scale=1" />
<style type="text/css">
@media screen {
:root {
--heading-bg-color:#e21833;
--heading-fg-color:#ffd200;
}
html {
font-family: serif;
text-align: justify;
}
pre.src, pre.example {
overflow-x: scroll;
}
/* Merge subtitle area with title area */
.subtitle {
text-align: center;
margin-top: -2em;
padding-top: 1em;
padding-bottom: 0.1em;
}
.title, .subtitle {
color: var(--heading-fg-color);
background-color: var(--heading-bg-color);
}
/* Section borders, left section header style */
div.outline-2, #table-of-contents {
background-color: rgb(250,250,250);
border: 0.75em solid var(--heading-bg-color);
border-top: 0em;
padding: 0em .5em .5em .5em; /* top right bottom left */
margin: 1em 0em 1em 0em; /* top right bottom left */
}
div.outline-2 > h2, #table-of-contents > h2 {
background-color: var(--heading-bg-color);
color: var(--heading-fg-color);
font-variant: small-caps;
padding: 0em 0em 0em .5em; /* top right bottom left */
margin: 0em -.5em 0em -.75em; /* top right bottom left */
text-align: left;
}
blockquote {
font-style: italic;
}
td, th {
padding-top: 2px;
padding-bottom: 2px;
}
body {
background-color: #EEE;
}
pre {
}
#content, #preamble, #postamble {
margin-left:300px;
max-width: 100%;
}
.tag {
background-color: inherit; font-family: inherit;
padding: inherit; font-size: 80%; font-weight: inherit;
text-transform: uppercase;
}

.figure p { text-align: inherit; }
figure-number { font-style: italic; }
#table-of-contents {
text-align: left;
position: fixed;
left: 0;
margin: 0 auto;
padding: 0;
width: 300px;
top: 0;
height: 100%;
border: 0;
display: block;
}
#text-table-of-contents {
overflow-y: scroll;
height: 100%;
}
#text-table-of-contents ul {
padding-left: 1em;
margin-left: 0.5em;
}
#table-of-contents > h2 {
padding: 0.1em;
margin: 0;
}
/* adjustments for small screen, toc at top only */
@media (max-width: 800px) { /* landscape for iphone */
html {
-webkit-text-size-adjust: none;  /* prevent scaling of text on mobile */
}
body {
background-color: #EEE;
width:100%;
margin:0 auto;
}
#content, #preamble, #postamble {
margin-left:0;
}
#table-of-contents {
position: static;
left: inherit;
width:inherit;
height: auto;
border-top: 0em;
padding: 0em .5em .5em .5em; /* top right bottom left */
margin: 1em 0em 1em 0em; /* top right bottom left */
border: 0.75em solid #006633;
}
div.outline-2, #table-of-contents {
background-color: rgb(250,250,250);
border: 0.75em solid var(--heading-bg-color);
border-top: 0em;
padding: 0em .5em .5em .5em; /* top right bottom left */
margin: 1em 0em 1em 0em; /* top right bottom left */
}
div.outline-2 > h2, #table-of-contents > h2 {
background-color: var(--heading-bg-color);
color: var(--heading-fg-color);
font-variant: small-caps;
padding: 0em 0em 0em .5em; /* top right bottom left */
margin: 0em -.5em 0em -.75em; /* top right bottom left */
text-align: left;
}
#text-table-of-contents {
overflow-y: visible;
height: inherit;
}
#text-table-of-contents ul {
padding-left: 1em;
margin-left: 0.5em;
}
}
.linenr { font-size: xx-small; }
}

@media print {
html {
font-family: serif;
font-size: 10pt;
text-align: justify;
.linenr { font-size: xx-small; }
}
}
</style>
<style>
/* Theme: Srcery
Description: Srcery dark color scheme for highlight.js
Author: Chen Bin <chen.bin@gmail.com>
Maintainer: @redguardtoo
Website: https://srcery-colors.github.io/
Date: 2021-04-13
https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/srcery.css

Tailored by: Chris Kauffman <profk@umd.edu>
Date: Sat Nov 25 06:16:20 PM EST 2023
*/
pre code.hljs {
display: block;
overflow-x: auto;
padding: 1em
}
code.hljs {
padding: 3px 5px
}
.hljs {
background: #1C1B19;
/* Black */
color: #FFFFFF/* Bright White */

}
/* Bright White */
.hljs-subst,
.hljs-quote,
.hljs-literal {
color: #FCE8C3
}
/* Bright Blue */
.hljs-type,
.hljs-symbol {
color: #68A8E4
}
/* Red */
.hljs-keyword,
.hljs-deletion {
color: #EF2F27
}
/* Yellow */
.hljs-name,
.hljs-function,
.hljs-attribute,
.hljs-selector-attr,
.hljs-selector-id,
.hljs-selector-class,
.hljs-selector-pseudo,
.hljs-section,
.hljs-title {
color: #FBB829
}
/* Cyan */
.hljs-code,
.hljs-variable,
.hljs-property,
.hljs-template-variable,
.hljs-class {
color: #0AAEB3
}
/* Bright Green */
.hljs-string,
.hljs-regexp,
.hljs-bullet,
.hljs-addition {
color: #98BC37
}
/* Bright Magenta */
.hljs-built_in,
.hljs-params {
color: #FF5C8F
}
/* Blue */
.hljs-template-tag,
.hljs-selector-tag {
color: #2C78BF
}
/* Bright Black */
.hljs-link,
.hljs-number,
.hljs-comment,
.hljs-meta {
color: #B1B195
/* color: #918175 */
}
.hljs-emphasis {
font-style: italic
}
.hljs-strong {
font-weight: bold
}
/* @see https://github.com/srcery-colors/srcery-emacs for reference */
</style>

<link rel="stylesheet" href="./srcery-ck.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', (event) => {
function interactive_lang() {      // define a custom "interactive" language
return {
name: 'interactive',           // language name
keywords: {
$pattern: /[^ \t\n]+/,       // lex based on non-whitespace
keyword: [">>","(shellac)","homeputer>","grace10:","HM>"], // allowed interactive prompts
},
contains: [
// hljs.HASH_COMMENT_MODE,   // use standard hash comments, any # is a comment
hljs.COMMENT(/#+ /, /$/),    // use custom comment of # w/ whitespace
]
};
};
hljs.registerLanguage('interactive', interactive_lang);     // register custom language

// Add highlighjs CSS classes to elemens marked with relevant org classes
lang_map = new Map();              // map of org to hljs languages
lang_map.set("src-c"    , "language-c");
lang_map.set("src-text" , "language-plaintext");
lang_map.set("src-sh"   , "language-interactive");
function add_class(el) {           // applied to each pre.src element
for (let [org_lang, hljs_lang] of lang_map) {
if(el.classList.contains(org_lang)){
el.classList.add(hljs_lang);
}
}
}
// visit all pre.src elements and apply function to add language class
document.querySelectorAll('pre.src').forEach(add_class);
hljs.configure({cssSelector: 'pre'}); // select pre blocks only to highligh
hljs.highlightAll();                  // perform highlighting on all pre blocks
});
</script>
</head>
<body>
<div id="preamble" class="status">
<i>Last Updated: 2024-03-04 Mon 10:54</i>
</div>
<div id="content" class="content">
<h1 class="title">CMSC216 Project 2: Bit Ops, Debugging, Data Structures</h1>
<ul class="org-ul">
<li><b>Due: 11:59pm Fri 08-Mar-2024</b></li>
<li><i>Approximately 4.0% of total grade</i></li>
<li>Submit to <a href="https://www.gradescope.com/"><b>Gradescope</b></a></li>
<li>Projects are <b>individual work</b>: no collaboration with other students
is allowed. Seek help from course staff if you get stuck for too long.</li>
</ul>

<div id="outline-container-org6cc18af" class="outline-4">
<h4 id="org6cc18af">CODE/TEST DISTRIBUTION: <a href="p2-code.zip">p2-code.zip</a></h4>
</div>

<div id="outline-container-orgac25e62" class="outline-4">
<h4 id="orgac25e62">VIDEO OVERVIEW: <a href="https://youtu.be/qXFjuf9Tpv4">https://youtu.be/qXFjuf9Tpv4</a></h4>
</div>
<div id="outline-container-org37fce06" class="outline-4">
<h4 id="org37fce06">CHANGELOG:</h4>
<div class="outline-text-4" id="text-org37fce06">
<dl class="org-dl">
<dt>Mon Mar  4 10:52:35 AM EST 2024</dt><dd>Several students have asked about
the file <code>hashmap_demo_init.c</code> which was mistakenly left out of
<code>p2-code.zip</code>.  This is not a required file but was meant to
demonstrate some syntax associated with Problem 3.  Students may
download the file directly here: <a href="hashmap_demo_init.c">hashmap_demo_init.c</a> or
retrieve it from the now updated <code>p2-code.zip</code> codepack.</dd>

<dt>Fri Mar  1 01:15:21 PM EST 2024</dt><dd>Gradescope submission is now open
for Project 2.</dd>

<dt>Thu Feb 29 04:27:43 PM EST 2024</dt><dd>Minor language tweaks in Manual
Inspection Criteria for <code>thermo_update()</code> to clarify use of global
variables.</dd>

<dt>Wed Feb 28 04:50:43 PM EST 2024</dt><dd><p>
<a href="https://piazza.com/class/lrqszzrlvo46gm/post/181">Post 181</a> identified a bug in
problem 1 where the <code>main()</code> function in <code>thermo_main.c</code> prints out
inaccurate information (mixes up Celsius and Fahrenheit). While
cosmetic, we'll correct this bug now by replacing the following two
provide files with updated versions.
</p>
<ul class="org-ul">
<li><a href="test_thermo_update.org">test_thermo_update.org</a></li>
<li><a href="thermo_main.c">thermo_main.c</a></li>
</ul>
<p>
Download these two files and replace the existing versions with
these updated versions.  The current codepack contains the updated
versions so those who are just downloading now will not need to
update the files.
</p></dd>

<dt>Wed Feb 28 03:41:51 PM EST 2024</dt><dd><p>
A video overview of the project
has now been posted here: <a href="https://youtu.be/qXFjuf9Tpv4">https://youtu.be/qXFjuf9Tpv4</a>
</p>

<p>
Some minor flaws in the <code>hashmap.h</code> and <code>Makefile</code> have been
corrected that affect problem 3 along with typos fixed in the
Project specification.  You may wish to update those files but it is
not strictly necessary.
</p></dd>
</dl>
</div>
</div>

<div id="outline-container-orgb24ba54" class="outline-4">
<h4 id="orgb24ba54"></h4>
<div class="outline-text-4" id="text-orgb24ba54">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org8183d92">1. Introduction</a></li>
<li><a href="#org1bafcff">2. Download Code and Setup</a></li>
<li><a href="#org07ec452">3. <b>Problem 1</b>: Thermometer Simulation</a>
<ul>
<li><a href="#orgc9a059e">3.1. Overview</a></li>
<li><a href="#org7972b15">3.2. Diagrams of Display</a></li>
<li><a href="#org820b2b2">3.3. <code>thermo_update.c</code>: Updating the Display with User Code</a></li>
<li><a href="#org4759d73">3.4. <code>set_temp_from_ports()</code></a></li>
<li><a href="#org4bccaa9">3.5. <code>set_display_from_temp()</code></a></li>
<li><a href="#orgc6c507f">3.6. <code>thermo_update()</code></a></li>
<li><a href="#org84cca9e">3.7. Thermometer Simulator</a></li>
<li><a href="#org387a66c">3.8. Sample Runs of <code>thermo_main</code></a></li>
<li><a href="#orgebcbe5a">3.9. Grading Criteria for <code>thermo_update.c</code></a></li>
</ul>
</li>
<li><a href="#org018e18b">4. <b>Problem 2</b>: Debugging the Puzzlebox</a>
<ul>
<li><a href="#orgdba1e70">4.1. Overview</a></li>
<li><a href="#org405f724">4.2. <code>input.txt</code> Input File</a></li>
<li><a href="#orgd00bf16">4.3. <code>gdb</code> The GNU Debugger</a></li>
<li><a href="#orga933ee3">4.4. Typical Cycle</a></li>
<li><a href="#orgfd879cf">4.5. Kinds of Puzzles</a></li>
<li><a href="#org0b6c363">4.6. Tests for <code>puzzlebox.c</code></a></li>
</ul>
</li>
<li><a href="#org1655437">5. <b>Problem 3</b>: Hash Map in C</a>
<ul>
<li><a href="#orgc291b9f">5.1. Overview</a></li>
<li><a href="#org1405c0f">5.2. <code>hashmap_main</code> Demonstration</a></li>
<li><a href="#orgb586e33">5.3. <code>hashmap_funcs.c</code>: Hash Table Functions</a></li>
<li><a href="#org2bdeb5e">5.4. Provided <code>hash_code()</code> Function</a></li>
<li><a href="#org448e000">5.5. <code>hashmap_main.c</code>: main function / application</a></li>
<li><a href="#org8326d82">5.6. Grading Criteria for P3</a></li>
</ul>
</li>
<li><a href="#org7ff0f38">6. Assignment Submission</a>
<ul>
<li><a href="#org0d03cfc">6.1. Submit to Gradescope</a></li>
<li><a href="#org13ba995">6.2. Late Policies</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org8183d92" class="outline-2">
<h2 id="org8183d92"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
This project addresses more advanced C programming topics each in its
own problem.
</p>

<ol class="org-ol">
<li><b>Bit-level operations</b> are common in C and systems programming.  This
assignment features a problem in which shifting and bitwise AND/OR-ing
are required to complete the requirements.</li>

<li>Debugging is also a critical skill enabled by the <b>debugger</b>. The
second problem in the assignment makes use of the GNU Debugger, <code>gdb</code>,
to work through a puzzle program requiring specific inputs to pass its
"phases".</li>

<li>Data structures pervade computing and getting some practice with
them in C will improve one's skill at pointers and memory usage
while also giving a great appreciation for garbage collected
languages.  A basic "map" application which maps keys to values is
implemented that is backed by a hash table.</li>
</ol>
</div>

<div id="outline-container-orgf8e52b8" class="outline-4">
<h4 id="orgf8e52b8">Difficulty Note</h4>
<div class="outline-text-4" id="text-orgf8e52b8">
<p>
Past students have found this content to be <b>more challenging than
Project 1.</b>
</p>

<p>
If you were pressed for time to finish Project 1, start this project
<b>as early as possible</b>.  Most students have found the first two
problems (bit manipulations and debugging) only mildly challenging but
run out of time on the larger third problem.
</p>
<div class="org-center">
<p>
<b>You have been warned.</b>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org1bafcff" class="outline-2">
<h2 id="org1bafcff"><span class="section-number-2">2</span> <a id="org54a38f9"></a> Download Code and Setup</h2>
<div class="outline-text-2" id="text-2">
<p>
Download the code pack linked at the top of the page. Unzip this which
will create a project folder. Create new files in this
folder. Ultimately you will re-zip this folder to submit it.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">File</th>
<th scope="col" class="org-left">State</th>
<th scope="col" class="org-left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>thermo.h</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 1 header file</td>
</tr>

<tr>
<td class="org-left"><code>thermo_main.c</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 1 main() function for thermometer simulation</td>
</tr>

<tr>
<td class="org-left"><code>thermo_update.c</code></td>
<td class="org-left">CREATE</td>
<td class="org-left">Create this file and write required function in it to complete Problem 1</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>thermo_examples.sh</code></td>
<td class="org-left">Sample</td>
<td class="org-left">Prints a variety of sample runs of <code>thermo_main</code></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>test_thermo_update.c</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Problem 1 functions tests for <code>thermo_upate.c</code></td>
</tr>

<tr>
<td class="org-left"><code>test_thermo_update.org</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Problem 1 testing data file</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>puzzlebox.c</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 2 Debugging problem</td>
</tr>

<tr>
<td class="org-left"><code>input.txt</code></td>
<td class="org-left">EDIT</td>
<td class="org-left">Problem 2 Input for <code>puzzlebox</code>, fill this in</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>hashmap_funcs.c</code></td>
<td class="org-left">CREATE</td>
<td class="org-left">Problem 3 functions to write</td>
</tr>

<tr>
<td class="org-left"><code>hashmap_main.c</code></td>
<td class="org-left">CREATE</td>
<td class="org-left">Problem 3 main function to write</td>
</tr>

<tr>
<td class="org-left"><code>hashmap.h</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 3 header file</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>data/hash-demo.script</code></td>
<td class="org-left">Data</td>
<td class="org-left">Problem 3 sample input script to main program</td>
</tr>

<tr>
<td class="org-left"><code>data/stranger.hm</code></td>
<td class="org-left">Data</td>
<td class="org-left">Problem 3 sample hash map saved to file</td>
</tr>

<tr>
<td class="org-left"><code>data/other.script</code></td>
<td class="org-left">Data</td>
<td class="org-left">Problem 3 sample input script to main program</td>
</tr>

<tr>
<td class="org-left"><code>data/other.hm</code></td>
<td class="org-left">Data</td>
<td class="org-left">Problem 3 sample hash map saved to file</td>
</tr>

<tr>
<td class="org-left"><code>data/big.script</code></td>
<td class="org-left">Data</td>
<td class="org-left">Problem 3 sample input script to main program</td>
</tr>

<tr>
<td class="org-left"><code>data/big.hm</code></td>
<td class="org-left">Data</td>
<td class="org-left">Problem 3 sample hash map saved to file</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>test_hashmap.org</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Problem 3 tests</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>Makefile</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Build file to compile all programs</td>
</tr>

<tr>
<td class="org-left"><code>testy</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Test running script</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org1057a79" class="outline-4">
<h4 id="org1057a79">Makefile</h4>
<div class="outline-text-4" id="text-org1057a79">
<p>
As in the first assignment, a <code>Makefile</code> is provided as part of this
project. The essential targets pertinent to each problem are described
in those sections. The <code>Makefile</code> is equipped with a brief help
listing:
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make help
Typical usage is:
  &gt; make                          # build all programs
  &gt; make clean                    # remove all compiled items
  &gt; make zip                      # create a zip file for submission
  &gt; make prob1                    # built targets associated with problem 1
  &gt; make test-prob1 testnum=5     # run problem 1 test #5 only
  &gt; make test-prob2               # run test for problem 2
  &gt; make test                     # run all tests
</pre>
</div>
</div>
</div>


<div id="outline-container-orgc7645d3" class="outline-4">
<h4 id="orgc7645d3">Automated Tests</h4>
<div class="outline-text-4" id="text-orgc7645d3">
<p>
As in previous assignments, automated tests are provided and
associated with problems. Each problem describes how to run tests
associated with it. Generally this is done as before:
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make test-prob1
gcc -Wall -Wno-comment -Werror -g  -c batt_main.c
gcc -Wall -Wno-comment -Werror -g  -c batt_update.c
...
./testy test_bat_update.org 
============================================================
== test_prob1.org : Problem 1 test_batt_update and batt_main tests
== Running 35 / 35 tests
1)  set_batt_from_ports() 0 V            : ok
2)  set_batt_from_ports() 0 P            : ok
3)  set_batt_from_ports() 7400 V         : ok
4)  set_batt_from_ports() 7400 P         : ok
5)  set_batt_from_ports() mixed STATUS V : ok
...

&gt;&gt; make test-prob2         # run "tests" associated with problem 2
... 
&gt;&gt; ./puzzlebox input.txt   # same as above: run puzzlebox to test answers
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org07ec452" class="outline-2">
<h2 id="org07ec452"><span class="section-number-2">3</span> <b>Problem 1</b>: Thermometer Simulation</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgc9a059e" class="outline-3">
<h3 id="orgc9a059e"><span class="section-number-3">3.1</span> Overview</h3>
<div class="outline-text-3" id="text-3-1">
<p>
You are tasked with writing code which will be run by a
microcontroller in a digital thermometer.  The hardware has the
following relevant features.
</p>
<ul class="org-ul">
<li>A temperature sensor whose value can be accessed via a memory mapped
port. In C this is presented as a global variable. Another port
indicates whether the temperature should be displayed in Celsius or
Fahrenheit.</li>
<li>A digital with a port control port; setting certain global variable will
change the temperature display with</li>
<li>User code that you will need to write to update the display based on
the temperature sensor.</li>
<li>A simulator program with <code>Makefile</code> to test your code</li>
</ul>

<p>
<b>All of the code for this problem will be written in the file
<code>thermo_update.c</code> which you will create.</b> Each feature of the
simulated hardware and how it relates to the functions that you will
write in <code>thermo_update.c</code> are discussed in subsequent sections.
</p>
</div>

<div id="outline-container-orgd6ecfb6" class="outline-4">
<h4 id="orgd6ecfb6">Temperature Sensor</h4>
<div class="outline-text-4" id="text-orgd6ecfb6">
<p>
A temperature sensor is attached to the thermometer and can be
accessed via a C global variable. This is declared in the <code>thermo.h</code>
header file as follows.
</p>
<div class="org-src-container">
<pre class="src src-c">extern short THERMO_SENSOR_PORT;
// Set by the sensor to indicate temperature. Value is a positive int
// in units of 0.1 / 32 deg C above -45.0 deg C with a max of +45.0
// deg C. Above the max, the sensor becomes unreliable and below 0
// indicates the senor is failing.
</pre>
</div>
<p>
You do not need to define this variable as it is already there. You do
not need to set this variable as it is automatically changed by the
hardware.  Instead, you will need to access its value to determine
various aspects of the temperature. Note the type which is <code>short</code>:
positive and negatives values are present in it and the variable will
have 16 bits.  The temperature sensor has a limited range and uses
units of 1/32 of a tenth degree above -45.0 deg C.  This leads to
the following equivalences.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Sensor</th>
<th scope="col" class="org-right">Celsius</th>
<th scope="col" class="org-left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">0</td>
<td class="org-right">-45.0</td>
<td class="org-left">Minimum valid sensor value / measurable temp</td>
</tr>

<tr>
<td class="org-right">15</td>
<td class="org-right">-45.0</td>
<td class="org-left">Remainder rounded down</td>
</tr>

<tr>
<td class="org-right">16</td>
<td class="org-right">-44.9</td>
<td class="org-left">Remainder rounded up</td>
</tr>

<tr>
<td class="org-right">32</td>
<td class="org-right">-44.9</td>
<td class="org-left">Exactly one tenth degree above -45.0 deg C</td>
</tr>

<tr>
<td class="org-right">64</td>
<td class="org-right">-44.8</td>
<td class="org-left">Exactly two tenths degree above -45.0 deg C</td>
</tr>

<tr>
<td class="org-right">320</td>
<td class="org-right">-44.0</td>
<td class="org-left">Exactly ten tenths = one degree above -45.0 deg C</td>
</tr>

<tr>
<td class="org-right">3200</td>
<td class="org-right">-35.0</td>
<td class="org-left">Ten degrees above -45.0 C</td>
</tr>

<tr>
<td class="org-right">14080</td>
<td class="org-right">-1.0</td>
<td class="org-left">44.0 degrees above -45.0</td>
</tr>

<tr>
<td class="org-right">14240</td>
<td class="org-right">-0.5</td>
<td class="org-left">44.5 degrees above -45.0</td>
</tr>

<tr>
<td class="org-right">14400</td>
<td class="org-right">0.0</td>
<td class="org-left">45.0 degrees above -45.0</td>
</tr>

<tr>
<td class="org-right">14432</td>
<td class="org-right">0.1</td>
<td class="org-left">45.1 degrees above -45.0</td>
</tr>

<tr>
<td class="org-right">17600</td>
<td class="org-right">10.0</td>
<td class="org-left">degrees above -45.0</td>
</tr>

<tr>
<td class="org-right">28800</td>
<td class="org-right">45.0</td>
<td class="org-left">90.0 degrees above -450.0, MAXIMUM measurable temp</td>
</tr>

<tr>
<td class="org-right">28801</td>
<td class="org-right">ERR</td>
<td class="org-left">Error: sensor out of range</td>
</tr>

<tr>
<td class="org-right">29742</td>
<td class="org-right">ERR</td>
<td class="org-left">Error: sensor out of range</td>
</tr>

<tr>
<td class="org-right">-5</td>
<td class="org-right">ERR</td>
<td class="org-left">Error: sensor malfunction</td>
</tr>

<tr>
<td class="org-right">-1245</td>
<td class="org-right">ERR</td>
<td class="org-left">Error: sensor malfunction</td>
</tr>
</tbody>
</table>

<p>
Notice 32 units of value in the sensor are 0.1 degree Celsius starting
from -45.0 deg C.  The maximum value allowable is 45.0 deg Celsius
which is a sensor value of 28800.
</p>

<p>
Notice also that the temperature should be <b>rounded</b> appropriately: 
</p>
<ul class="org-ul">
<li>The temperature sensor is 1/32 of a tenth degree</li>
<li>A sensor value of 7 rounds down to -45.0 deg C</li>
<li>A sensor value of 15 rounds down to -45.0 deg C</li>
<li>A sensor value of 16 rounds up to -44.9 deg C</li>
<li>A sensor value of 30 rounds up to -44.9 deg C</li>
</ul>
</div>
</div>

<div id="outline-container-org491f078" class="outline-4">
<h4 id="org491f078">Temperature Display Mode</h4>
<div class="outline-text-4" id="text-org491f078">
<p>
Another global variable exposes whether the user has pressed a button
which toggles between displaying temperature in the two most common
scales: Celsius or Fahrenheit. It also exposes whether there are
internal hardware problems in which case the display should show an
error. 
</p>
<div class="org-src-container">
<pre class="src src-c">extern unsigned char THERMO_STATUS_PORT;
// Bit 5 indicates whether display should be in Celsius (0) or
// Fahrenheit (1). This bit is toggled using a button on the
// thermometer but is set using command line args in the simulator.
// 
// Bit 2 is 0 for normal operation or 1 for an ERROR state. When in
// ERROR state, ERR should be shown on the display.
//
// Remaining bits may be 0 or 1 and should be ignored as they are not
// relevant to the display or temperature sensor.
</pre>
</div>
<p>
Both bits 5 and 2 will need to be checked to adjust the display
according to the documentation provided. The remaining bits are
ignored. 
</p>
</div>
</div>

<div id="outline-container-orgaa153a1" class="outline-4">
<h4 id="orgaa153a1">Display Port</h4>
<div class="outline-text-4" id="text-orgaa153a1">
<p>
The thermometer has a digital display which shows the
temperature. This display is controlled by a special memory area
exposed as another global variable in C.
</p>
<div class="org-src-container">
<pre class="src src-c">extern int THERMO_DISPLAY_PORT;
// Controls thermometer display. Readable and writable. Routines
// wishing to change the display should alter the bits of this
// variable.
</pre>
</div>
<p>
While listed as in <code>int</code>, each bit of the is actually tied to part of
the thermometer display screen. When bits are set to 1, part of the
display is lit up while 0 means it is not lit.
</p>
</div>
</div>
</div>

<div id="outline-container-org7972b15" class="outline-3">
<h3 id="org7972b15"><span class="section-number-3">3.2</span> Diagrams of Display</h3>
<div class="outline-text-3" id="text-3-2">
<p>
The following diagram shows bit patterns for various symbols and how
they correspond to parts of a single digit of the display.  Digits are
displayed by darkening certain <b>bars</b> in the display which correspond
to certain bits in the <code>THERMO_DISPLAY_PORT</code> being set.
</p>

<div class="org-center">

<div id="org30dd4ed" class="figure">
<p><img src="digital-digits-top-down.png" alt="digital-digits-top-down.png" style="max-width:100%;" />
</p>
<p><span class="figure-number">Figure 1: </span>Correspondence of bit in <code>THERMO_DISPLAY_PORT</code> to bars in a single digit. The 0th bit controls the top horizontal bar, the 1th bit controls the upper left bar, and so on working generally left to right nad top down. When a bit is 1 (set), the bar will be darkened while when the bit is 0 (clear) the bar will not be displayed (shown as empty).  The combinations of bits shown are the only ones that arise when showing digits for temperatures.</p>
</div>
</div>

<p>
Notice the following.
</p>
<ul class="org-ul">
<li>Bits that are set (equal to 1) will turn on (darken) one <b>bar</b> of
the display digit</li>
<li>Bits that are clear (equal to 0) will turn off one bar of the digit</li>
<li>7 bits are required to control the display of one digit</li>
<li>The bits are arranged with the low order bit (bit 0) for the middle
bar and remaining bits control bars starting from the top going
around clockwise
<ul class="org-ul">
<li>Bit 0 top middle</li>
<li>Bit 1 top left</li>
<li>Bit 2 middle middle</li>
<li>Bit 3 top right</li>
<li>Bit 4 lower left</li>
<li>Bit 5 lower middle</li>
<li>Bit 6 lower right</li>
</ul></li>
<li>The programmer can set bits to any pattern which will be displayed
but only patterns shown correspond to symbols of interest.</li>
</ul>

<p>
Temperature is displayed with several adjacent digits along with a
Celsius/Fahrenheit indicator.  The diagram below shows several full
temperatures along with the bits representing the digits.  The bits
correspond to how the global variable <code>THERMO_DISPLAY_PORT</code> should be
set in order to make the temperature appear as it does.
</p>

<div class="org-center">

<div id="orgad572c2" class="figure">
<p><img src="digital-thermo-top-down.png" alt="digital-thermo-top-down.png" style="max-width:100%;" />
</p>
<p><span class="figure-number">Figure 2: </span>Full examples of how the 30 bits of the thermometer display state control which parts of the temperature are shown.  Each digit follows the same pattern of bit to bar correspondence as the right-most bits. The lowest order (rightmost) bit controls the top bar of each digit and remaining bits control bars proceeding left-to-right and top down for digit.  The highest order bits (28 and 29) control whether the Celsius or Fahrenheit indicators are shown. Note that both could be shown at the same time or neither shown but this should not be done for actual temperatures.</p>
</div>
</div>

<p>
Notice the following.
</p>
<ul class="org-ul">
<li>You may presume that the <code>THERMO_DISPLAY_PORT</code> is a 32-bit integer.</li>
<li>30 bits are used to control the full temperature display.</li>
<li>Bits 0-6 control the tenths place</li>
<li>Bits 7-13 control the ones place</li>
<li>Bits 14-20 control the tens place</li>
<li>Bits 21-27 control the hundreds place</li>
<li>Bit 28 controls whether degrees Celsius is shown</li>
<li>Bit 29 controls whether degrees Fahrenheit is shown</li>
<li>Bits 30 and 31 are not used and should always be 0.</li>
</ul>
</div>
</div>

<div id="outline-container-org820b2b2" class="outline-3">
<h3 id="org820b2b2"><span class="section-number-3">3.3</span> <code>thermo_update.c</code>: Updating the Display with User Code</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Periodically the microcontroller will run code to adjust the
thermometer display to show the current temperature.  This function is
</p>
<pre class="example">
int thermo_update();
</pre>

<p>
and it will be your job to write this function
</p>

<p>
Rather than write everything that needs to be done within
<code>thermo_update()</code>, several helper functions will be used to divide this
task into several more manageable and testable chunks. These are
</p>
<div class="org-src-container">
<pre class="src src-c">int set_temp_from_ports(temp_t *temp);
int set_display_from_temp(temp_t temp, int *display);
</pre>
</div>
<p>
and are described in subsequent  sections.
</p>

<p>
All these function should be written in <code>thermo_update.c</code>.
</p>
</div>
</div>

<div id="outline-container-org4759d73" class="outline-3">
<h3 id="org4759d73"><span class="section-number-3">3.4</span> <code>set_temp_from_ports()</code></h3>
<div class="outline-text-3" id="text-3-4">
<div class="org-src-container">
<pre class="src src-c">int set_temp_from_ports(temp_t *temp);
// Uses the two global variables (ports) THERMO_SENSOR_PORT and
// THERMO_STATUS_PORT to set the fields of `temp`. If
// THERMO_SENSOR_PORT is negative or above its maximum trusted value
// (associated with +45.0 deg C), this function sets the
// tenths_degrees to 0 and the temp_mode to 3 for `temp` before
// returning 1.  Otherwise, converts the sensor value to deg C using
// shift operations.  Further converts to deg F if indicated from
// THERMO_STATUS_PORT. Sets the fields of `temp` to appropriate
// values. `temp_mode` is 1 for Celsius, and 2 for Fahrenheit. Returns
// 0 on success. This function DOES NOT modify any global variables
// but may access them.
//
// CONSTRAINTS: Uses only integer operations. No floating point
// operations are used as the target machine does not have a FPU. Does
// not use any math functions such as abs().
</pre>
</div>

<p>
This function works with the <code>struct temp_t</code> defined in <code>thermo.h</code> which
has the following layout.
</p>
<div class="org-src-container">
<pre class="src src-c">// Breaks temperature down into constituent parts
typedef struct{
  short tenths_degrees;         // actual temp in tenths of degrees
  char temp_mode;               // 1 for celsius, 2 for fahrenheit, 3 for error
} temp_t;
</pre>
</div>

<p>
The function <code>set_temp_from_ports()</code> will read the global variables
mentioned above and fill in values for the struct fields of the
parameter <code>temp</code>.  To convert the temperature sensor value to a
displayable temperature, one must perform some division and modulo
operations.
</p>
<ol class="org-ol">
<li>"Divide" the sensor value by 32 to get the number of tenths degrees
Celsius above -45.0 deg C. Note the documentation indicates that
this can be done using a <b>shift operation</b> as we are dividing by a
power of two.</li>
<li>Round up if the remainder is high enough. Note that when using
shifting bits to emulate division by a power of 2 <b>bits which are
shifted off would be the remainder</b> and these can be isolated with
appropriate bitwise logical operations to check them.</li>
<li>Account for the offset from -45.0 deg C by subtracting.</li>
<li>Check <code>THERMO_STATUS_PORT</code> to see if conversion to Fahrenheit is
needed.</li>
<li><p>
If conversion is needed, use the formula
</p>
<pre class="example">
farenheit = (celsius * 9) / 5 + 32;
</pre>

<p>
but note that we are working in <b>tenths degrees</b> so adjustments may
be needed. No rounding is done when converting from Celsius to
Fahrenheit. Use of this conversion and lack of rounding means that,
despite the high-resolution temperature, degrees in Fahrenheit only
appear in increments of about 0.2 deg F giving it less resolution
than the Celsius.  This is the price of a simpler
implementation. Continue to abide by the constraint: <b>do not use
floating point operations.</b> Simple microprocessors cannot perform
floating point operations as they lack a <i>Floating Point Unit
(FPU)</i>.
</p></li>
</ol>
</div>
</div>

<div id="outline-container-org4bccaa9" class="outline-3">
<h3 id="org4bccaa9"><span class="section-number-3">3.5</span> <code>set_display_from_temp()</code></h3>
<div class="outline-text-3" id="text-3-5">
<div class="org-src-container">
<pre class="src src-c">int set_display_from_temp(temp_t temp, int *display);
// Alters the bits of integer pointed to by display to reflect the
// temperature in struct arg temp.  If temp has a temperature value
// that is below minimum or above maximum temperature allowable or if
// the temp_mode is not Celsius or Fahrenheit, sets the display to
// read "ERR" and returns 1. Otherwise, calculates each digit of the
// temperature and changes bits at display to show the temperature
// according to the pattern for each digit.  This function DOES NOT
// modify any global variables except if `display` points at one.
// 
// CONSTRAINTS: Uses only integer operations. No floating point
// operations are used as the target machine does not have a FPU. Does
// not use any math functions such as abs().
</pre>
</div>

<p>
This function sets the bits in the integer pointed to by <code>display</code>
which. In some cases <code>display</code> may point at <code>THERMO_DISPLAY_PORT</code>
which will adjust the display itself, but it is useful in testing to
change other integers, thus the pointer argument.
</p>

<p>
To properly set the display bits, <code>set_display_from_temp()</code> will need
to do bit shifting along with bitwise operations to construct the
correct bit pattern for the thermometer display.
</p>

<p>
A good trick to use is to create a series of bit patterns that
correspond to the various digits. For example, according to the
diagrams above, the bit pattern for <code>9</code> is <code>0b1011111</code>.  If a <code>9</code>
should appear on the display somewhere, this bit pattern should be
shifted and combined with the existing bits in <code>display</code> so that a 9
will show.  Creating similar constant <i>mask</i> patterns for each digit,
the minus sign, and the position of the Celsius/Fahrenheit indicator
is a good way to make this problem manageable.
</p>

<p>
A detailed explanation of one approach to the problem follows.
</p>
<ul class="org-ul">
<li>The <code>display</code> parameter may point to an integer with arbitrary bits
in it. Work around this either by (A) creating a local <code>int</code>
initialized to 0, arranging the display, and then deref-setting
<code>display</code> to that integer OR (B) deref-setting <code>display</code> to 0 before
altering it.</li>
<li>Create an array of bit masks for each of the digits 0-9. The 0th
element of the array contains a bit mask like <code>0b1111011</code> which
represents the bits that should be set for a 0 digit, the 1th
element of this array has a mask like <code>0b1001000</code> which are the bits
to be set for a 1. There should be ten entries in this array in
indices 0-9. The array can be a global variable or an array local to
some function.</li>
<li>Use modulo to determine the integer value for the tens, ones, and
tenths digits for the temperature. Call these variables something
like <code>temp_hundreds</code>, <code>temp_tens</code> and so on. Each variable should be
in the range 0-9.</li>
<li>Start with an integer variable of 0 (all 0 bits).</li>
<li>Use <code>temp_tens</code> to index into your array of masks to determine the
bits that should be set for it. Combine the state variable with
<code>temp_ones</code> mask.</li>
<li>Combining bits here is a logical operation of setting all bits that
are one in the mask to 1 in the display variable.</li>
<li>Use <code>temp_hundreds</code> to index into your array of masks for the right mask
for that digit. The bits corresponding to the hundreds place of the
temperature is shifted to the left by 21 bits so shift the mask to the
left and combine it with the state variable.</li>
<li>Repeat this process for the tens digit (shifted by 14) ones, and
tenths digits.</li>
<li>Early in the function, check that the ranges for the <code>tenths_degrees</code>
and <code>temp_mode</code> fields are in range. If they are note, populate
<code>display</code> with the <code>ERR</code> message and return 1.</li>
<li><p>
There are several special cases to consider: leading 0's should be
blanks so nothing should be drawn. Also, the negative sign should be
positioned immediately to the left of the first non-blank digit. A
couple examples of how this looks are below with the <b>underscore
representing a blank space</b>.
</p>
<div class="org-src-container">
<pre class="src src-text">RIGHT        WRONG      
_22.4 deg C   022.4 deg C
_-1.5 deg C   -01.5 deg C  
_-2.7 deg C   -_2.7 deg C
ERR._ _____   ERR.0 deg C
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgc6c507f" class="outline-3">
<h3 id="orgc6c507f"><span class="section-number-3">3.6</span> <a id="org9fc6d3f"></a> <code>thermo_update()</code></h3>
<div class="outline-text-3" id="text-3-6">
<div class="org-src-container">
<pre class="src src-c">int thermo_update();
// Called to update the thermometer display.  Makes use of
// set_temp_from_ports() and set_display_from_temp() to access
// temperature sensor then set the display. Always sets the display
// even if the other functions returns an error. Returns 0 if both
// functions complete successfully and return 0. Returns 1 if either
// function or both return a non-zero values.
// 
// CONSTRAINT: Does not allocate any heap memory as malloc() is NOT
// available on the target microcontroller.  Uses stack and global
// memory only.
</pre>
</div>
<p>
<i>NOTE: This documentation was updated to remove some inconsistencies
after the initial release of the project.</i>
</p>

<p>
This function makes use of the previous two functions and the global
variables that correspond to the hardware to alter the display. It
should be relatively short by making use of the previous functions.
</p>
</div>
</div>

<div id="outline-container-org84cca9e" class="outline-3">
<h3 id="org84cca9e"><span class="section-number-3">3.7</span> Thermometer Simulator</h3>
<div class="outline-text-3" id="text-3-7">
<p>
While we do not have actual hardware with the features mentioned, a
simulator for the system is in the provided file <code>thermo_main.c</code>.  You
do not need to modify or understand code in either file to complete
the assignment though it will certainly expand you C skills to spend
some time examining them.
</p>

<p>
The <code>main()</code> function in <code>thermo_main.c</code> accepts two command line
arguments which are the value for the temperature sensor and whether
the thermometer is in Celsius or Fahrenheit mode. It will call your
functions for this problem and show results for it.  You are
encouraged to use this function to test your code incrementally
</p>
<ul class="org-ul">
<li>Examine whether <code>set_temp_from_ports()</code> is correct based on the first
part of output in <code>thermo_main.c</code></li>
<li>Once <code>set_temp_from_ports()</code> is complete, examine whether the output
of <code>set_display_from_temp()</code> is correct based on the latter part
of the output.</li>
<li>Once both these functions are correct, examine whether
<code>thermo_update()</code> is correct based on the final part of the output
of the <code>main()</code> function.</li>
</ul>

<p>
Note that there are a variety of functions in the <code>thermo_main.c</code>
which are used to simulate how the thermometer will display. This is
also where the global variables like <code>THERMO_DISPLAY_PORT</code> are
defined.  However, you do not need to modify or even understand the
code; it is only used to show how the display would look when the
<code>THERMO_DISPLAY_PORT</code> bits are set.
</p>
</div>
</div>

<div id="outline-container-org387a66c" class="outline-3">
<h3 id="org387a66c"><span class="section-number-3">3.8</span> Sample Runs of <code>thermo_main</code></h3>
<div class="outline-text-3" id="text-3-8">
<p>
Below are samples generated by compiling and running the <code>main()</code>
function in the <code>thermo_main.c</code> file.  The code is compiled by using
the provided <code>Makefile</code> to create the <code>thermo_main</code> program.  It
compiles the the functions you write in the file <code>thermo_update.c</code> and
combines them with functions in <code>thermo_main.c</code>.
</p>

<div class="org-src-container">
<pre class="src src-sh">
########## CELSIUS FOR 0 ##########
&gt;&gt; ./thermo_main 0 C
THERMO_SENSOR_PORT set to: 0
THERMO_STAUS_PORT set to: 1000 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -450
  .temp_mode      = 1
}
Simulated temp is: -45.0 deg C
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 01 0000100 1001110 1100111 1111011
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 01 0000100 1001110 1100111 1111011
index: 30 28      21      14       7       0

Thermometer Display:
           ~~   ~~   
     |  | |    |  | o
 ~~   ~~   ~~        C
        |    | |  |  
           ~~ o ~~   


########## FAHRENHEIT FOR 0 ##########
&gt;&gt; ./thermo_main 0 F
THERMO_SENSOR_PORT set to: 0
THERMO_STAUS_PORT set to: 1010 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -490
  .temp_mode      = 2
}
Simulated temp is: -49.0 deg F
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 10 0000100 1001110 1101111 1111011
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 10 0000100 1001110 1101111 1111011
index: 30 28      21      14       7       0

Thermometer Display:
           ~~   ~~   
     |  | |  | |  |  
 ~~   ~~   ~~       o
        |    | |  |  F
           ~~ o ~~   


########## CELSIUS FOR 10 ##########
&gt;&gt; ./thermo_main 10 C
THERMO_SENSOR_PORT set to: 10
THERMO_STAUS_PORT set to: 1000 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -450
  .temp_mode      = 1
}
Simulated temp is: -45.0 deg C
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 01 0000100 1001110 1100111 1111011
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 01 0000100 1001110 1100111 1111011
index: 30 28      21      14       7       0

Thermometer Display:
           ~~   ~~   
     |  | |    |  | o
 ~~   ~~   ~~        C
        |    | |  |  
           ~~ o ~~   


########## FAHRENHEIT FOR 10 ##########
&gt;&gt; ./thermo_main 10 F
THERMO_SENSOR_PORT set to: 10
THERMO_STAUS_PORT set to: 1010 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -490
  .temp_mode      = 2
}
Simulated temp is: -49.0 deg F
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 10 0000100 1001110 1101111 1111011
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 10 0000100 1001110 1101111 1111011
index: 30 28      21      14       7       0

Thermometer Display:
           ~~   ~~   
     |  | |  | |  |  
 ~~   ~~   ~~       o
        |    | |  |  F
           ~~ o ~~   


########## CELSIUS FOR 20 ##########
&gt;&gt; ./thermo_main 20 C
THERMO_SENSOR_PORT set to: 20
THERMO_STAUS_PORT set to: 1000 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -449
  .temp_mode      = 1
}
Simulated temp is: -44.9 deg C
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 01 0000100 1001110 1001110 1101111
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 01 0000100 1001110 1001110 1101111
index: 30 28      21      14       7       0

Thermometer Display:
                ~~   
     |  | |  | |  | o
 ~~   ~~   ~~   ~~   C
        |    |    |  
              o ~~   


########## FAHRENHEIT FOR 20 ##########
&gt;&gt; ./thermo_main 20 F
THERMO_SENSOR_PORT set to: 20
THERMO_STAUS_PORT set to: 1010 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -488
  .temp_mode      = 2
}
Simulated temp is: -48.8 deg F
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 10 0000100 1001110 1111111 1111111
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 10 0000100 1001110 1111111 1111111
index: 30 28      21      14       7       0

Thermometer Display:
           ~~   ~~   
     |  | |  | |  |  
 ~~   ~~   ~~   ~~  o
        | |  | |  |  F
           ~~ o ~~   


########## CELSIUS FOR 34 ##########
&gt;&gt; ./thermo_main 34 C
THERMO_SENSOR_PORT set to: 34
THERMO_STAUS_PORT set to: 1000 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -449
  .temp_mode      = 1
}
Simulated temp is: -44.9 deg C
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 01 0000100 1001110 1001110 1101111
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 01 0000100 1001110 1001110 1101111
index: 30 28      21      14       7       0

Thermometer Display:
                ~~   
     |  | |  | |  | o
 ~~   ~~   ~~   ~~   C
        |    |    |  
              o ~~   


########## FAHRENHEIT FOR 34 ##########
&gt;&gt; ./thermo_main 34 F
THERMO_SENSOR_PORT set to: 34
THERMO_STAUS_PORT set to: 1010 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -488
  .temp_mode      = 2
}
Simulated temp is: -48.8 deg F
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 10 0000100 1001110 1111111 1111111
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 10 0000100 1001110 1111111 1111111
index: 30 28      21      14       7       0

Thermometer Display:
           ~~   ~~   
     |  | |  | |  |  
 ~~   ~~   ~~   ~~  o
        | |  | |  |  F
           ~~ o ~~   


########## CELSIUS FOR 160 ##########
&gt;&gt; ./thermo_main 160 C
THERMO_SENSOR_PORT set to: 160
THERMO_STAUS_PORT set to: 1000 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -445
  .temp_mode      = 1
}
Simulated temp is: -44.5 deg C
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 01 0000100 1001110 1001110 1100111
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 01 0000100 1001110 1001110 1100111
index: 30 28      21      14       7       0

Thermometer Display:
                ~~   
     |  | |  | |    o
 ~~   ~~   ~~   ~~   C
        |    |    |  
              o ~~   


########## FAHRENHEIT FOR 160 ##########
&gt;&gt; ./thermo_main 160 F
THERMO_SENSOR_PORT set to: 160
THERMO_STAUS_PORT set to: 1010 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -481
  .temp_mode      = 2
}
Simulated temp is: -48.1 deg F
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 10 0000100 1001110 1111111 1001000
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 10 0000100 1001110 1111111 1001000
index: 30 28      21      14       7       0

Thermometer Display:
           ~~        
     |  | |  |    |  
 ~~   ~~   ~~       o
        | |  |    |  F
           ~~ o      


########## CELSIUS FOR 1607 ##########
&gt;&gt; ./thermo_main 1607 C
THERMO_SENSOR_PORT set to: 1607
THERMO_STAUS_PORT set to: 1000 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -400
  .temp_mode      = 1
}
Simulated temp is: -40.0 deg C
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 01 0000100 1001110 1111011 1111011
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 01 0000100 1001110 1111011 1111011
index: 30 28      21      14       7       0

Thermometer Display:
           ~~   ~~   
     |  | |  | |  | o
 ~~   ~~             C
        | |  | |  |  
           ~~ o ~~   


########## FAHRENHEIT FOR 1607 ##########
&gt;&gt; ./thermo_main 1607 F
THERMO_SENSOR_PORT set to: 1607
THERMO_STAUS_PORT set to: 1010 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -400
  .temp_mode      = 2
}
Simulated temp is: -40.0 deg F
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 10 0000100 1001110 1111011 1111011
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 10 0000100 1001110 1111011 1111011
index: 30 28      21      14       7       0

Thermometer Display:
           ~~   ~~   
     |  | |  | |  |  
 ~~   ~~            o
        | |  | |  |  F
           ~~ o ~~   


########## CELSIUS FOR 12689 ##########
&gt;&gt; ./thermo_main 12689 C
THERMO_SENSOR_PORT set to: 12689
THERMO_STAUS_PORT set to: 1000 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = -53
  .temp_mode      = 1
}
Simulated temp is: -5.3 deg C
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 01 0000000 0000100 1100111 1101101
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 01 0000000 0000100 1100111 1101101
index: 30 28      21      14       7       0

Thermometer Display:
           ~~   ~~   
          |       | o
      ~~   ~~   ~~   C
             |    |  
           ~~ o ~~   


########## FAHRENHEIT FOR 12689 ##########
&gt;&gt; ./thermo_main 12689 F
THERMO_SENSOR_PORT set to: 12689
THERMO_STAUS_PORT set to: 1010 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = 225
  .temp_mode      = 2
}
Simulated temp is: 22.5 deg F
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 10 0000000 0111101 0111101 1100111
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 10 0000000 0111101 0111101 1100111
index: 30 28      21      14       7       0

Thermometer Display:
      ~~   ~~   ~~   
        |    | |     
      ~~   ~~   ~~  o
     |    |       |  F
      ~~   ~~ o ~~   


########## CELSIUS FOR 15744 ##########
&gt;&gt; ./thermo_main 15744 C
THERMO_SENSOR_PORT set to: 15744
THERMO_STAUS_PORT set to: 1000 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = 42
  .temp_mode      = 1
}
Simulated temp is: 4.2 deg C
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 01 0000000 0000000 1001110 0111101
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 01 0000000 0000000 1001110 0111101
index: 30 28      21      14       7       0

Thermometer Display:
                ~~   
          |  |    | o
           ~~   ~~   C
             | |     
              o ~~   


########## FAHRENHEIT FOR 15744 ##########
&gt;&gt; ./thermo_main 15744 F
THERMO_SENSOR_PORT set to: 15744
THERMO_STAUS_PORT set to: 1010 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = 395
  .temp_mode      = 2
}
Simulated temp is: 39.5 deg F
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 10 0000000 1101101 1101111 1100111
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 10 0000000 1101101 1101111 1100111
index: 30 28      21      14       7       0

Thermometer Display:
      ~~   ~~   ~~   
        | |  | |     
      ~~   ~~   ~~  o
        |    |    |  F
      ~~   ~~ o ~~   


########## CELSIUS FOR 20448 ##########
&gt;&gt; ./thermo_main 20448 C
THERMO_SENSOR_PORT set to: 20448
THERMO_STAUS_PORT set to: 1000 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = 189
  .temp_mode      = 1
}
Simulated temp is: 18.9 deg C
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 01 0000000 1001000 1111111 1101111
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 01 0000000 1001000 1111111 1101111
index: 30 28      21      14       7       0

Thermometer Display:
           ~~   ~~   
        | |  | |  | o
           ~~   ~~   C
        | |  |    |  
           ~~ o ~~   


########## FAHRENHEIT FOR 20448 ##########
&gt;&gt; ./thermo_main 20448 F
THERMO_SENSOR_PORT set to: 20448
THERMO_STAUS_PORT set to: 1010 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = 660
  .temp_mode      = 2
}
Simulated temp is: 66.0 deg F
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 10 0000000 1110111 1110111 1111011
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 10 0000000 1110111 1110111 1111011
index: 30 28      21      14       7       0

Thermometer Display:
      ~~   ~~   ~~   
     |    |    |  |  
      ~~   ~~       o
     |  | |  | |  |  F
      ~~   ~~ o ~~   


########## CELSIUS FOR 28544 ##########
&gt;&gt; ./thermo_main 28544 C
THERMO_SENSOR_PORT set to: 28544
THERMO_STAUS_PORT set to: 1000 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = 442
  .temp_mode      = 1
}
Simulated temp is: 44.2 deg C
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 01 0000000 1001110 1001110 0111101
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 01 0000000 1001110 1001110 0111101
index: 30 28      21      14       7       0

Thermometer Display:
                ~~   
     |  | |  |    | o
      ~~   ~~   ~~   C
        |    | |     
              o ~~   


########## FAHRENHEIT FOR 28544 ##########
&gt;&gt; ./thermo_main 28544 F
THERMO_SENSOR_PORT set to: 28544
THERMO_STAUS_PORT set to: 1010 1000
index:                       4    0
result = set_temp_from_ports(&amp;temp);
result: 0
temp = {
  .tenths_degrees = 1115
  .temp_mode      = 2
}
Simulated temp is: 111.5 deg F
result = set_display_from_temp(temp, &amp;display);
result: 0
display is
bits:  00 10 1001000 1001000 1001000 1100111
index: 30 28      21      14       7       0

result = thermo_update();
result: 0
THERMO_DISPLAY_PORT is
bits:  00 10 1001000 1001000 1001000 1100111
index: 30 28      21      14       7       0

Thermometer Display:
                ~~   
   |    |    | |     
                ~~  o
   |    |    |    |  F
              o ~~   


</pre>
</div>
</div>
</div>


<div id="outline-container-orgebcbe5a" class="outline-3 grading 30">
<h3 id="orgebcbe5a"><span class="section-number-3">3.9</span> <a id="org406cbb4"></a> Grading Criteria for <code>thermo_update.c</code>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="grading">grading</span>&#xa0;<span class="30">30</span></span></h3>
<div class="outline-text-3" id="text-3-9">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Weight</th>
<th scope="col" class="org-left">Criteria</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">AUOTMATED TESTS</td>
</tr>

<tr>
<td class="org-right">20</td>
<td class="org-left"><code>make test-prob1</code> runs 40 tests for correctness, 0.5 points per test</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>test_thermo_update.c</code> provides tests for functions in <code>thermo_update.c</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">There are also tests of <code>thermo_main</code> which uses functions from <code>thermo_update.c</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">MANUAL INSPECTION</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-left"><code>set_temp_from_ports()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of a bitwise operations (shifts, and, etc.) to convert the sensor value to temperature</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Section to round temperature correctly which uses bitwise operations to calculate remainders.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear effort to do error checking of out of bounds values.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear flow to how each field of <code>temp</code> is calculated.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Correctly setting fields of <code>temp</code> via pointer dereference or arrow operator.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">No use of floating point operations as per the listed constraint</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><b>Concise function that is not longer than 40 lines of code, complex nested conditionals</b></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left"><code>set_display_from_temp()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear effort to do error checking for out of bounds values in <code>temp</code> parameter</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Presence of an error case that sets up the <code>ERR</code> message on the screen.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear code that calculates digits to be displayed</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of bit masks corresponding to digits to be displayed</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of bitwise operators to shift bits appropriately</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of bitwise operators to combine shifted digit bits</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear dereference/set of the integer pointed to by the <code>display</code> parameter</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><b>Concise function that is not longer than 80 lines of code, complex nested conditionals</b></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left"><code>thermo_update()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of the global variables like <code>THERMO_DISPLAY_PORT</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Does not re-define / re-declare these variables, only checks / alters their values</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of previous two functions</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Correctly captures return values of previous functions and passes errors up</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org018e18b" class="outline-2">
<h2 id="org018e18b"><span class="section-number-2">4</span> <b>Problem 2</b>: Debugging the Puzzlebox</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orgdba1e70" class="outline-3">
<h3 id="orgdba1e70"><span class="section-number-3">4.1</span> Overview</h3>
<div class="outline-text-3" id="text-4-1">
<p>
The file <code>puzzlebox.c</code> contains source code that reads inputs from a
file named on the command line. If the inputs are correct, points are
awarded. If inputs are incorrect, error messages are printed.  
</p>

<p>
The <code>puzzlebox</code> is arranged into a series of <i>phases</i> each of which
has some points associated with it.
</p>
<ul class="org-ul">
<li>Not all phases must be completed to get full credit but the phases
must done in order.</li>
<li>Each phase reads inputs from the file provided on the command line
and performs calculations on them to see if they are "correct"
according to various criteria</li>
<li>The very first input is your <b>internet ID</b> like <code>kauf0095</code> (first
part of your UMN email address).  This input is used to add
randomness to the puzzle so that <b>your answers will be different
from most other students</b>. You must you use your own internet ID.</li>
</ul>

<p>
<b>The purpose of this problem is get familiar with using a debugger.</b>
This is a powerful tool that pauses programs, allows internal values
to be printed and code to be stepped through line by line.  It is
nearly essential to use as the code in <code>puzzlebox</code> is intentionally
convoluted in places. Being able to pause execution and print values
at various points make it <b>much easier</b> to solve the puzzles.
</p>
</div>
</div>

<div id="outline-container-org405f724" class="outline-3">
<h3 id="org405f724"><span class="section-number-3">4.2</span> <code>input.txt</code> Input File</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Name your input file <code>input.txt</code> and put your internet ID in it along
with some numbers like <code>1 2 3</code>. Then compile and run the <code>puzzlebox</code>
program on it.
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make puzzlebox                             # compile puzzlebox
gcc -Wall -g -c puzzlebox.c
gcc -Wall -g -o puzzlebox puzzlebox.o

&gt;&gt; cat input.txt                              # show contents of input.txt
kauf0095 1 2 3

&gt;&gt; puzzlebox input.txt
========================================
PROBLEM 2: Puzzlebox
UserID 'KAUF0095' accepted: hash value = 1936486779
PHASE 1: A puzzle you say? Challenge accepted!

Ah ah ah, you didn't say the magic word...
Failure: Double debugger burger, order up!

RESULTS: 0 / 30 points
</pre>
</div>

<p>
This is automated with the <code>Makefile</code> target <code>make test-prob2</code>:
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make test-prob2                       # compile/run puzzlebox with input.txt
gcc -Wall -g -c puzzlebox.c
gcc -Wall -g -o puzzlebox puzzlebox.o
puzzlebox input.txt
========================================
PROBLEM 2: Puzzlebox
UserID 'KAUF0095' accepted: hash value = 1936486779
PHASE 1: A puzzle you say? Challenge accepted!

Ah ah ah, you didn't say the magic word...
Failure: Double debugger burger, order up!

RESULTS: 0 / 30 points
</pre>
</div>

<p>
These initial forays are not positive (0 / 30 points) but the real
meat of the problem is in examining the source code and determining
inputs for <code>input.txt</code>.
</p>
</div>
</div>

<div id="outline-container-orgd00bf16" class="outline-3">
<h3 id="orgd00bf16"><span class="section-number-3">4.3</span> <code>gdb</code> The GNU Debugger</h3>
<div class="outline-text-3" id="text-4-3">
<p>
You will definitely need to use a debugger to solve the puzzlebox and
<code>gdb</code> is the quintessential debugger associated with our compiler
<code>gcc</code>.  It is installed by default on all lab machines and is an easy
install on must Linux machines.
</p>

<p>
For a quick overview of GDB, here are some resources
</p>
<ul class="org-ul">
<li><a href="http://www-users.cs.umn.edu/~kauffman/tutorials/gdb.html">CSCI 2021 Quick Guide to gdb: The GNU Debugger</a>: Page describing how
to start the debugger, a sample session using <code>puzzlebox</code>, an
overview of the most common commands.</li>
<li><a href="https://www.youtube.com/watch?v%3DPorfLSr3DDI">CppCon 2015: Greg Law " Give me 15 minutes &amp; I'll change your view
of GDB"</a>: Video giving basic overview of hope to run <code>gdb</code> on simple
programs with an emphasis on differences between "normal" mode and
TUI mode</li>
<li><a href="http://www.yolinux.com/TUTORIALS/GDB-Commands.html">GNU GDB Debugger Command Cheat Sheet</a>: Extensive list of commands</li>
<li><a href="https://sourceware.org/gdb/current/onlinedocs/gdb/">Debugging with GDB</a>: Official manual for <code>gdb</code></li>
</ul>
</div>
</div>

<div id="outline-container-orga933ee3" class="outline-3">
<h3 id="orga933ee3"><span class="section-number-3">4.4</span> Typical Cycle</h3>
<div class="outline-text-3" id="text-4-4">
<p>
A typical cycle of working on <code>puzzlebox</code> will be the following.
</p>
<ul class="org-ul">
<li><p>
Start the debugger with puzzlebox
</p>
<pre class="example">
gdb -tui ./puzzlebox
</pre></li>
<li><p>
Set the arguments array to <code>input.txt</code>
</p>
<pre class="example">
set args input.txt
</pre></li>
<li><p>
Set a breakpoint at a phase like <code>phase3</code>
</p>
<pre class="example">
break phase3
</pre></li>
<li><p>
Run the program
</p>
<pre class="example">
run
</pre></li>
<li><p>
Do some stepping / nexting
</p>
<pre class="example">
step
next
</pre></li>
<li><p>
Print some variables
</p>
<pre class="example">
print normal_val
print/x val_in_hex
print/t val_in_binary
</pre></li>
<li>Make some changes to <code>input.txt</code> in a different window</li>
<li><p>
Re-run the program to see if things have changed favorably
</p>
<pre class="example">
kill
run
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-orgfd879cf" class="outline-3">
<h3 id="orgfd879cf"><span class="section-number-3">4.5</span> Kinds of Puzzles</h3>
<div class="outline-text-3" id="text-4-5">
<p>
The puzzles presented in the different phases make use of a variety of
C program techniques which we have or will discuss including.
</p>
<ul class="org-ul">
<li>Bit-wise operations and their use in place of arithmetic</li>
<li>String and character array manipulations</li>
<li>Interpreting bits as one of several kinds of things (integer, float,
character) through pointers and unions</li>
<li>More extensive C control structures like <code>goto</code> and labels</li>
</ul>
</div>
</div>

<div id="outline-container-org0b6c363" class="outline-3 grading 30">
<h3 id="org0b6c363"><span class="section-number-3">4.6</span> Tests for <code>puzzlebox.c</code>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="grading">grading</span>&#xa0;<span class="30">30</span></span></h3>
<div class="outline-text-3" id="text-4-6">
<p>
<code>puzzlebox.c</code> itself reports how many points one can earn at the end
of its execution.
</p>

<p>
Currently there are <b>40 points available but 30 points is considered
full credit.</b> 
</p>

<p>
If any additional points are earned, they will be counted as <b>Makeup
Credit for Projects</b> to make up for credit lost on past or future
projects.  Your total score on All Projects cannot exceed 100% so any
points beyond will simply be dropped.
</p>

<p>
<b>Run the following command to 'test' puzzlebox</b>:
</p>
<pre class="example">
make test-prob2
</pre>
</div>
</div>
</div>

<div id="outline-container-org1655437" class="outline-2">
<h2 id="org1655437"><span class="section-number-2">5</span> <b>Problem 3</b>: Hash Map in C</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgc291b9f" class="outline-3">
<h3 id="orgc291b9f"><span class="section-number-3">5.1</span> Overview</h3>
<div class="outline-text-3" id="text-5-1">
<p>
This problem implements a rudimentary hash table application in C
along with a program that uses it.  The architecture is similar to a
lab problem involving linked lists so reviewing that code can provide
some insight.
</p>

<p>
Basic Hash Tables are covered in most introductory data structure
classes such as CMSC 132. Should you need to review them, the
following resources may prove useful.
</p>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Hash_table">Wikipedia Article on Hash Tables</a>: Provides general overview of the
data structure. Specifically focus on <a href="https://en.wikipedia.org/wiki/Hash_table#Separate_chaining_with_linked_lists">Separate Chaining with Linked
Lists</a> which is the style of hash table implemented in the
assignment.</li>
<li><a href="https://www.youtube.com/watch?v=shs0KM3wKv8">Youtube "Data Structures: Hash Tables" by HackerRank</a>: Short video
summarizing major concepts of hash tables in any programming
language. Explains briefly hash code functions and the Separate
Chaining architecture we will use.</li>
<li><a href="https://www.youtube.com/watch?v=c3RVW3KGIIE">Youtube "How HashMap works in Java" by Ranjith Ramachandran</a>: Short
video which includes a detailed walk-through of adding elements to a
separately chained hash table.  Somewhat Java-centric including use
of a different mapping of hash codes to array indices than we will
use.</li>
</ul>
</div>
</div>

<div id="outline-container-org1405c0f" class="outline-3">
<h3 id="org1405c0f"><span class="section-number-3">5.2</span> <code>hashmap_main</code> Demonstration</h3>
<div class="outline-text-3" id="text-5-2">
<p>
The intent of this problem is to develop a small application which
behaves as the following demo indicates.
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make hash_main                       # build the hash_main application
gcc -Wall -g -lm -c hash_main.c
gcc -Wall -g -lm -c hash_funcs.c
gcc -Wall -g -lm -o hash_main hash_main.o hash_funcs.o

&gt;&gt; ./hash_main                          # run the application
Hashmap Main
Commands:
  hashcode &lt;key&gt;   : prints out the numeric hash code for the given key (does not change the hash map)
  put &lt;key&gt; &lt;val&gt;  : inserts the given key/val into the hash map, overwrites existing values if present
  get &lt;key&gt;        : prints the value associated with the given key or NOT FOUND
  print            : shows contents of the hashmap ordered by how they appear in the table
  structure        : prints detailed structure of the hash map
  clear            : reinitializes hash map to be empty with default size
  save &lt;file&gt;      : writes the contents of the hash map the given file
  load &lt;file&gt;      : clears the current hash map and loads the one in the given file
  next_prime &lt;int&gt; : if &lt;int&gt; is prime, prints it, otherwise finds the next prime and prints it
  expand           : expands memory size of hashmap to reduce its load factor
  quit             : exit the program

HM&gt; put Lucas brash                     # put key/vals into the hash map
HM&gt; put Mike DM
HM&gt; put Dustin corny
HM&gt; put Will lost

HM&gt; print                               # print the contents of the hash map
        Mike : DM                       # shows up out of order from insertions
      Dustin : corny                    # due to the randomness of hash codes
        Will : lost
       Lucas : brash

HM&gt; get Dustin                          # lookup based on key
FOUND: corny                            # success: value is returned
HM&gt; get El
NOT FOUND                               # failure: not in hash map
HM&gt; get Lucas                           
FOUND: brash                            # success
HM&gt; get Jim
NOT FOUND                               # failure

HM&gt; put El weird                        # add more key/values to the hash map
HM&gt; put Steve hairy
HM&gt; put Nancy torn
HM&gt; put Barb ran-away?
HM&gt; print
        Mike : DM
       Nancy : torn
        Barb : ran-away?
      Dustin : corny
          El : weird
        Will : lost
       Lucas : brash
       Steve : hairy

HM&gt; hashcode Lucas                      # show hash codes for various keys, 
1633908044                              # calculated from the string
HM&gt; hashcode Barb                       # PRINT USING "%ld" for 64-bit longs
1651663170                              # much larger than the table size

HM&gt; structure                           # show the structure of the hash table
item_count: 8                           # how many key/val pairs in the map
table_size: 5                           # size of the table array
load_factor: 1.6000                     # item_count / table_size
  0 : {(1701538125) Mike : DM} {(521359221070) Nancy : torn} {(1651663170) Barb : ran-away?} 
  1 : {(121399204345156) Dustin : corny} 
  2 : {(27717) El : weird} 
  3 : {(1819044183) Will : lost} 
  4 : {(495555147084) Lucas : brash} {(435778057299) Steve : hairy} 

# above shows hash codes for key, value, linked lists in each bucket
# 0 and 5 are in bucket 0, 1 and 6 are in bucket 1, etc  

HM&gt; expand                              # expand the hash map's table array
HM&gt; structure                           # show the structure
item_count: 8                           # same # of key/vals
table_size: 11                          # larger array, always a prime number
load_factor: 0.7273                     # reduced load factor
  0 : {(1819044183) Will : lost} 
  1 : {(1701538125) Mike : DM} {(121399204345156) Dustin : corny} 
  2 : {(435778057299) Steve : hairy} 
  3 : {(1651663170) Barb : ran-away?} 
  4 : 
  5 : 
  6 : {(521359221070) Nancy : torn} 
  7 : 
  8 : {(27717) El : weird} {(495555147084) Lucas : brash} 
  9 : 
 10 : 

# all elements rehashed to new locations based on new table size 11

HM&gt; save stranger.hm                    # save hash map to a file
HM&gt; clear                               # clear current hashmap
HM&gt; print                               # print: nothing there
HM&gt; structure                           # structure: empty after 'clear'
item_count: 0
table_size: 5
load_factor: 0.0000
  0 : 
  1 : 
  2 : 
  3 : 
  4 : 

HM&gt; put Jim cop                         # put new values in the hashmap
HM&gt; put Joyce worried
HM&gt; print                               # print new hash map
       Joyce : worried
         Jim : cop

HM&gt; structure                           # show structure
item_count: 2                           # 2 items only
table_size: 5
load_factor: 0.4000
  0 : 
  1 : {(435460599626) Joyce : worried} 
  2 : 
  3 : {(7170378) Jim : cop} 
  4 : 

HM&gt; get Dustin                          # old elements were cleared out
NOT FOUND
HM&gt; get Joyce                           # new elements present
FOUND: worried

HM&gt; load stranger.hm                    # load from file; clears current hash table
HM&gt; print                               # old elements are restored
        Will : lost
        Mike : DM
      Dustin : corny
       Steve : hairy
        Barb : ran-away?
       Nancy : torn
          El : weird
       Lucas : brash

HM&gt; structure                           # identical structure from the 'load'
item_count: 8
table_size: 11
load_factor: 0.7273
  0 : {(1819044183) Will : lost} 
  1 : {(1701538125) Mike : DM} {(121399204345156) Dustin : corny} 
  2 : {(435778057299) Steve : hairy} 
  3 : {(1651663170) Barb : ran-away?} 
  4 : 
  5 : 
  6 : {(521359221070) Nancy : torn} 
  7 : 
  8 : {(27717) El : weird} {(495555147084) Lucas : brash} 
  9 : 
 10 : 

HM&gt; get Dustin                          # now found
FOUND: corny
HM&gt; get Joyce                           # cleared after the 'load'
NOT FOUND

HM&gt; put Will found                      # overwrite values associated with existing keys
Overwriting previous key/val
HM&gt; put Nancy decided
Overwriting previous key/val
HM&gt; put Mike girl-crazy
Overwriting previous key/val

HM&gt; print                               
        Will : found                    # new value
        Mike : girl-crazy               # new value
      Dustin : corny
       Steve : hairy
        Barb : ran-away?
       Nancy : decided                  # new value
          El : weird
       Lucas : brash


HM&gt; next_prime 10                       # calculates next larger prime  
11
HM&gt; next_prime 25
29
HM&gt; next_prime 31                       # already prime
31

HM&gt; structure                           # show structure
item_count: 8
table_size: 11
load_factor: 0.7273
  0 : {(1819044183) Will : found} 
  1 : {(1701538125) Mike : girl-crazy} {(121399204345156) Dustin : corny} 
  2 : {(435778057299) Steve : hairy} 
  3 : {(1651663170) Barb : ran-away?} 
  4 : 
  5 : 
  6 : {(521359221070) Nancy : decided} 
  7 : 
  8 : {(27717) El : weird} {(495555147084) Lucas : brash} 
  9 : 
 10 : 

HM&gt; expand                              # expand again to next_prime(table_size*2+1)
HM&gt; structure
item_count: 8                           # same as before
table_size: 23                          # larger, always a prime number
load_factor: 0.3478                     # reduced load factor
  0 : 
  1 : 
  2 : {(27717) El : weird} 
  3 : 
  4 : {(1651663170) Barb : ran-away?} {(495555147084) Lucas : brash} 
  5 : 
  6 : 
  7 : 
  8 : {(121399204345156) Dustin : corny} 
  9 : 
 10 : {(521359221070) Nancy : decided} 
 11 : {(1701538125) Mike : girl-crazy} {(435778057299) Steve : hairy} 
 12 : {(1819044183) Will : found} 
 13 : 
 14 : 
 15 : 
 16 : 
 17 : 
 18 : 
 19 : 
 20 : 
 21 : 
 22 : 

HM&gt; quit                                # quit the program
</pre>
</div>
</div>
</div>


<div id="outline-container-orgb586e33" class="outline-3">
<h3 id="orgb586e33"><span class="section-number-3">5.3</span> <a id="orgb844c47"></a> <code>hashmap_funcs.c</code>: Hash Table Functions</h3>
<div class="outline-text-3" id="text-5-3">
<p>
We will favor <b>separately chained</b> hash maps which have the
following features.
</p>
<ul class="org-ul">
<li>A hash map stores key/value pairs allowing fast lookup based on
keys. It is a data structure that is often used to implement
'dictionaries'.</li>
<li>The hash map has a 'table' which is a fixed size array. Each array
element is a pointer to a linked list node or <code>NULL</code>.</li>
<li>Items in the hash table are stored in linked list nodes including
the lookup <b>key</b> and <b>value</b> associated with the key. Items that
hash to the same table location are stored in the list at that
location</li>
<li>A <code>hashcode()</code> function is provided which generates an integer from
a string and is the first step to determining where key/value is
located.</li>
</ul>

<p>
Examine the header file <code>hashmap.h</code> to see the two C structs which will
be used to represent hash tables.
</p>
<div class="org-src-container">
<pre class="src src-c">// Type for linked list nodes in hash map
typedef struct hashnode {
  char key[128];                // string key for items in the map
  char val[128];                // string value for items in the map
  struct hashnode *next;        // pointer to next node, NULL if last node
} hashnode_t;

// Type of hash table
typedef struct {
  int item_count;               // how many key/val pairs in the table
  int table_size;               // how big is the table array
  hashnode_t **table;           // array of pointers to nodes which contain key/val pairs
} hashmap_t;
</pre>
</div>

<p>
Standard operations are supported by the hash map.
</p>
<ul class="org-ul">
<li>Adding key/val pairs</li>
<li>Searching for the value associated with a key</li>
<li>Altering the value associated with a key</li>
<li>Clearing the entire hash map</li>
<li>Printing the key/value pairs in the hash map</li>
<li>Expanding the memory used by the hash map to improve lookup
performance.</li>
</ul>

<p>
These are broken down into the following C functions which you will
need to implement in <code>hashmap_funcs.c</code> except for the first <code>hashcode()</code>
function which is provided.  
</p>

<pre class="example" id="org34b94a5">
// hashmap_funcs.c: utility functions for operating on hash maps. Most
// functions are used in hash_main.c which provides an application to
// work with the functions.

long hashcode(char key[]);
// PROVIDED: Compute a simple hash code for the given character
// string. The code is "computed" by casting the first 8 characters of
// the string to a long and returning it. The empty string has hash
// code 0. If the string is a single character, this will be the ASCII
// code for the character (e.g. "A" hashes to 65).  Longer strings
// will have numbers which are the integer interpretation of up to
// their first 8 bytes.  ADVANTAGE: constant time to compute the hash
// code. DISADVANTAGE: poor distribution for long strings; all strings
// with same first 8 chars hash to the same location.

void hashmap_init(hashmap_t *hm, int table_size);
// Initialize the hash map 'hm' to have given size and item_count
// 0. Ensures that the 'table' field is initialized to an array of
// size 'table_size' and filled with NULLs. 

int hashmap_put(hashmap_t *hm, char key[], char val[]);
// Adds given key/val to the hash map. 'hashcode(key) modulo
// table_size' is used to calculate the position to insert the
// key/val.  Searches the entire list at the insertion location for
// the given key. If key is not present, a new node is added. If key
// is already present, the current value is altered in place to the
// given value "val" (no duplicate keys are every introduced).  If new
// nodes are added, increments field "item_count".  Makes use of
// standard string.h functions like strcmp() to compare strings and
// strcpy() to copy strings. Lists in the hash map are arbitrarily
// ordered (not sorted); new items are always appended to the end of
// the list.  Returns 1 if a new node is added (new key) and 0 if an
// existing key has its value modified.

char *hashmap_get(hashmap_t *hm, char key[]);
// Looks up value associated with given key in the hashmap. Uses
// hashcode() and field "table_size" to determine which index in table
// to search.  Iterates through the list at that index using strcmp()
// to check for matching key. If found, returns a pointer to the
// associated value.  Otherwise returns NULL to indicate no associated
// key is present.

void hashmap_free_table(hashmap_t *hm);
// De-allocates the hashmap's "table" field. Iterates through the
// "table" array and its lists de-allocating all nodes present
// there. Subsequently de-allocates the "table" field and sets all
// fields to 0 / NULL. Does NOT attempt to free 'hm' as it may be
// stack allocated.

void hashmap_show_structure(hashmap_t *hm);
// Displays detailed structure of the hash map. Shows stats for the
// hash map as below including the load factor (item count divided
// by table_size) to 4 digits of accuracy.  Then shows each table
// array index ("bucket") on its own line with the linked list of
// key/value pairs on the same line. The hash code for keys is appears
// prior to each key.  EXAMPLE:
// 
// item_count: 6
// table_size: 5
// load_factor: 1.2000
//   0 : {(65) A : 1} 
//   1 : 
//   2 : {(122) z : 3} {(26212) df : 6} 
//   3 : {(98) b : 2} {(25443) cc : 5} 
//   4 : {(74) J : 4} 
//
// NOTES:
// - Uses format specifier "%3d : " to print the table indices
// - Shows the following information for each key/val pair
//   {(25443) cc : 5}
//     |      |    |
//     |      |    +-&gt; value
//     |      +-&gt; key
//     +-&gt; hashcode("cc"), print using format "%ld" for 64-bit longs

void hashmap_write_items(hashmap_t *hm, FILE *out);
// Outputs all elements of the hash table according to the order they
// appear in "table". The format is
// 
//       Peach : 3.75
//      Banana : 0.89
//  Clementine : 2.95
// DragonFruit : 10.65
//       Apple : 2.25
// 
// with each key/val on a separate line. The format specifier
//   "%12s : %s\n"
// 
// is used to achieve the correct spacing. Output is done to the file
// stream 'out' which is standard out for printing to the screen or an
// open file stream for writing to a file as in hashmap_save().

void hashmap_save(hashmap_t *hm, char *filename);
// Writes the given hash map to the given 'filename' so that it can be
// loaded later.  Opens the file and writes its 'table_size' and
// 'item_count' to the file. Then uses the hashmap_write_items()
// function to output all items in the hash map into the file.
// EXAMPLE FILE:
// 
// 5 6
//            A : 2
//            Z : 2
//            B : 3
//            R : 6
//           TI : 89
//            T : 7
// 
// First two numbers are the 'table_size' and 'item_count' field and
// remaining text are key/val pairs.

int hashmap_load(hashmap_t *hm, char *filename);
// Loads a hash map file created with hashmap_save(). If the file
// cannot be opened, prints the message
// 
// ERROR: could not open file 'somefile.hm'
//
// and returns 0 without changing anything. Otherwise clears out the
// current hash map 'hm', initializes a new one based on the size
// present in the file, and adds all elements to the hash map. Returns
// 1 on successful loading. This function does no error checking of
// the contents of the file so if they are corrupted, it may cause an
// application to crash or loop infinitely.

int next_prime(int num);
// If 'num' is a prime number, returns 'num'. Otherwise, returns the
// first prime that is larger than 'num'. Uses a simple algorithm to
// calculate primeness: check if any number between 2 and (num/2)
// divide num. If none do, it is prime. If not, tries next odd number
// above num. Loops this approach until a prime number is located and
// returns this. Used to ensure that hash table_size stays prime which
// theoretically distributes elements better among the array indices
// of the table.

void hashmap_expand(hashmap_t *hm);
// Allocates a new, larger area of memory for the "table" field and
// re-adds all items currently in the hash table to it. The size of
// the new table is next_prime(2*table_size+1) which keeps the size
// prime.  After allocating the new table, all entries are initialized
// to NULL then the old table is iterated through and all items are
// added to the new table according to their hash code. The memory for
// the old table is de-allocated and the new table assigned to the
// hashmap fields "table" and "table_size".  This function increases
// "table_size" while keeping "item_count" the same thereby reducing
// the load of the hash table. Ensures that all memory associated with
// the old table is free()'d (linked nodes and array). Cleverly makes
// use of existing functions like hashmap_init(), hashmap_put(),
// and hashmap_free_table() to avoid re-writing algorithms
// implemented in those functions.

</pre>
</div>
</div>

<div id="outline-container-org2bdeb5e" class="outline-3">
<h3 id="org2bdeb5e"><span class="section-number-3">5.4</span> <a id="orgca36de4"></a> Provided <code>hash_code()</code> Function</h3>
<div class="outline-text-3" id="text-5-4">
<p>
The code for <code>hash_code()</code> is provided below. All hash tables require
a means of converting keys into a non-unique number. For consistency,
we will use the below code which employs several interesting C tricks
that will be discussed of the progression of the class. Some of the
advantages/disadvantages of the hash function are mentioned in the
comments.
</p>

<pre class="example" id="org68d3406">
// PROVIDED: Compute a simple hash code for the given character
// string. The code is "computed" by casting the first 8 characters of
// the string to a long and returning it. The empty string has hash
// code 0. If the string is a single character, this will be the ASCII
// code for the character (e.g. "A" hashes to 65).  Longer strings
// will have numbers which are the integer interpretation of up to
// their first 8 bytes.  ADVANTAGE: constant time to compute the hash
// code. DISADVANTAGE: poor distribution for long strings; all strings
// with same first 8 chars hash to the same location.
long hashcode(char key[]){
  union {
    char str[8];
    long num;
  } strnum;
  strnum.num = 0;

  for(int i=0; i&lt;8; i++){
    if(key[i] == '\0'){
      break;
    }
    strnum.str[i] = key[i];
  }
  return strnum.num;
}
</pre>
</div>
</div>

<div id="outline-container-org448e000" class="outline-3">
<h3 id="org448e000"><span class="section-number-3">5.5</span> <code>hashmap_main.c</code>: main function / application</h3>
<div class="outline-text-3" id="text-5-5">
<p>
In <code>hashmap_main.c</code> implement an interactive program which allows users
to type commands to manipulate the hash map. 
</p>

<p>
The provided <code>Makefile</code> should compile the <code>hashmap_main</code> program as follows.
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt; make hashmap_main                # Compile with Makefile
gcc -Wall -g -lm -c hashmap_main.c
gcc -Wall -g -lm -c hashmap_funcs.c
gcc -Wall -g -lm -o hashmap_main hashmap_main.o hashmap_funcs.o

&gt; ./hashmap_main                   # Run hashmap_main application
Hashmap Main
Commands:
  hashcode &lt;key&gt;   : prints out the numeric hash code for the given key (does not change the hash map)
  put &lt;key&gt; &lt;val&gt;  : inserts the given key/val into the hash map
  get &lt;key&gt;        : prints the value associated with the given key or NOT FOUND
  print            : shows contents of the hashmap ordered by how they appear in the table
  structure        : prints detailed structure of the hash map
  clear            : reinitializes hash map to be empty with default size
  save &lt;file&gt;      : writes the contents of the hash map the given file
  load &lt;file&gt;      : clears the current hash map and loads the one in the given file
  next_prime &lt;int&gt; : if &lt;int&gt; is prime, prints it, otherwise finds the next prime and prints it
  expand           : expands memory size of hashmap to reduce its load factor
  quit             : exit the program
HM&gt; 
</pre>
</div>

<p>
The following sections provide some implementation details.
</p>
</div>

<div id="outline-container-orgdfa2ade" class="outline-4">
<h4 id="orgdfa2ade">Read commands, Execute</h4>
<div class="outline-text-4" id="text-orgdfa2ade">
<p>
The basic flow of <code>hashmap_main.c</code> follows the same pattern that code for
a lab exercise demonstrates.  A good way to get started on the main
application is to <b>copy over the lab solution</b> and begin modifying it.
</p>
<ul class="org-ul">
<li>Create a <code>hashmap_t</code> variable, likely on the stack as a local variable in
<code>main()</code></li>
<li>Start a loop that terminates when the user exits or there is no more
input</li>
<li>Each time the user enters a string, read it and check for one of the
built-in commands</li>
<li>On identifying the command, potentially read another string if
needed (commands like <code>put</code> and <code>get</code>)</li>
<li>Call an appropriate <code>hashmap_XXX()</code> function to handle the command</li>
</ul>
</div>
</div>

<div id="outline-container-org113ca5c" class="outline-4">
<h4 id="org113ca5c">Supported Commands</h4>
<div class="outline-text-4" id="text-org113ca5c">
<p>
To indicate to users of the program the supported commands, use the
following code to print out the initial option list.
</p>

<pre class="example" id="org0437fa7">
  printf("Hashmap Main\n");
  printf("Commands:\n");
  printf("  hashcode &lt;key&gt;   : prints out the numeric hash code for the given key (does not change the hash map)\n");
  printf("  put &lt;key&gt; &lt;val&gt;  : inserts the given key/val into the hash map, overwrites existing values if present\n");
  printf("  get &lt;key&gt;        : prints the value associated with the given key or NOT FOUND\n");
  printf("  print            : shows contents of the hashmap ordered by how they appear in the table\n");
  printf("  structure        : prints detailed structure of the hash map\n");
  printf("  clear            : reinitializes hash map to be empty with default size\n");
  printf("  save &lt;file&gt;      : writes the contents of the hash map the given file\n");
  printf("  load &lt;file&gt;      : clears the current hash map and loads the one in the given file\n");
  printf("  next_prime &lt;int&gt; : if &lt;int&gt; is prime, prints it, otherwise finds the next prime and prints it\n");
  printf("  expand           : expands memory size of hashmap to reduce its load factor\n");
  printf("  quit             : exit the program\n");
</pre>
</div>
</div>

<div id="outline-container-org15837e2" class="outline-4">
<h4 id="org15837e2">Clearing Hashmaps</h4>
<div class="outline-text-4" id="text-org15837e2">
<p>
When issuing the <code>clear</code> command, the contents of the current hash map
should be eliminated and the hash map reinitialized to the default
size. This is most easily done via.
</p>
<ol class="org-ol">
<li>Using the <code>hashmap_free_table()</code> function</li>
<li>Using <code>hashmap_init()</code> with the <code>HASHMAP_DEFAULT_TABLE_SIZE</code>
constant defined in <code>hashmap.h</code>.</li>
</ol>
</div>
</div>



<div id="outline-container-org9fa2f63" class="outline-4">
<h4 id="org9fa2f63"><a id="orgd4aa553"></a> Paths to Files for Saving and Loading</h4>
<div class="outline-text-4" id="text-org9fa2f63">
<p>
Saving and loading data involves writing to files. The names
associated with the files must be specified as a <i>path</i> so that if
files are to be saved or loaded from subdirectories, include this
as part of the path.  For example, the <code>stranger.hm</code> file is
provided in the <code>data/</code> directory and once loading functionality is
code, it can be loaded as follows.
</p>
<div class="org-src-container">
<pre class="src src-sh">p1-code&gt; ./hashmap_main
..
HM&gt; load data/stranger.hm                 # load the provided hash map from a subdirectory
HM&gt; print                                 # show contents of hash map
        Will : lost
        Mike : DM
      Dustin : corny
       Steve : hairy
        Barb : ran-away?
       Nancy : torn
          El : weird
       Lucas : brash

HM&gt; structure                             # show internal structure of the hash map
item_count: 8
table_size: 11
load_factor: 0.7273
  0 : {(1819044183) Will : lost} 
  1 : {(1701538125) Mike : DM} {(121399204345156) Dustin : corny} 
  2 : {(435778057299) Steve : hairy} 
  3 : {(1651663170) Barb : ran-away?} 
  4 : 
  5 : 
  6 : {(521359221070) Nancy : torn} 
  7 : 
  8 : {(27717) El : weird} {(495555147084) Lucas : brash} 
  9 : 
 10 : 

HM&gt; put Demigorgon scary                  # add more data
HM&gt; save cur.hm                           # save in the current directory
HM&gt; clear                                 # clear hash map
HM&gt; print                                 # show contents are empty
HM&gt; load cur.hm                           # reload from file in current directory
HM&gt; print                                 # show contents are restored from save
        Will : lost
        Mike : DM
      Dustin : corny
       Steve : hairy
        Barb : ran-away?
       Nancy : torn
  Demigorgon : scary
          El : weird
       Lucas : brash

HM&gt; put Jim cop                           # add more data
HM&gt; save data/new.hm                      # save in a copy in 'data' subdirectory
HM&gt; quit
</pre>
</div>
</div>
</div>

<div id="outline-container-org51c7bac" class="outline-4">
<h4 id="org51c7bac">Failing to Load Files</h4>
<div class="outline-text-4" id="text-org51c7bac">
<p>
If a file cannot be opened with the <code>load 'file.hm'</code> command, the
underlying <code>hashmap_load()</code> should print an error of the form
</p>
<div class="org-src-container">
<pre class="src src-text">ERROR: could not open file 'somefile.hm'
</pre>
</div>
<p>
and the <code>hashmap_main.c</code> main loop should NOT change the hash map and
print the message
</p>
<div class="org-src-container">
<pre class="src src-text">load failed
</pre>
</div>
<p>
in response to the error. Below is a demonstration of this from the
automated tests.
</p>
<div class="org-src-container">
<pre class="src src-sh">...
HM&gt; print                            # hash map has contents
           A : 1
           C : 3
           D : 4
           E : 2

HM&gt; load test-data/not-there.tmp     # attempt to load a non-existent file
ERROR: could not open file 'test-data/not-there.tmp'
load failed
HM&gt; print                            # hash map is unchanged
           A : 1
           C : 3
           D : 4
           E : 2

</pre>
</div>
</div>
</div>

<div id="outline-container-org168d69a" class="outline-4">
<h4 id="org168d69a">Command Echoing: <code>-echo</code> option to <code>hashmap_main</code></h4>
<div class="outline-text-4" id="text-org168d69a">
<p>
Some users may wish to "script" this the main program: allow it to
process input commands from a file rather than from the user typing.
This notion is discussed in a lab and should be reviewed if it is
unfamiliar.
</p>

<p>
An example of an input script is in <code>data/hash-demo.script</code> which
looks like a lot of user commands:
</p>
<div class="org-src-container">
<pre class="src src-text">put Lucas brash
put Mike DM
put Dustin corny
put Will lost
print
get Dustin
get El
get Lucas
get Jim
put El weird
put Steve hairy
put Nancy torn
put Barb ran-away?
print
hashcode Lucas
hashcode Barb
structure
expand
structure
save stranger.hm
clear
print
structure
put Jim cop
put Joyce worried
print
structure
get Dustin
get Joyce
load stranger.hm
print
structure
get Dustin
get Joyce
put Will found
put Nancy decided
put Mike girl-crazy
print
structure
next_prime 10
next_prime 25
expand
structure
save data/other.hm
quit 
</pre>
</div>

<p>
The file can be fed directly to the program without needing type it
using Unix pipes as per the following:
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; cat data/hash-demo.script | ./hashmap_main -echo
</pre>
</div>
<p>
Notice the use of a command line argument for <code>hashmap_main</code>: the <code>-echo</code>
option. This is a REQUIRED feature which prints commands typed by
users to the screen. To implement this, do the following.
</p>

<p>
Model the structure of command echoing after what is shown in related
Lab work.
</p>
<ul class="org-ul">
<li>Use a variable in <code>main()</code> to indicate whether command echoing is on
or off; set it to off by default</li>
<li><p>
Check when <code>main()</code> starts  whether command line argument 1 is set
to <code>-echo</code> in which case turn echoing on. A condition like the
following is useful.
</p>
<div class="org-src-container">
<pre class="src src-c">  if(argc &gt; 1 &amp;&amp; strcmp("-echo",argv[1])==0) {
</pre>
</div></li>
<li>Each command should check for echoing and print the command being
run along with any arguments to it. This technique is demonstrated
in related lab work.</li>
</ul>

<p>
It will take some work to get the exact placement of echoes correct
but will ultimately lead to nice results that involve LITTLE typing
like the example below.
</p>

<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; cat data/hash-demo.script | ./hashmap_main -echo
Hashmap Main
Commands:
  hashcode &lt;key&gt;   : prints out the numeric hash code for the given key (does not change the hash map)
  put &lt;key&gt; &lt;val&gt;  : inserts the given key/val into the hash map, overwrites existing values if present
  get &lt;key&gt;        : prints the value associated with the given key or NOT FOUND
  print            : shows contents of the hashmap ordered by how they appear in the table
  structure        : prints detailed structure of the hash map
  clear            : reinitializes hash map to be empty with default size
  save &lt;file&gt;      : writes the contents of the hash map the given file
  load &lt;file&gt;      : clears the current hash map and loads the one in the given file
  next_prime &lt;int&gt; : if &lt;int&gt; is prime, prints it, otherwise finds the next prime and prints it
  expand           : expands memory size of hashmap to reduce its load factor
  quit             : exit the program
HM&gt; put Lucas brash
HM&gt; put Mike DM
HM&gt; put Dustin corny
HM&gt; put Will lost
HM&gt; print
        Mike : DM
      Dustin : corny
        Will : lost
       Lucas : brash
HM&gt; get Dustin
FOUND: corny
HM&gt; get El
NOT FOUND
HM&gt; get Lucas
FOUND: brash
HM&gt; get Jim
NOT FOUND
HM&gt; put El weird
HM&gt; put Steve hairy
HM&gt; put Nancy torn
HM&gt; put Barb ran-away?
HM&gt; print
        Mike : DM
       Nancy : torn
        Barb : ran-away?
      Dustin : corny
          El : weird
        Will : lost
       Lucas : brash
       Steve : hairy
HM&gt; hashcode Lucas
1633908044
HM&gt; hashcode Barb
1651663170
HM&gt; structure
item_count: 8
table_size: 5
load_factor: 1.6000
  0 : {(1701538125) Mike : DM} {(521359221070) Nancy : torn} {(1651663170) Barb : ran-away?} 
  1 : {(121399204345156) Dustin : corny} 
  2 : {(27717) El : weird} 
  3 : {(1819044183) Will : lost} 
  4 : {(495555147084) Lucas : brash} {(435778057299) Steve : hairy} 
HM&gt; expand
HM&gt; structure
item_count: 8
table_size: 11
load_factor: 0.7273
  0 : {(1819044183) Will : lost} 
  1 : {(1701538125) Mike : DM} {(121399204345156) Dustin : corny} 
  2 : {(435778057299) Steve : hairy} 
  3 : {(1651663170) Barb : ran-away?} 
  4 : 
  5 : 
  6 : {(521359221070) Nancy : torn} 
  7 : 
  8 : {(27717) El : weird} {(495555147084) Lucas : brash} 
  9 : 
 10 : 
HM&gt; save stranger.hm
HM&gt; clear
HM&gt; print
HM&gt; structure
item_count: 0
table_size: 5
load_factor: 0.0000
  0 : 
  1 : 
  2 : 
  3 : 
  4 : 
HM&gt; put Jim cop
HM&gt; put Joyce worried
HM&gt; print
       Joyce : worried
         Jim : cop
HM&gt; structure
item_count: 2
table_size: 5
load_factor: 0.4000
  0 : 
  1 : {(435460599626) Joyce : worried} 
  2 : 
  3 : {(7170378) Jim : cop} 
  4 : 
HM&gt; get Dustin
NOT FOUND
HM&gt; get Joyce
FOUND: worried
HM&gt; load stranger.hm
HM&gt; print
        Will : lost
        Mike : DM
      Dustin : corny
       Steve : hairy
        Barb : ran-away?
       Nancy : torn
          El : weird
       Lucas : brash
HM&gt; structure
item_count: 8
table_size: 11
load_factor: 0.7273
  0 : {(1819044183) Will : lost} 
  1 : {(1701538125) Mike : DM} {(121399204345156) Dustin : corny} 
  2 : {(435778057299) Steve : hairy} 
  3 : {(1651663170) Barb : ran-away?} 
  4 : 
  5 : 
  6 : {(521359221070) Nancy : torn} 
  7 : 
  8 : {(27717) El : weird} {(495555147084) Lucas : brash} 
  9 : 
 10 : 
HM&gt; get Dustin
FOUND: corny
HM&gt; get Joyce
NOT FOUND
HM&gt; put Will found
Overwriting previous key/val
HM&gt; put Nancy decided
Overwriting previous key/val
HM&gt; put Mike girl-crazy
Overwriting previous key/val
HM&gt; print
        Will : found
        Mike : girl-crazy
      Dustin : corny
       Steve : hairy
        Barb : ran-away?
       Nancy : decided
          El : weird
       Lucas : brash
HM&gt; structure
item_count: 8
table_size: 11
load_factor: 0.7273
  0 : {(1819044183) Will : found} 
  1 : {(1701538125) Mike : girl-crazy} {(121399204345156) Dustin : corny} 
  2 : {(435778057299) Steve : hairy} 
  3 : {(1651663170) Barb : ran-away?} 
  4 : 
  5 : 
  6 : {(521359221070) Nancy : decided} 
  7 : 
  8 : {(27717) El : weird} {(495555147084) Lucas : brash} 
  9 : 
 10 : 
HM&gt; next_prime 10
11
HM&gt; next_prime 25
29
HM&gt; expand
HM&gt; structure
item_count: 8
table_size: 23
load_factor: 0.3478
  0 : 
  1 : 
  2 : {(27717) El : weird} 
  3 : 
  4 : {(1651663170) Barb : ran-away?} {(495555147084) Lucas : brash} 
  5 : 
  6 : 
  7 : 
  8 : {(121399204345156) Dustin : corny} 
  9 : 
 10 : {(521359221070) Nancy : decided} 
 11 : {(1701538125) Mike : girl-crazy} {(435778057299) Steve : hairy} 
 12 : {(1819044183) Will : found} 
 13 : 
 14 : 
 15 : 
 16 : 
 17 : 
 18 : 
 19 : 
 20 : 
 21 : 
 22 : 
HM&gt; save data/other.hm
HM&gt; quit
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8326d82" class="outline-3 grading 40">
<h3 id="org8326d82"><span class="section-number-3">5.6</span> Grading Criteria for P3&#xa0;&#xa0;&#xa0;<span class="tag"><span class="grading">grading</span>&#xa0;<span class="40">40</span></span></h3>
<div class="outline-text-3" id="text-5-6">
<p>
The following criteria will be checked in this problem.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Weight</th>
<th scope="col" class="org-left">Criteria</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">AUTOMATED TESTS via <code>make test-prob3</code></td>
</tr>

<tr>
<td class="org-right">20</td>
<td class="org-left"><code>test_hashmap.org</code> tests</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">20 tests for <code>hashmap_main</code> executable, exercises functions in <code>hashmap_funcs.c</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">All tests run under Valgrind</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">1 point per test passed</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Code compiles without warnings (<code>make clean</code> followed by <code>make test-prob3</code> gives no errors/warnings)</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">NOTE: run individual tests via <code>make test-prob3 testnum=4</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">MANUAL INSPECTION</td>
</tr>

<tr>
<td class="org-right">15</td>
<td class="org-left"><code>hashmap_funcs.c</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear commenting indicating intent during functions "calculate table index" or "iterate through list"</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Relatively short functions: nothing needs to be too long (50 lines tops)</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clearly written iteration loops to traverse linked lists in hash map functions</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of <code>strcmp()</code> to check keys during put/get operations</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Concise and commented code for <code>hashmap_put()</code> which calculates table position and inserts into the list there</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>hashmap_free_table()</code> frees all list elements and the table array, assigns 0/NULL to fields</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>hashmap_save()</code> makes use of <code>hashmap_write()</code> with an open file handle to avoid redundant code</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>hashmap_load()</code> checks that files open successfully and uses <code>hashmap_free_table()</code> to de-allocate memory</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">File closed after finished during saving and loading</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>next_prime()</code> is clearly written and easy to follow; the algorithm used is explained in comments</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>hashmap_expand()</code> uses other functions in such as <code>next_prime()</code>, <code>hashmap_init()</code> and <code>hashmap_free_table()</code> to avoid repeating code.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left"><code>hashmap_main.c</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Comments indicating what high-level command is being implemented in each part of <code>main</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear structure of main loop, reading commands, selecting actions</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of string functions to identify which command to execute</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear efforts to honor <code>-echo</code> option and echo commands</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear effort to free all memory prior to exit by clearing hashmap on exit</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


<div id="outline-container-org7ff0f38" class="outline-2">
<h2 id="org7ff0f38"><span class="section-number-2">6</span> Assignment Submission</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org0d03cfc" class="outline-3">
<h3 id="org0d03cfc"><span class="section-number-3">6.1</span> <a id="org1e06862"></a> Submit to Gradescope</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Refer to the Project 1 instructions and adapt them for details of how
to submit to Gradescope. In summary they are
</p>

<ol class="org-ol">
<li>Type <code>make zip</code> in the project directory to create <code>p2-code.zip</code></li>
<li>Log into <a href="https://www.gradescope.com/">Gradescope</a>, select Project 2, and upload <code>p2-code.zip</code></li>
</ol>
</div>
</div>

<div id="outline-container-org13ba995" class="outline-3">
<h3 id="org13ba995"><span class="section-number-3">6.2</span> Late Policies</h3>
<div class="outline-text-3" id="text-6-2">
<p>
You may wish to review the policy on late project submission which
will cost 1 Engagement Point per day late. <b>No projects will be
accepted more than 48 hours after the deadline.</b>
</p>


<p>
<a href="https://www.cs.umd.edu/~profk/216/syllabus.html#late-submission">https://www.cs.umd.edu/~profk/216/syllabus.html#late-submission</a>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr/> <i> <a href="https://www.umd.edu/web-accessibility" title="UMD Web Accessibility">Web Accessibility</a> <br/> Author: Chris Kauffman (<a href="mailto:profk@umd.edu">profk@umd.edu</a>) <br/> Date: 2024-03-04 Mon 10:54 <br/> </i>
</div>
</body>
</html>
