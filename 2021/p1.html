<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-02-03 Fri 10:50 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CSCI 2021 Project 1: C Programming</title>
<meta name="author" content="Chris Kauffman" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<meta name="viewport" content="width=device-width, maximum-scale=1, minimum-scale=1" />
<style type="text/css">
@media screen {
:root {
--heading-bg-color:#e8c62e;
--heading-fg-color:#7a0019;
}
html {
font-family: serif;
text-align: justify;
}
pre.src, pre.example {
overflow-x: scroll;
}
/* Merge subtitle area with title area */
.subtitle {
text-align: center;
margin-top: -2em;
padding-top: 1em;
padding-bottom: 0.1em;
}
.title, .subtitle {
color: var(--heading-fg-color);
background-color: var(--heading-bg-color);
}
/* Section borders, left section header style */
div.outline-2, #table-of-contents {
background-color: rgb(250,250,250);
border: 0.75em solid var(--heading-bg-color);
border-top: 0em;
padding: 0em .5em .5em .5em; /* top right bottom left */
margin: 1em 0em 1em 0em; /* top right bottom left */
}
div.outline-2 > h2, #table-of-contents > h2 {
background-color: var(--heading-bg-color);
color: var(--heading-fg-color);
font-variant: small-caps;
padding: 0em 0em 0em .5em; /* top right bottom left */
margin: 0em -.5em 0em -.75em; /* top right bottom left */
text-align: left;
}
blockquote {
font-style: italic;
}
td, th {
padding-top: 2px;
padding-bottom: 2px;
}
body {
background-color: #EEE;
}
pre {
}
#content, #preamble, #postamble {
margin-left:300px;
max-width: 100%;
}
.tag {
background-color: inherit; font-family: inherit;
padding: inherit; font-size: 80%; font-weight: inherit;
text-transform: uppercase;
}

.figure p { text-align: inherit; }
figure-number { font-style: italic; }
#table-of-contents {
text-align: left;
position: fixed;
left: 0;
margin: 0 auto;
padding: 0;
width: 300px;
top: 0;
height: 100%;
border: 0;
display: block;
}
#text-table-of-contents {
overflow-y: scroll;
height: 100%;
}
#text-table-of-contents ul {
padding-left: 1em;
margin-left: 0.5em;
}
#table-of-contents > h2 {
padding: 0.1em;
margin: 0;
}
/* adjustments for small screen, toc at top only */
@media (max-width: 800px) { /* landscape for iphone */
html {
-webkit-text-size-adjust: none;  /* prevent scaling of text on mobile */
}
body {
background-color: #EEE;
width:100%;
margin:0 auto;
}
#content, #preamble, #postamble {
margin-left:0;
}
#table-of-contents {
position: static;
left: inherit;
width:inherit;
height: auto;
border-top: 0em;
padding: 0em .5em .5em .5em; /* top right bottom left */
margin: 1em 0em 1em 0em; /* top right bottom left */
border: 0.75em solid #006633;
}
div.outline-2, #table-of-contents {
background-color: rgb(250,250,250);
border: 0.75em solid var(--heading-bg-color);
border-top: 0em;
padding: 0em .5em .5em .5em; /* top right bottom left */
margin: 1em 0em 1em 0em; /* top right bottom left */
}
div.outline-2 > h2, #table-of-contents > h2 {
background-color: var(--heading-bg-color);
color: var(--heading-fg-color);
font-variant: small-caps;
padding: 0em 0em 0em .5em; /* top right bottom left */
margin: 0em -.5em 0em -.75em; /* top right bottom left */
text-align: left;
}
#text-table-of-contents {
overflow-y: visible;
height: inherit;
}
#text-table-of-contents ul {
padding-left: 1em;
margin-left: 0.5em;
}
}
.linenr { font-size: xx-small; }
}

@media print {
html {
font-family: serif;
font-size: 10pt;
text-align: justify;
.linenr { font-size: xx-small; }
}
}
</style>
</head>
<body>
<div id="preamble" class="status">
<i>Last Updated: 2023-02-03 Fri 10:50</i>
</div>
<div id="content" class="content">
<h1 class="title">CSCI 2021 Project 1: C Programming</h1>
<ul class="org-ul">
<li><b>Due: 11:59pm Wed 08-Feb-2023</b></li>
<li><i>Approximately 4.0% of total grade</i></li>
<li>Submit to <a href="https://www.gradescope.com/"><b>Gradescope</b></a></li>
<li>Projects are <b>individual work</b>: no collaboration with other students
is allowed. Seek help from course staff if you get stuck for too long.</li>
</ul>

<div id="outline-container-orgeaae8e0" class="outline-4">
<h4 id="orgeaae8e0">CODE DISTRIBUTION: <a href="p1-code.zip">p1-code.zip</a></h4>
</div>
<div id="outline-container-org9001742" class="outline-4">
<h4 id="org9001742">VIDEO OVERVIEW: <a href="https://youtu.be/E4tc68LsS0k">https://youtu.be/E4tc68LsS0k</a></h4>
</div>
<div id="outline-container-org1c72c84" class="outline-4">
<h4 id="org1c72c84">VIDEO TUTORIAL: <a href="https://drive.google.com/file/d/1quG6XBly6PNuodPMRIDXPts5SlFKCAm3/view?usp=drive_web">P1 Online Tutorial Video</a></h4>
</div>
<div id="outline-container-org5854289" class="outline-4">
<h4 id="org5854289">CHANGELOG:</h4>
<div class="outline-text-4" id="text-org5854289">
<dl class="org-dl">
<dt>Fri Feb  3 10:49:36 AM CST 2023</dt><dd><p>
The original documentation for
<code>hashset_load()</code> indicated an incorrect return value for a
successful load. The docs have been fixed to read
</p>
<pre class="example">
Returns 1 on successful loading
</pre></dd>

<dt>Thu Feb  2 10:03:27 AM CST 2023</dt><dd><p>
The Gradescope submission link
for Project 1 is now active. Make sure to submit with enough time
before the deadline to view the online test results and deal with
errors such as submitting the wrong zip.
</p>

<p>
The Wed 01-Feb Tutorial session on Zoom was successfully recorded
and the video of it is available here: <a href="https://drive.google.com/file/d/1quG6XBly6PNuodPMRIDXPts5SlFKCAm3/view?usp=drive_web">P1 Online Tutorial Video</a>.
</p>

<p>
Students reported that one of the provided files
<code>demo_test_hash_init.c</code> did not compile. This is because it was not
updated from a previous version of the project. The file has now
fixed and can be updated via <code>make sanity-restore</code>.  The file is
just present to show some of the syntax around accessing parts of
the hash table structs and is not actually used in testing.
</p></dd>

<dt>Mon Jan 30 01:14:32 PM CST 2023</dt><dd><p>
A but in the <code>Makefile</code> was
reported that makes it unreliable to run tests for problem 2 via
<code>make test-prob2</code>. This bug has been fixed and students can
automatically update their <code>Makefile</code> by typing the command
</p>
<pre class="example">
make sanity-restore
</pre>

<p>
which will download and install the updated <code>Makefile</code>.
</p></dd>
<dt>Mon Jan 30 11:46:51 AM CST 2023</dt><dd>A video overview of Project 1 is
now available linked at the top of P1 specification and directly
here: <a href="https://youtu.be/E4tc68LsS0k">https://youtu.be/E4tc68LsS0k</a></dd>
</dl>
</div>
</div>

<div id="outline-container-org47cdc02" class="outline-4">
<h4 id="org47cdc02"></h4>
<div class="outline-text-4" id="text-org47cdc02">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org5d89328">1. Introduction</a>
<ul>
<li><a href="#org4cb7350">1.1. Grading Criteria</a></li>
<li><a href="#org75798bd">1.2. Getting Started</a></li>
</ul>
</li>
<li><a href="#orgcbae5d2">2. Download Code, Setup, and Automated Tests</a>
<ul>
<li><a href="#org563c3dd">2.1. Makefile</a></li>
<li><a href="#orge4978cb">2.2. Automated Tests</a></li>
</ul>
</li>
<li><a href="#org88ede07">3. <b>Problem 1</b>: Stock Plotting</a>
<ul>
<li><a href="#org2f8cbf7">3.1. Overview and Demo</a></li>
<li><a href="#org80928c1">3.2. Outline of <code>stock_funcs.c</code></a></li>
<li><a href="#org3907df7">3.3. Editing and Testing</a></li>
<li><a href="#orgbffded5">3.4. Implementation Notes</a></li>
<li><a href="#orgd51335c">3.5. Grading Criteria for Problem 1</a></li>
</ul>
</li>
<li><a href="#orgda9b06f">4. <b>Problem 2</b>: Completing Stock Plot</a>
<ul>
<li><a href="#org8feaa70">4.1. Overview</a></li>
<li><a href="#orgffa85e3">4.2. Setting Min/Max Index</a></li>
<li><a href="#orgc6f642f">4.3. Best Buy/Sell Index</a></li>
<li><a href="#org1b256e6">4.4. Stock Files</a></li>
<li><a href="#org919112d">4.5. Counting Lines</a></li>
<li><a href="#orgda62b9f">4.6. Loading Stock Files</a></li>
<li><a href="#org0e72e1a">4.7. Plotting Stocks</a></li>
<li><a href="#orgb2fbc9b">4.8. Optional MAKEUP CREDIT</a></li>
<li><a href="#org7d50c75">4.9. Grading Criteria for Problem 2</a></li>
</ul>
</li>
<li><a href="#org8ad54c3">5. <b>Problem 3</b>: Hash Tables in C</a>
<ul>
<li><a href="#orgf1567ed">5.1. Overview</a></li>
<li><a href="#org9daa893">5.2. <code>hashset_main</code> Demonstration</a></li>
<li><a href="#orgc08fb0a">5.3. Diagram of Hash Set Data structures</a></li>
<li><a href="#org6f93202">5.4. <code>hashset_funcs.c</code>: Hash Table Functions</a></li>
<li><a href="#org885fed5">5.5. Provided <code>hash_code()</code> Function</a></li>
<li><a href="#orgf9ae260">5.6. <code>hashset_main.c</code>: main function / application</a></li>
<li><a href="#orgc15a357">5.7. Grading Criteria for Problem 3</a></li>
</ul>
</li>
<li><a href="#orgcad914e">6. Project Submission</a>
<ul>
<li><a href="#org47dab47">6.1. Submit to Gradescope</a></li>
<li><a href="#org00133b5">6.2. Late Policies</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org5d89328" class="outline-2">
<h2 id="org5d89328"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
Basic application programming in C is an essential step downward
towards the lower levels of computing. This project explores
fundamental aspects of getting work done in C:
</p>
<ul class="org-ul">
<li>Dynamic memory management with <code>malloc()/free()</code></li>
<li>Reading data from files in text format</li>
<li>Displaying information to the screen</li>
<li>Reading commands from users in interactive programs</li>
<li>Building data structures with C <code>structs</code></li>
</ul>

<p>
The assignment is divided into several problems utilizing many of the
above techniques.
</p>
<ul class="org-ul">
<li>Problem 1 implements a few simple function surrounding a <code>struct</code>
representing stock prices.</li>
<li>Problem 2 builds on the previous routines to complete a stock
plotting program.</li>
<li>Problem 3 builds a hash table that tracks unique items</li>
</ul>

<p>
Problems 1 and 2 build on each other and are somewhat easier than
Problem 3. Strongly consider going in order on the Project to take
advantage of the structure in early problems before reaching the more
open-ended final problem.
</p>
</div>

<div id="outline-container-org4cb7350" class="outline-3">
<h3 id="org4cb7350"><span class="section-number-3">1.1</span> Grading Criteria</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Credit for this assignment will be given based on two categories.
</p>

<ul class="org-ul">
<li><b>Manual Inspection Criteria (~50%)</b>: Each problem has a checklist of
things that graders will look for. The checklist is in the spec and
often contains hints on what to do. Make sure you have a look at
these.</li>

<li><b>Automated Testing (~50%)</b>: Each problem has tests associated with
it along with instructions on how to run those tests from the
command line.  Tests require that code compiles and runs according
to the descriptions given so make sure you verify that these work.</li>
</ul>
</div>
</div>

<div id="outline-container-org75798bd" class="outline-3">
<h3 id="org75798bd"><span class="section-number-3">1.2</span> Getting Started</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Take the following steps to get started
</p>
<ol class="org-ol">
<li>Download the code associated with the project linked at the top of
the spec. Unzip it and examine some of the provided code.</li>
<li>Examine the overview of the files provided listed in the
<a href="#org27a63cc">Download and Setup</a> section. This gives brief descriptions of files
that already exist and those that you must create.</li>
<li>Pick a problem and read. There is a lot of information and many
examples provided for each problem. Reading this will help you
write the correct code earlier rather than later.</li>
<li>Ask questions: if its not clear how to proceed, put up a Piazza
post or visit an office hour.</li>
<li>Get coding: <b>don't wait</b> to start for too long as this will greatly
increase your stress level and potentially result in late
submissions.</li>
<li>Familiarize yourself with the <a href="https://www-users.cse.umn.edu/~kauffman/2021/syllabus#org806097c">late submission policy</a> for
assignments so you are not caught off guard. <b>No submissions will
be accepted more than 48 hours after the deadline.</b></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-orgcbae5d2" class="outline-2">
<h2 id="orgcbae5d2"><span class="section-number-2">2</span> <a id="org27a63cc"></a> Download Code, Setup, and Automated Tests</h2>
<div class="outline-text-2" id="text-2">
<p>
Download the code pack linked at the top of the page. Unzip this which
will create a project folder. Create new files in this
folder. Ultimately you will re-zip this folder to submit it.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">File</th>
<th scope="col" class="org-left">State</th>
<th scope="col" class="org-left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>Makefile</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Build file to compile all programs</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>stock_funcs.c</code></td>
<td class="org-left">EDIT</td>
<td class="org-left">Problem 1/2 functions to write</td>
</tr>

<tr>
<td class="org-left"><code>stock_demo.c</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 1/2 demo code to show some function invocations</td>
</tr>

<tr>
<td class="org-left"><code>stock_main.c</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 2 main function, do not edit</td>
</tr>

<tr>
<td class="org-left"><code>stock.h</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 1/2 header file</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>test_stock_funcs.c</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Testing file for Problems 1 &amp; 2</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>data/stock-ascending.txt</code></td>
<td class="org-left">Data</td>
<td class="org-left">Data files for problems 1 &amp; 2</td>
</tr>

<tr>
<td class="org-left"><code>data/stock-valley.txt</code></td>
<td class="org-left">Data</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>data/stock-jagged.txt</code></td>
<td class="org-left">Data</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#x2026;</td>
<td class="org-left">Data</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>hashset.h</code></td>
<td class="org-left">Provided</td>
<td class="org-left">Problem 3 header file</td>
</tr>

<tr>
<td class="org-left"><code>hashset_funcs.c</code></td>
<td class="org-left">CREATE</td>
<td class="org-left">Problem 3 functions to write</td>
</tr>

<tr>
<td class="org-left"><code>hashset_main.c</code></td>
<td class="org-left">CREATE</td>
<td class="org-left">Problem 3 main function to write</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>data/hashset_demo.script</code></td>
<td class="org-left">Data</td>
<td class="org-left">Problem 3 sample input scripts to main program</td>
</tr>

<tr>
<td class="org-left"><code>data/alphabet.script</code></td>
<td class="org-left">Data</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>data/rm.hashset</code></td>
<td class="org-left">Data</td>
<td class="org-left">Problem 3 sample hash set save files</td>
</tr>

<tr>
<td class="org-left"><code>data/alphabet.hashset</code></td>
<td class="org-left">Data</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>data/alphabet_expand.hashset</code></td>
<td class="org-left">Data</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">TESTING</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>testy</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Test running script</td>
</tr>

<tr>
<td class="org-left"><code>test-results/</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Directory in which temporary testing files are written</td>
</tr>

<tr>
<td class="org-left"><code>test_stock1.org</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Problem 1 tests</td>
</tr>

<tr>
<td class="org-left"><code>test_stock2.org</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Problem 2 tests</td>
</tr>

<tr>
<td class="org-left"><code>test_hashset.org</code></td>
<td class="org-left">Testing</td>
<td class="org-left">Problem 3 tests</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org563c3dd" class="outline-3">
<h3 id="org563c3dd"><span class="section-number-3">2.1</span> Makefile</h3>
<div class="outline-text-3" id="text-2-1">
<p>
A <code>Makefile</code> is provided as part of this project. Building programs in
C is a bit tedious and most folks use <b>build systems</b> of which <code>make</code>
is the oldest. The instructions and dependencies to create programs
are written in a <code>Makefile</code> which is then interpreted by the <code>make</code>
program which will run <code>gcc</code> and other commands to create programs.
</p>

<p>
Use this <code>Makefile</code> by issuing commands like <code>make prob1</code>
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt; make prob2                    # build problem 2 main program
gcc -Wall -Wno-comment -Werror -g  -c stock_main.c
gcc -Wall -Wno-comment -Werror -g  -c stock_funcs.c
gcc -Wall -Wno-comment -Werror -g  -o stock_main stock_main.o stock_funcs.o

&gt; make clean                    # remove all programs/binary object files
rm -f stock_main stock_demo test_stock_funcs hashset_main  *.o

&gt; make prob3                    # build problem 3 main program
gcc -Wall -g -lm -c hashset_main.c
gcc -Wall -g -lm -c hashset_funcs.c
gcc -Wall -g -lm -o hashset_main hashset_main.o hashset_funcs.o

FINISH ME

&gt; make clean                       # remove all programs/binary object files
rm -f stock_main stock_demo test_stock_funcs hashset_main *.o

&gt; make                             # build all programs/objects for the assignment
gcc -Wall -Wno-comment -Werror -g  -c stock_main.c
gcc -Wall -Wno-comment -Werror -g  -c stock_funcs.c
gcc -Wall -Wno-comment -Werror -g  -o stock_main stock_main.o stock_funcs.o
gcc -Wall -Wno-comment -Werror -g  -c stock_demo.c
gcc -Wall -Wno-comment -Werror -g  -o stock_demo stock_demo.o stock_funcs.o
gcc -Wall -Wno-comment -Werror -g  -o test_stock_funcs test_stock_funcs.c stock_funcs.o
gcc -Wall -Wno-comment -Werror -g  -c hashset_main.c
gcc -Wall -Wno-comment -Werror -g  -c hashset_funcs.c
gcc -Wall -Wno-comment -Werror -g  -o hashset_main hashset_main.o hashset_funcs.o
</pre>
</div>

<p>
You are not required to understand all that is the <code>Makefile</code> (yet)
but it is a very useful tool and may be worth your while to inspect.
</p>

<p>
Running <code>make help</code> will provide a summary of the build/test commands
present in the <code>Makefile</code>.
</p>
<div class="org-src-container">
<pre class="src src-sh">Typical usage is:
  &gt; make                          # build all programs
  &gt; make clean                    # remove all compiled items
  &gt; make zip                      # create a zip file for submission
  &gt; make prob1                    # built targets associated with problem 1
  &gt; make test                     # run all tests
  &gt; make test-prob2               # run test for problem 2
  &gt; make test-prob2 testnum=5     # run problem 2 test #5 only
  &gt; make sanity-check             # check that provided files are up to date / unmodified
  &gt; make sanity-restore           # restore provided files to current norms
</pre>
</div>
</div>
</div>


<div id="outline-container-orge4978cb" class="outline-3">
<h3 id="orge4978cb"><span class="section-number-3">2.2</span> <a id="org63667d5"></a> Automated Tests</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Automated tests are included with the code distribution. <b>These tests
are known to work on lab machines only</b> but in most cases they should
run identically in Linux environments such as the Windows subsystem
for Linux or a virtual machine. 
</p>

<p>
The provided <code>Makefile</code> allows automated tests to be run via calls
like <code>make test-prob1</code> to test Problem 1 and <code>make test-prob2</code> to test
Problem 2. See the transcript below.
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make test-prob1               # run tests for problem 1, compiles required code first
gcc -Wall -Wno-comment -Werror -g  -c stock_funcs.c
gcc -Wall -Wno-comment -Werror -g  -o test_stock_funcs test_stock_funcs.c stock_funcs.o
./testy test_stock1.org 
============================================================
== test_stock1.org : Problem 1 First 3 Functions in stock_funcs.c
== Running 15 / 15 tests
1)  stock_new            : ok
2)  stock_free1          : ok
3)  stock_free2          : ok
4)  stock_free3          : ok
5)  stock_free4          : ok
6)  stock_print1         : ok
7)  stock_print2         : ok
8)  stock_print3         : ok
9)  stock_print4         : ok
10) stock_print5         : ok
11) stock_print_prices_0 : ok
12) stock_print_prices_1 : ok
13) stock_print_prices_2 : ok
14) stock_print_prices_3 : ok
15) stock_print_final    : ok
============================================================
RESULTS: 15 / 15 tests passed

&gt;&gt; make test-prob2                         # run tests for problem 2
gcc -Wall -Wno-comment -Werror -g  -c stock_main.c
gcc -Wall -Wno-comment -Werror -g  -o stock_main stock_main.o stock_funcs.o
./testy test_stock2.org 
============================================================
== test_stock2.org : Problem 2 Remaining Functions in stock_funcs.c
== Running 15 / 15 tests
1)  stock_set_minmax1       : ok
2)  stock_set_minmax2       : ok
3)  stock_set_minmax3       : ok
4)  stock_set_best1         : ok
5)  stock_set_best2 and 3   : ok
6)  stock_set_best4         : ok
7)  count_lines             : ok
8)  stock_load1             : ok
9)  stock_load2 and 3       : ok
10) stock_load pathological : ok
11) stock_plot1             : ok
12) stock_plot2 3 4         : ok
13) stock_plot5 6           : ok
14) stock_main1             : ok
15) stock_main2             : ok
============================================================
RESULTS: 15 / 15 tests passed
 
&gt; make test                         # run tests for all problems
...
</pre>
</div>
<p>
Each problem describes specifically how tests can be run and how
credit will be assigned.
</p>

<p>
Note that one can <b>run a single test</b> with the following <code>make</code>
invocation which sets <code>testnum</code>.
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt; make test-prob2 testnum=5
</pre>
</div>
<p>
This is useful when debugging to limit the output and time it takes to
check program results.
</p>
</div>
</div>
</div>

<div id="outline-container-org88ede07" class="outline-2">
<h2 id="org88ede07"><span class="section-number-2">3</span> <b>Problem 1</b>: Stock Plotting</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org2f8cbf7" class="outline-3">
<h3 id="org2f8cbf7"><span class="section-number-3">3.1</span> Overview and Demo</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Problems 1 and 2 create a small plotting application that is focused
on stock prices. In stock trading, the idea is to buy a stock when it
is priced low and sell it at a later time point when the price is high
which will net the profit of the difference between each. Of course,
this must be done by predicting when prices are at their highest and
lowest points and some insight can be garnered from examining
historical data for stock prices. The application you will build
allows for easy analysis of a simple data file containing times/prices
for stocks and display of their information in simple text plots. At
the end of problems 1 and 2, you will have an application which
produces the following kind of output.
</p>

<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; ./stock_main 10 data/stock-ascending.txt           # plot a stock-ascending data file
data_file: data/stock-ascending.txt
count: 10
prices: [10.00, 20.00, 30.00, ...]                    # shows the first few stock prices
min_index: 0                                          # calculates time for min/max price
max_index: 9
best_buy:  0                                          # calculates optimal buy/sell time
best_sell: 9
profit:    90.00
max_width: 10                                         # 10 specifed on command line for bar width
range:     90.00                                      # difference between max/min stock
plot step: 9.00                                       # amount represented by each plot hash
                    +----------
  0: B MIN    10.00 |                                 # visual representation of stock
  1:          20.00 |                                 # prices over time
  2:          30.00 |##
  3:          40.00 |###
  4:          50.00 |####
  5:          60.00 |#####
  6:          70.00 |######
  7:          80.00 |#######
  8:          90.00 |########
  9: S MAX   100.00 |##########

&gt;&gt; ./stock_main 20 data/stock-ascending.txt           # same file make the bars bigger:
data_file: data/stock-ascending.txt                   # 20 hashes wide rather than 10 wide
count: 10
prices: [10.00, 20.00, 30.00, ...]
min_index: 0
max_index: 9
best_buy:  0
profit:    90.00
best_sell: 9
max_width: 20                                         # 20 specified on command line which
range:     90.00                                      # makes the bars wider
plot step: 4.50
                    +--------------------
  0: B MIN    10.00 |
  1:          20.00 |##
  2:          30.00 |####
  3:          40.00 |######
  4:          50.00 |########
  5:          60.00 |###########
  6:          70.00 |#############
  7:          80.00 |###############
  8:          90.00 |#################
  9: S MAX   100.00 |####################

&gt;&gt; ./stock_main 20 data/stock-valley.txt              # plot a different file
data_file: data/stock-valley.txt                      # which has a valley shape
count: 12
prices: [100.00, 90.00, 80.00, ...]
min_index: 5
max_index: 11
best_buy:  5
best_sell: 11
profit:    55.00
max_width: 20
range:     55.00
plot step: 2.75
                    +--------------------
  0:         100.00 |##################
  1:          90.00 |##############
  2:          80.00 |##########
  3:          70.00 |#######
  4:          60.00 |###
  5: B MIN    50.00 |
  6:          55.00 |#
  7:          65.00 |#####
  8:          75.00 |#########
  9:          85.00 |############
 10:          95.00 |################
 11: S MAX   105.00 |####################

&gt;&gt; ./stock_main 20 data/stock-jagged.txt              # plot a file with greater
data_file: data/stock-jagged.txt                      # variance in prices
count: 15
prices: [103.00, 250.00, 133.00, ...]
min_index: 8
max_index: 11
best_buy:  8
best_sell: 11
profit:    232.00
max_width: 20
range:     232.00
plot step: 11.60
                    +--------------------
  0:         103.00 |#####
  1:         250.00 |##################
  2:         133.00 |########
  3:         143.00 |#########
  4:         168.00 |###########
  5:          91.00 |####
  6:         234.00 |################
  7:          59.00 |#
  8: B MIN    38.00 |
  9:          45.00 |
 10:         254.00 |##################
 11: S MAX   270.00 |####################
 12:          59.00 |#
 13:          72.00 |##
 14:         107.00 |#####

&gt;&gt; ./stock_main 25 data/stock-min-after-max.txt       # plot a stock with varying
data_file: data/stock-min-after-max.txt               # prices
count: 15
prices: [223.00, 292.00, 27.00, ...]
min_index: 10                                         # minimum price appear after
max_index: 4                                          # the maximum price
best_buy:  2                                          # finding the optimal buy/sell
best_sell: 4                                          # point is harder in this case
profit:    296.00
max_width: 25
range:     309.00
plot step: 12.36
                    +-------------------------
  0:         223.00 |################
  1:         292.00 |######################
  2: B        27.00 |#
  3:          92.00 |######
  4: S MAX   323.00 |#########################
  5:         189.00 |##############
  6:         207.00 |###############
  7:         142.00 |##########
  8:         321.00 |########################
  9:          89.00 |######
 10:   MIN    14.00 |
 11:         182.00 |#############
 12:         164.00 |############
 13:         156.00 |###########
 14:         169.00 |############

&gt;&gt; ./stock_main 9 data/stock-descending.txt           # if the stock is continually 
No viable buy/sell point                              # declining, its best not to buy
data_file: data/stock-descending.txt
count: 10
prices: [100.00, 90.00, 80.00, ...]
min_index: 9
max_index: 0
best_buy:  -1                                         # not worthwhile to buy/sell in
best_sell: -1                                         # this situation
profit:    0.00
max_width: 9
range:     90.00
plot step: 10.00
                    +---------
  0:   MAX   100.00 |#########
  1:          90.00 |########
  2:          80.00 |#######
  3:          70.00 |######
  4:          60.00 |#####
  5:          50.00 |####
  6:          40.00 |###
  7:          30.00 |##
  8:          20.00 |#
  9:   MIN    10.00 |
</pre>
</div>
</div>
</div>

<div id="outline-container-org80928c1" class="outline-3">
<h3 id="org80928c1"><span class="section-number-3">3.2</span> Outline of <code>stock_funcs.c</code></h3>
<div class="outline-text-3" id="text-3-2">
<p>
The file <code>stock_funcs.c</code> will contain most of the support functions
for the stock plotting program. An outline of these functions are
presented below. Note that each function has the Problem # to which it
belongs.
</p>

<pre class="example" id="orgbc8f833">
// stock_funcs.c: support functions for the stock_main program.

stock_t *stock_new();
// PROBLEM 1: Allocate a new stock struct and initialize its fields.
// Integer fields like 'count' and 'min_index' should be initialied to
// -1.  Pointer fields like 'prices' should be initialized to
// NULL. The stock should be heap-allocated using malloc() and
// returned.  Since this is an allocation function, no use of 'free()'
// should appear.

void stock_free(stock_t *stock);
// PROBLEM 1: Free a stock. Check the 'data_file' and 'prices' fields:
// if they are non-NULL, then free them. Then free the pointer to
// 'stock' itself.

void stock_print(stock_t *stock);
// PROBLEM 1: Prints data about a stock that is passed in via a
// pointer. Uses the syntax ptr-&gt;field to access fields of the struct
// pointed by 'stock'.  Output follows the general convention:
//
// data_file: data/stock-jagged.txt                      
// count: 15
// prices: [103.00, 250.00, 133.00, ...]
// min_index: 8
// max_index: 11
// best_buy:  8
// best_sell: 11
// profit:    232.00
//
// Where each line prints a field of the stock_t struct. In all cases,
// floating point numbers are printed with 2 decimal digits of accuracy.
//
// NULLS FOR FIELDS
// The fields 'data_file' and 'prices' may be NULL in which case they
// will be printed specially as in
// 
// data_file: NULL
// prices: NULL
//
// This requires a manual if/else check for NULL values for these pointers.
// 
// PRICES FIELD
// When printing the 'prices' field, if the 'count' field is 0 to 3,
// print the entire array as in
//
// prices: []                        # count == 0
// prices: [70.00]                   # count == 1
// prices: [50.00, 90.00]            # count == 2
// prices: [59.00, 45.00, 103.00]    # count == 3
//
// Otherwise, print the first 3 elements with a ... at the end as in
//
// prices: [10.00, 20.00, 30.00, ...] # count &gt; 3
//
// PROFIT
// There is no 'profit' field in the struct. Instead, calculate the
// profit as the difference between the price at the 'best_sell' index
// and 'best_buy' index.  If these indices are -1 indicating the best
// buy/sell time is not known or not viable, print a proit of 0.0

void stock_set_minmax(stock_t *stock);
// PROBLEM 1: Sets the index of 'min_index' and 'max_index' fields of
// the stock to be the positions in 'prices' of the minimum and
// maximum values present in it. Uses a simple loop over the array
// 'prices' which is 'count' elements long to examine each for
// max/min. If 'count' is zero, makes no changes to 'min_index' and
// 'max_index'.

int stock_set_best(stock_t *stock);
// PROBLEM 2: Sets the 'best_buy' and 'best_sell' fields of 'stock'.
// This corresponds to the pair which produces the best profit. On
// determining the best buy/sell indices which produce a positive
// profit, sets these fields in 'stock' and returns 0. If there is no
// buy/sell point which would result in a positive profit, sets the
// 'best_buy' and 'best_sell' indices to -1 and returns -1. Always
// calculates the earliest buy/sell pair of indices that would get the
// best profit: if 5,8 and 5,9 and 7,10 all give the same, maximal
// profit, the best buy/sell indices are set to 5,7.
// 
// ALGORITHM NOTES
// One intuitive algorithm to compute this is to try every possible
// buy index (outer loop) and every possible sell index after it
// (inner loop) looking for the maximum profit produced in it. This is
// a O(N^2) algorithm with N=count.  Using this algorithm is a good
// start. Some MAKEUP CREDIT will be awarded for implementing a more
// efficient, O(N) algorithm here. See the specification for more details.

int count_lines(char *filename);
// PROBLEM 2: Opens file named 'filename' and counts how many times
// the '\n' newline character appears in it which corresponds to how
// many lines of text are in it.  Makes use of either fscanf() with
// the %c format to read single characters or alternative I/O
// functions like fgetc(). Closes the file before returning a count of
// how many lines are it it.  If for any reason the file cannot be
// opened, prints a message like
//
// Could not open file 'not-there.txt'
//
// and returns -1 to indicate failure.

int stock_load(stock_t *stock, char *filename);
// PROBLEM 2: Loads a stock from file 'filename' into 'stock' filling
// its 'prices' and 'count' fields in. Makes use of the count_lines()
// function to determine how many lines are in the file which will
// dictate 'count' and the length of 'prices'. Allocates space in the
// heap for the stock's 'prices' array, opens the 'filename' and
// iterates through reading prices into the array. The data format for
// prices files is
//
// time_03 133.00
// time_04 143.00
// time_05 168.00
// time_06 91.00
// 
// where each line has a time as as single string and a price which is
// floating point number. The times can be ignored which can be
// accomplished with a fscanf() call with format "%*s" to read a
// string but ignore/discard it.
// 
// Assigns the 'datafile' field to be a duplicated string of
// 'filename' for which 'strdup()' is extremely useful. This string
// must be free()'d later likely in 'stock_free()'
// 
// On successfully loading the stock, returns 0.
//
// If 'filename' cannot be opened, prints the message 
// 
// Unable to open stock file 'some-stock.txt', bailing out
//
// with 'filename' substituted in for the name of the stock and
// returns -1.

void stock_plot(stock_t *stock, int max_width);
// PROBLEM 2: Plots a graphical representation of stock
// information. First calculates and prints plot which is in the
// following format:
//
// max_width: 25
// range:     40.00
// plot step: 1.60
//
// The prints a header line and iterates through each stock data on it
// along with a bar which varies in width with the stock price. A
// sample format is as follows with some annotations.
// 
//....20 spaces.......+ ...max_width dashes.....
//01234567890123456789
//                    +-------------------------
//  0:         223.00 |################
//  1:         292.00 |######################
//  2: B        27.00 |#
//  3:          92.00 |######
//  4: S MAX   323.00 |#########################
//  5:         189.00 |##############
//  6:         207.00 |###############
//  7:         142.00 |##########
//  8:         321.00 |########################
//  9:          89.00 |######
// 10:   MIN    14.00 |
// 11:         182.00 |#############
// 12:         164.00 |############
// 13:         156.00 |###########
// 14:         169.00 |############
//01234567890123456789
//|    | |     |       |
//|    | |     |       +-&gt; Each bar is (price-min)/plot_step hashes wide
//|    | |     +-&gt; Stock price printed with format %8.2f
//|    | +-&gt; Print MIN or MAX if the stock is at min_index/max_index
//|    +-&gt; Print B or S if the stock is at the best_buy/best_sell index
//+--&gt; Index in the array printed with format %3d

</pre>
</div>
</div>

<div id="outline-container-org3907df7" class="outline-3">
<h3 id="org3907df7"><span class="section-number-3">3.3</span> Editing and Testing</h3>
<div class="outline-text-3" id="text-3-3">
<p>
The project code contains a skeleton version of <code>stock_funcs.c</code> which
you should fill in with definitions. With this skeleton version, you
can immediately <b>start testing your code</b> by typing <code>make test-prob1</code>.
Without changes, you will get failures for all tests as in
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; make test-prob1
gcc -Wall -Wno-comment -Werror -g  -o test_stock_funcs test_stock_funcs.c stock_funcs.o
./testy test_stock1.org 
============================================================
== test_stock1.org : Problem 1 First 3 Functions in stock_funcs.c
== Running 15 / 15 tests
1)  stock_new            : FAIL -&gt; results in file 'test-results/prob1-01-result.tmp'
2)  stock_free1          : FAIL -&gt; results in file 'test-results/prob1-02-result.tmp'
3)  stock_free2          : FAIL -&gt; results in file 'test-results/prob1-03-result.tmp'
...
============================================================
RESULTS: 0 / 15 tests passed
</pre>
</div>

<p>
However, the ability to run tests on your code an see progress is
extremely important. <b>Your first goal when starting a new project
should be to see some results or running the program</b> which is much
easier if some benevolent dictator has provided a bunch of tests.
</p>

<p>
You can also use the invocation
</p>
<pre class="example">
&gt; make test-prob1 testnum=5
</pre>

<p>
to run a single test and see its results in the
terminal. 
</p>

<p>
Failed tests generate results files which can be viewed in any text
editor or in the terminal. The <code>cat</code> command can show such results in
the terminal via <code>cat test-results/some-file.txt</code>. 
</p>

<p>
Below the results for the first test are shown and from the comparison
and Valgrind report, it appears that there is some sort of Memory
problem with the <code>stock_new()</code> function.
</p>

<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; cat test-results/prob1-01-result.tmp 

* (TEST 1) stock_new
COMMENTS:
** program: ./test_stock_funcs stock_new

** --- Failure messages --- 
- FAILURE(139) due to SIGSEGV (segmentation fault) from OS
- FAILURE: Output Mismatch at lines marked

** --- Side by Side Differences ---
- Expect output in: test-results/raw/prob1-01-expect.tmp
- Actual output in: test-results/raw/prob1-01-actual.tmp
- Differing lines have a character like '|' '&gt;' or '&lt;' in the middle
#+BEGIN_SRC sbs-diff
==== EXPECT ====                                                      ==== ACTUAL ====                                                   
{                                                                     {
    // Tests stock_new() function and whether it initializes fields       // Tests stock_new() function and whether it initializes fields
    // correctly before returning a stock.                                // correctly before returning a stock.

    stock_t *stock = stock_new(); // call function to allocate/init       stock_t *stock = stock_new(); // call function to allocate/init

    printf("stock-&gt;data_file: %p\n" , stock-&gt;data_file);                  printf("stock-&gt;data_file: %p\n" , stock-&gt;data_file);
    printf("stock-&gt;count:     %d\n" , stock-&gt;count);                      printf("stock-&gt;count:     %d\n" , stock-&gt;count);
    printf("stock-&gt;prices:    %p\n" , stock-&gt;prices);                     printf("stock-&gt;prices:    %p\n" , stock-&gt;prices);
    printf("stock-&gt;min_index: %d\n" , stock-&gt;min_index);                  printf("stock-&gt;min_index: %d\n" , stock-&gt;min_index);
    printf("stock-&gt;max_index: %d\n" , stock-&gt;max_index);                  printf("stock-&gt;max_index: %d\n" , stock-&gt;max_index);
    printf("stock-&gt;best_buy:  %d\n" , stock-&gt;best_buy);                   printf("stock-&gt;best_buy:  %d\n" , stock-&gt;best_buy);
    printf("stock-&gt;best_sell: %d\n" , stock-&gt;best_sell);                  printf("stock-&gt;best_sell: %d\n" , stock-&gt;best_sell);

    free(stock);                // de-allocate manually                   free(stock);                // de-allocate manually
}                                                                     }
stock-&gt;data_file: (nil)                                             | Segmentation Fault
stock-&gt;count:     -1                                                &lt;
stock-&gt;prices:    (nil)                                             &lt;
stock-&gt;min_index: -1                                                &lt;
stock-&gt;max_index: -1                                                &lt;
stock-&gt;best_buy:  -1                                                &lt;
stock-&gt;best_sell: -1                                                &lt;
#+END_SRC

** --- Line Differences ---
EXPECT:  17) stock-&gt;data_file: (nil)
EXPECT:  18) stock-&gt;count:     -1
EXPECT:  19) stock-&gt;prices:    (nil)
EXPECT:  20) stock-&gt;min_index: -1
EXPECT:  21) stock-&gt;max_index: -1
EXPECT:  22) stock-&gt;best_buy:  -1
EXPECT:  23) stock-&gt;best_sell: -1
ACTUAL:  17) Segmentation Fault

--- Valgrind Log from: test-results/raw/prob1-01-valgrd.tmp ---
==150464== Memcheck, a memory error detector
==150464== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==150464== Using Valgrind-3.17.0 and LibVEX; rerun with -h for copyright info
==150464== Command: ./test_stock_funcs stock_new
==150464== Parent PID: 150463
==150464== 
==150464== Invalid read of size 8
==150464==    at 0x109354: main (test_stock_funcs.c:33)
==150464==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==150464== 
==150464== 
==150464== Process terminating with default action of signal 11 (SIGSEGV): dumping core
==150464==  Access not within mapped region at address 0x0
==150464==    at 0x109354: main (test_stock_funcs.c:33)
==150464==  If you believe this happened as a result of a stack
==150464==  overflow in your program's main thread (unlikely but
==150464==  possible), you can try to increase the size of the
==150464==  main thread stack using the --main-stacksize= flag.
==150464==  The main thread stack size used in this run was 10022912.
==150464== 
==150464== HEAP SUMMARY:
==150464==     in use at exit: 0 bytes in 0 blocks
==150464==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated
==150464== 
==150464== All heap blocks were freed -- no leaks are possible
==150464== 
==150464== For lists of detected and suppressed errors, rerun with: -s
==150464== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbffded5" class="outline-3">
<h3 id="orgbffded5"><span class="section-number-3">3.4</span> Implementation Notes</h3>
<div class="outline-text-3" id="text-3-4">
</div>
<div id="outline-container-orgcb48bdf" class="outline-4">
<h4 id="orgcb48bdf">Use the Arrow</h4>
<div class="outline-text-4" id="text-orgcb48bdf">
<p>
The first 3 functions to implement in <code>stock_funcs.c</code> are utility
functions for stocks to allocate, de-allocate and print them. As will
be covered in lecture, C often deals with pointers to a <code>struct</code> and
that is the case in these functions. For this, the <code>sp-&gt;fld</code> syntax is
used to first dereference the <code>struct</code> pointer and access a field of
the <code>struct</code>.  For example, in <code>stock_print()</code> one could use the
following code to print the <code>count</code> field of the parameter <code>struct</code>:
</p>
<div class="org-src-container">
<pre class="src src-c">void print_stock(stock_t *stock){
  // ...
  printf("count: %d\n",  stock-&gt;count);
  //                     ^^^^^^^^^^^^
</pre>
</div>
<p>
Throughout most of this problem and the next, the Arrow syntax will be
used in most functions.
</p>
</div>
</div>

<div id="outline-container-org31cbd26" class="outline-4">
<h4 id="org31cbd26">Allocating Stocks in Heap Memory</h4>
<div class="outline-text-4" id="text-org31cbd26">
<p>
In order to get dynamically allocated memory in the Heap, the
<code>malloc()</code> function should be used. This function takes a number of
bytes and returns a <code>void *</code> pointer for that number of bytes if
available.  As will be discussed in lecture, C provides the <code>sizeof()</code>
operator to calculate the size of various intrinsic and user-defined
types. To allocate enough space for a <code>stock_t</code>, use
<code>malloc(sizeof(stock_t))</code>.  
</p>

<p>
Though <code>malloc()</code> returns a <code>void *</code>, it is typical to simply assign
it to a pointer of some other kind. For example, the following is a
typical way to allocate space for a single <code>stock_t</code> <code>struct</code> and save
the reference for later use.
</p>
<div class="org-src-container">
<pre class="src src-c">stock_t *stock = malloc(sizeof(stock_t));
</pre>
</div>

<p>
Once allocated, the Arrow syntax mentioned above, <code>stock-&gt;min_index</code>
can be used to adjust fields.
</p>

<p>
To understand which fields are present in the <code>stock_t</code> struct, open
up the header file <code>stock.h</code> which declares the struct. There will be
a list of fields like <code>prices</code> and <code>max_index</code>: these will all need to
receive initial values like <code>-1</code> or <code>NULL</code>. Don't alter anything in
the header as this may break tests that you'll run later.
</p>
</div>
</div>

<div id="outline-container-org01a7e4e" class="outline-4">
<h4 id="org01a7e4e">Avoid Freeing NULL</h4>
<div class="outline-text-4" id="text-org01a7e4e">
<p>
While the <code>free()</code> function is used to de-allocate memory that has
been obtained via <code>malloc()</code>, it should never be called with a <code>NULL</code>
pointer.  In the <code>stock_free()</code> function, one should check the
<code>data_file</code> and <code>prices</code> fields and free them only if they are not
<code>NULL</code>. The following code demonstrates how this can be done for one
of those fields.
</p>
<div class="org-src-container">
<pre class="src src-c">void stock_free(stock_t *stock){
  // ...
  if(stock-&gt;data_file != NULL){
    free(stock-&gt;data_file);
  }
  // ...
</pre>
</div>
</div>
</div>

<div id="outline-container-org765763b" class="outline-4">
<h4 id="org765763b">Printing Prices Array</h4>
<div class="outline-text-4" id="text-org765763b">
<p>
During <code>stock_print()</code>, some special code will be needed to print the
<code>prices[]</code> array if it has 3 or fewer elements. As per the function
documentation, the line associated with prices will like one of the
following depending on the value for <code>count</code>:
</p>
<div class="org-src-container">
<pre class="src src-text">prices: []                         # count == 0
prices: [70.00]                    # count == 1
prices: [50.00, 90.00]             # count == 2
prices: [59.00, 45.00, 103.00]     # count == 3
prices: [10.00, 20.00, 30.00, ...] # count &gt; 3
</pre>
</div>
<p>
There are a couple tricks for producing this type of output and it may
take some care to get the output formatted correctly for all
situations.  You might try either of the following:
</p>
<ol class="org-ol">
<li>Brute force: establish 5 cases for each of the formats above with
separate <code>printf()</code> call for each.  Since the number of cases is
relatively small, this should not be unmanageable.</li>
<li>Use the <code>count==0</code> as a special case and then write a carefully
crafted loop with conditionals to handle the remaining cases.  This
can get tricky but is more flexible if for later one wants to see
the first 5 numbers instead.</li>
</ol>
<p>
Either approach is acceptable in this case.
</p>

<p>
Keep in mind that though <code>prices</code> is declared as a <code>double *prices</code>
(pointer to <code>double</code> data), it is fine to use array syntax like square
brace indexing with it. Syntax like <code>stock-&gt;prices[2]</code> will follow a
pointer to a <code>stock_t struct</code> then find the <code>prices</code> field and index
into it as an array.
</p>
</div>
</div>
</div>

<div id="outline-container-orgd51335c" class="outline-3 grading 30">
<h3 id="orgd51335c"><span class="section-number-3">3.5</span> Grading Criteria for Problem 1&#xa0;&#xa0;&#xa0;<span class="tag"><span class="grading">grading</span>&#xa0;<span class="30">30</span></span></h3>
<div class="outline-text-3" id="text-3-5">
<p>
The following criteria will be checked.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Weight</th>
<th scope="col" class="org-left">Criteria</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">AUTOMATED TESTS via <code>make test-prob1</code></td>
</tr>

<tr>
<td class="org-right">15</td>
<td class="org-left">Runs tests in <code>test_prob1.org</code> on the first 3 functions in <code>stock_funcs.c</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Runs all code under Valgrind to ensure that no memory errors are present.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">1 point per test passed</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">MANUAL INSPECTION</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left">Overall Style and Readability</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Good indentation of code clearly denoting function/loop/conditional scopes</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Presence of some comments to indicate intent in gnarly code</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left"><code>stock_new()</code> and <code>stock_free()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Appropriate use of <code>malloc()</code> and <code>sizeof()</code> to get heap memory</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Correct initialization of all fields to -1 or <code>NULL</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Appropriate use of the Arrow syntax for field access</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Checks for <code>data_file</code> and <code>prices</code> fields to avoid calling <code>free()</code> on a <code>NULL</code> pointer</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Appropriate use of the Arrow syntax for field access</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left"><code>stock_print()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Appropriate use of the Arrow syntax for field access</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear logic which deals with printing <code>prices[]</code> array with 3 or fewer elements specially</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear section to calculate Profit from <code>best_buy/best_sell</code> or print 0.0 if these are -1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-orgda9b06f" class="outline-2">
<h2 id="orgda9b06f"><span class="section-number-2">4</span> <b>Problem 2</b>: Completing Stock Plot</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org8feaa70" class="outline-3">
<h3 id="org8feaa70"><span class="section-number-3">4.1</span> Overview</h3>
<div class="outline-text-3" id="text-4-1">
<p>
This problem implements further functions to complete the Stock
Plotting application. These functions are somewhat more complex and
utilize functions and techniques that are part of Problem 1. When this
problem is complete, all functions in <code>stock_funcs.c</code> will be working
which will allow the provided <code>stock_main.c</code> program to be compiled
and run on the command line.
</p>

<p>
The remainder of this section gives some notes and implementation
hints on how to handle the various functions.
</p>
</div>
</div>

<div id="outline-container-orgffa85e3" class="outline-3">
<h3 id="orgffa85e3"><span class="section-number-3">4.2</span> Setting Min/Max Index</h3>
<div class="outline-text-3" id="text-4-2">
<div class="org-src-container">
<pre class="src src-c">void stock_set_minmax(stock_t *stock)
</pre>
</div>
<p>
This function should be implemented as a simple "scan" across the
<code>prices[]</code> array. Each step will check an element of <code>prices[]</code> and
adjust a running min/max.  Make use of similar syntax here as you used
in <code>stock_print()</code> in order to access the elements of <code>prices</code> and
subsequently set the <code>min_index</code> and <code>max_index</code> fields.
</p>
</div>
</div>

<div id="outline-container-orgc6f642f" class="outline-3">
<h3 id="orgc6f642f"><span class="section-number-3">4.3</span> Best Buy/Sell Index</h3>
<div class="outline-text-3" id="text-4-3">
<div class="org-src-container">
<pre class="src src-c">int stock_set_best(stock_t *stock);
</pre>
</div>

<p>
In many cases it is best to buy at a minimum price and sell at a
maximum price. This approach fails if the maximum price occurs
<b>before</b> the minimum price. The job of <code>stock_set_best()</code> is to run an
algorithm to locate the best possible buy/sell pair and set the
<code>best_buy / best_sell</code> fields of a stock. As the documentation for the
function indicates, one can use a simple "brute force" approach to
this by simply trying every buy index paired with every sell index
(which must occur later in the array than the buy index). This
approach leads to the following pattern of iteration through the
<code>prices</code> array which uses a doubly nested pair of loops.
</p>
<div class="org-src-container">
<pre class="src src-text">set best_buy and best_sell to -1
set best_profit to 0.0
for every buy index I in prices
  for every sell index J later than I in prices
    if prices[J] - prices[I] &gt; best_profit
      set best_buy,best_sell, to I,J
      set best_profit to prices[J] - prices[I]
  done
done
</pre>
</div>
<p>
Start by adapting this approach in the function and make sure it
works. Then move on to solve other problems here.
</p>

<p>
For those that want a bit more fun, revisit this function later to
implement a more efficient version of it as described in the <a href="#org20608b6">Optional
MAKEUP CREDIT Section</a>.
</p>
</div>
</div>


<div id="outline-container-org1b256e6" class="outline-3">
<h3 id="org1b256e6"><span class="section-number-3">4.4</span> Stock Files</h3>
<div class="outline-text-3" id="text-4-4">
<p>
Data on stock prices over time are stored in several example files in
the <code>data/</code> directory such as <code>data/stock-ascending.txt</code> and
<code>data/stock-jagged.txt</code>. 
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; ls data/stock-*     # list all the sample stock data
data/stock-1only.txt	   data/stock-empty.txt		   data/stock-TSLA-08-02-2021.txt
data/stock-2only.txt	   data/stock-FB-08-02-2021.txt    data/stock-TSLA-08-12-2021.txt
data/stock-3only.txt	   data/stock-GOOG-08-02-2021.txt  data/stock-valley.txt
data/stock-ascending.txt   data/stock-jagged.txt
data/stock-descending.txt  data/stock-min-after-max.txt
</pre>
</div>

<p>
Each of has a simple data format which looks like the following.
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt;&gt; cat data/stock-jagged.txt 
time_01 103.00
time_02 250.00
time_03 133.00
time_04 143.00
time_05 168.00
time_06 91.00
time_07 234.00
time_08 59.00
time_09 38.00
time_10 45.00
time_11 254.00
time_12 270.00
time_13 59.00
time_14 72.00
time_15 107.00
</pre>
</div>
<ul class="org-ul">
<li>Each time/price pair appears on its own line so that the number of
lines in the file is the number of time/price pairs</li>
<li>The first item on each line is a time at which a price appears: this
will be ignored.</li>
<li>The second item that appears on each line is a floating point number
which is the stock price at that time.</li>
</ul>
</div>
</div>

<div id="outline-container-org919112d" class="outline-3">
<h3 id="org919112d"><span class="section-number-3">4.5</span> Counting Lines</h3>
<div class="outline-text-3" id="text-4-5">
<p>
Since the number of lines in stock files corresponded to the number of
prices, it is useful to have a utility function to count lines in a
file which is required.
</p>
<div class="org-src-container">
<pre class="src src-c">int count_lines(char *filename)
</pre>
</div>
<p>
As the documentation for the function indicates, this function will
open the named file and count the lines in it.  This can be done most
easily via treating the file as a long array of characters and looking
for the special <code>\n</code> newline character which designates a line break.
Character comparisons are done in C like other equality comparisons
via syntax like
</p>
<div class="org-src-container">
<pre class="src src-c">if(somevar == '\n'){ ... }

if(somevar == 'X'){ ... }
</pre>
</div>

<p>
To read a single character from a file, a common approach is to use
the <code>fscanf()</code> function with the <code>%c</code> format specifier as in
</p>
<div class="org-src-container">
<pre class="src src-c">char c;
int ret = fscanf(fin, "%c", &amp;c);
</pre>
</div>

<p>
Keep in mind that the <code>fscanf()</code> function will fail to read a
character when it reaches the end of a file.  In these cases it will
return the special return value <code>EOF</code> which should be checked. A
common structure is
</p>
<div class="org-src-container">
<pre class="src src-c">int ret = fscanf(fin, ..., ...);
if(ret == EOF){
  // take action for end of file, like breaking out of a loop
  // or returning
}
else{
  // fscanf() completed normally so variables should contain 
  // new values
}
</pre>
</div>
<p>
Experiment with these elements to complete the <code>count_lines()</code>
function.
</p>

<p>
Keep in mind that <code>count_lines()</code> should fail gracefully if a file
cannot be opened. In such cases, the <code>fopen()</code> function returns
<code>NULL</code>. Make sure to check for this, print an error message as
indicated in the function documentation, and return -1 from the
function to indicate a failure has occurred.
</p>
</div>
</div>

<div id="outline-container-orgda62b9f" class="outline-3">
<h3 id="orgda62b9f"><span class="section-number-3">4.6</span> Loading Stock Files</h3>
<div class="outline-text-3" id="text-4-6">
<div class="org-src-container">
<pre class="src src-c">int stock_load(stock_t *stock, char *filename)
</pre>
</div>
<p>
This function takes an existing <code>stock</code> and fills in its <code>price</code> and
<code>count</code> fields based on the contents of the given file. An example:
</p>
<div class="org-src-container">
<pre class="src src-c">stock_t *stock = new_stock();
// all fields of stock have default values like -1 and NULL

int ret = stock_load(stock, "data/stock-ascending.txt");
// Specified data file as 10 lines so
// stock-&gt;count is now 10 
// stock-&gt;prices is an array of 10 values read from the file
// If the load failed, -1 would be returned
</pre>
</div>

<p>
Make use of the <code>count_lines()</code> function to determine how many lines
are in the stock file. This will allow you to immediately allocate
enough space for a <code>double</code> array for all of the prices in the file.
</p>

<p>
You will need to skip the first string on each line in prices files:
</p>
<div class="org-src-container">
<pre class="src src-text">time_03 133.00
time_04 143.00
|       |
|       +---&gt; Read these into prices
+---&gt; Skip these times
</pre>
</div>
<p>
An easy way to accomplish this is to use the C format modifier <code>*</code>
which reads a field but does not place it in memory anywhere. For
example:
</p>
<div class="org-src-container">
<pre class="src src-c">fscanf(fin, "%*s");
</pre>
</div>
<p>
would read a string but ignore it thus one does not have to provide a
memory address to store the string.
</p>

<p>
One requirement of <code>stock_load()</code> is to set the <code>data_file</code> field to
be a <b>copy</b> of the <code>filename</code> parameter. While this can be done
manually with <code>malloc()</code> and a loop, the <code>strdup()</code> function makes
this easy and is encouraged here. Look up documentation for it either
in the Unix man pages (type <code>man strdup</code> in a terminal) or via an
internet search.
</p>

<p>
Ensure that at the end of <code>stock_load()</code> the <code>data_file</code>, <code>prices</code>,
and <code>count</code> fields have been set according to the data from the
file. Do not modify any other fields in the stock.
</p>
</div>
</div>

<div id="outline-container-org0e72e1a" class="outline-3">
<h3 id="org0e72e1a"><span class="section-number-3">4.7</span> Plotting Stocks</h3>
<div class="outline-text-3" id="text-4-7">
<div class="org-src-container">
<pre class="src src-c">void stock_plot(stock_t *stock, int max_width);
</pre>
</div>

<p>
The ultimate goal of the Stock Plot application is fulfilled in this
function which is meant to print a graphical representation of stock
data.  A sample of output is below and will be discussed in more detail.
</p>
<div class="org-src-container">
<pre class="src src-c">max_width: 25
range:     40.00
plot step: 1.60
                   +-------------------------
 0:         223.00 |################
 1:         292.00 |######################
 2: B        27.00 |#
 3:          92.00 |######
 4: S MAX   323.00 |#########################
 5:         189.00 |##############
 6:         207.00 |###############
 7:         142.00 |##########
 8:         321.00 |########################
 9:          89.00 |######
10:   MIN    14.00 |
11:         182.00 |#############
12:         164.00 |############
13:         156.00 |###########
14:         169.00 |############
</pre>
</div>
<p>
The output comes from the following code fragment which is present in
the provided file <code>stock_demo.c</code>.
</p>
<div class="org-src-container">
<pre class="src src-c">{
  stock_t *stock = stock_new();
  stock_load(stock, "data/stock-min-after-max.txt");
  stock_set_minmax(stock);
  stock_set_best(stock);
  stock_plot(stock, 25);
}
</pre>
</div>

<p>
The initial output is
</p>
<div class="org-src-container">
<pre class="src src-text">max_width: 25
range:     40.00
plot step: 1.60
</pre>
</div>
<p>
and shows the calculation needed to compute the "plot step". This
relies on knowing the Minimum and Maximum price (found via
<code>stock_set_minmax()</code>) to first get the Range (difference between
min/max). The range is then divided by the <code>max_width</code>
parameter. <code>max_width</code> dictates how wide the widest "bar" of the plot
should be.  The reported "plot step" is 1.60 in this case so that each
of the <code>#</code> has marks corresponds to 1.60 in price in the below bars.
</p>

<p>
Next an axis line appears as in
</p>
<div class="org-src-container">
<pre class="src src-text">                   +-------------------------
....20 spaces....   ....max_width dashes.....
</pre>
</div>
<p>
The left area has a fixed number of spaces followed by a <code>+</code> then a
number of dashes equal to the <code>max_width</code> parameter.  Use a loop to
print out the proper number of dashes.
</p>

<p>
The remainder of the plot has one line per stock price.  Examples of
the first few lines:
</p>
<div class="org-src-container">
<pre class="src src-text">//  0:         223.00 |################
//  1:         292.00 |######################
</pre>
</div>
<p>
Note that the initial index at the left is printed with format <code>%3d</code>
which leaves spaces on the left for single and double digit
numbers.
</p>

<p>
Next appears the price for the stock at that time.  This is printed
using the format specifier <code>%8.2f</code> which leaves 2 digits beyond the
decimal place and again, may add some space on the left for smaller
prices. 
</p>

<p>
At the right, each "bar" has a length which can be computed
by the formula
</p>
<pre class="example">
int width = (price[i] - minimum_price) / plot_step
</pre>

<p>
This will convert a <code>double</code> value into an integer which can then be
used in a loop to print out the proper number of <code>#</code> marks.
</p>

<p>
The space in between the index and the price is used to denote the
optimal buy/sell time and the min/max stock prices. As a couple
examples here are possible outputs that combine some of these.
</p>
<div class="org-src-container">
<pre class="src src-text">  2: B        27.00 |#
  4: S MAX   323.00 |#########################
 10:   MIN    14.00 |
</pre>
</div>
<ul class="org-ul">
<li>Use a <code>B</code> or <code>S</code> at the index that matches <code>best_buy /
  best_sell</code>. Print this as a single character string OR print a space
here if the stock is not at the best buy/sell index.</li>
<li>Print <code>MAX</code> or <code>MIN</code> if the stock is at the min/max index or print 3
spaces if not. In either case follow with 1 more space.</li>
</ul>

<p>
A common tactic to solve such problems is to use a conditional
structure like the following which re-assigns a string based on
whether a particular stock price is one of the best buy/sell or
min/max.
</p>
<div class="org-src-container">
<pre class="src src-c">char *min_or_max_str = "   ";
if(i == stock-&gt;min_index){
  min_or_max_str = "MIN";
}
if(i == stock-&gt;max_index){
  ...
}
printf("%s ",min_or_max_string);
</pre>
</div>
<p>
The same process can be executed to print out either a blank space or
<code>B/S</code> for the best buy/sell designator as well.
</p>

<p>
It may take some time to get the output for the <code>stock_plot()</code> correct
but this can be expedited through careful inspection of test feedback.
</p>
</div>
</div>

<div id="outline-container-orgb2fbc9b" class="outline-3">
<h3 id="orgb2fbc9b"><span class="section-number-3">4.8</span> <a id="org20608b6"></a> Optional MAKEUP CREDIT</h3>
<div class="outline-text-3" id="text-4-8">
<p>
The "brute force" approach initially suggested to find <code>best_buy /
best_sell</code> indices compares all possible
buy/sell pairs to determine the best profit possible. This is a
Quadratic algorithm with complexity <code>O(N^2)</code> with <code>N</code> being the length
of the <code>prices[]</code> array.
</p>

<p>
One can improve upon this algorithm to get an <code>O(N)</code> linear
algorithm. This takes some cleverness or some research. For example,
the problem is directly related to the Maximum Subarray Problem and
its various solutions. These are described here:
</p>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Maximum_subarray_problem">https://en.wikipedia.org/wiki/Maximum_subarray_problem</a></li>
<li><a href="https://medium.com/@rsinghal757/kadanes-algorithm-dynamic-programming-how-and-why-does-it-work-3fd8849ed73d">https://medium.com/@rsinghal757/kadanes-algorithm-dynamic-programming-how-and-why-does-it-work-3fd8849ed73d</a></li>
<li><a href="https://cs.gmu.edu/~kauffman/cs310/01-intro.pdf">https://cs.gmu.edu/~kauffman/cs310/01-intro.pdf</a></li>
</ul>
<p>
Note that adapting these approaches to the current setting will
require some care: the Maximum Subarray problem assumes elements in
the array are added together whereas in our Stock setting, it is the
difference between elements that matter. However, buy absorbing the
tricks used the linear time Maximum Subarray algorithm, one can get
the same effect for the Stocks, an <code>O(N)</code> algorithm to set <code>best_buy /
best_sell</code>.
</p>

<p>
<b>Code that implements a Linear Time algorithm for <code>stock_set_best()</code>
will be awarded 10 POINTS of PROJECT MAKEUP CREDIT</b>.
</p>

<p>
Makeup Credit will go into the general pool of points earned for
projects to make up for points missed on projects elsewhere. If a
student scores 110/100 on Project 1 and 90 / 100 on Project 2, the 10
points from Project 1 will make up for the credit lost on Project 2.
Your total score on All Projects cannot exceed 100% so any points
beyond the overall total will simply be dropped.
</p>
</div>
</div>


<div id="outline-container-org7d50c75" class="outline-3 grading 30">
<h3 id="org7d50c75"><span class="section-number-3">4.9</span> Grading Criteria for Problem 2&#xa0;&#xa0;&#xa0;<span class="tag"><span class="grading">grading</span>&#xa0;<span class="30">30</span></span></h3>
<div class="outline-text-3" id="text-4-9">
<p>
The following criteria will be checked.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Weight</th>
<th scope="col" class="org-left">Criteria</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">AUTOMATED TESTS via <code>make test-prob2</code></td>
</tr>

<tr>
<td class="org-right">15</td>
<td class="org-left">Runs the tests provided in <code>test_prob2.org</code> for last functions in <code>stock_funcs.c</code> and <code>stock_main</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Runs all code under Valgrind to ensure that no memory errors are present.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">1 point per test passed</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">MANUAL INSPECTION</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left"><code>stock_set_minmax()</code> and <code>stock_set_best()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear loop to scan through the <code>prices</code> array to find the min/max and best buy/sell</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Proper changes to the fields <code>min_index / max_index / best_buy / best_sell</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left"><code>stock_load()</code> and <code>count_lines()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of <code>fopen()</code> and <code>fscanf()</code> to read in data from the file</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Code to gracefully handle failure to open a file and print appropriate messages.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Proper use of <code>count_lines()</code> to determine the number of lines in the data file</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of <code>malloc()</code> to allocate memory for the prices array</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of the <code>"%*s"</code> format specifier to skip leading "time" string in files</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Duplication of the filename to the <code>data_file</code> field likely using the <code>strdup()</code> function</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left"><code>stock_plot()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear section that calculates the "plot step" with appropriate variables like range</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Code to print out the initial plot information and loop to print the upper axis "bar"</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Section of conditional code which prints if stock is min/max and best buy/sell</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear loop that prints out bars with width proportional to the price of the stock</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">10</td>
<td class="org-left">OPTIONAL MAKEUP CREDIT</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Implement <code>stock_set_best()</code> in linear time rather than Quadratic time.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Such solutions will have a single loop rather than 2 nested loops BUT not every single loop</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">is linear time. Credit will be deducted if the code is not concise and clear.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org8ad54c3" class="outline-2">
<h2 id="org8ad54c3"><span class="section-number-2">5</span> <b>Problem 3</b>: Hash Tables in C</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgf1567ed" class="outline-3">
<h3 id="orgf1567ed"><span class="section-number-3">5.1</span> Overview</h3>
<div class="outline-text-3" id="text-5-1">
<p>
This problem implements a rudimentary hash table application in C
along with a program that uses it.  The architecture is similar to a
lab problem involving linked lists so reviewing that code can provide
some insight.
</p>

<p>
Basic Hash Tables are covered in most introductory data structure
classes such as CSCI 1913 and 1933. Should you need to review them,
the following resources may prove useful.
</p>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Hash_table">Wikipedia Article on Hash Tables</a>: Provides general overview of the
data structure. Specifically focus on <a href="https://en.wikipedia.org/wiki/Hash_table#Separate_chaining_with_linked_lists">Separate Chaining with Linked
Lists</a> which is the style of hash table implemented in the
assignment.</li>
<li><a href="https://www.youtube.com/watch?v=shs0KM3wKv8">Youtube "Data Structures: Hash Tables" by HackerRank</a>: Short video
summarizing major concepts of hash tables in any programming
language. Explains briefly hash code functions and the Separate
Chaining architecture we will use.</li>
<li><a href="https://www.youtube.com/watch?v=c3RVW3KGIIE">Youtube "How HashMap works in Java" by Ranjith Ramachandran</a>: Short
video which includes a detailed walk-through of adding elements to a
separately chained hash table.  Somewhat Java-centric including use
of a different mapping of hash codes to array indices than we will
use. Also note that they Key/Value structure used there is for a Map
whereas we will use a Set where the Key/Val are identical and
referred to as an Element.</li>
</ul>

<p>
Our particular variant will be a <b>Hash Set</b> which is a collection of
elements (strings) which are each unique. The hash table is used to
quickly add new elements and check whether an element is contained in the
set. The hash table will use the <b>separate chaining</b> technique to
resolve hash code conflicts: each hash "bucket" has a singly linked
list of elements in that bucket.
</p>

<p>
Additionally, the hash set will maintain a record of the <b>order elements
are added</b> by overlaying a linked list on elements as they are
added. This allows for efficient traversal of the hash table elements for
printing and gives a queue-like feel to parts of the table.
</p>
</div>
</div>

<div id="outline-container-org9daa893" class="outline-3">
<h3 id="org9daa893"><span class="section-number-3">5.2</span> <code>hashset_main</code> Demonstration</h3>
<div class="outline-text-3" id="text-5-2">
<p>
The intent of this problem is to develop a small application which
behaves as the following demo indicates.
</p>

<div class="org-src-container">
<pre class="src src--n">&gt; make hashset_main                   # Compile hash table application
gcc -Wall -Wno-comment -Werror -g  -c hashset_main.c
gcc -Wall -Wno-comment -Werror -g  -c hashset_funcs.c
gcc -Wall -Wno-comment -Werror -g  -o hashset_main hashset_main.o hashset_funcs.o

&gt; ./hashset_main                      # start application, shows help message with commands
Hashset Application
Commands:
  hashcode &lt;elem&gt;  : prints out the numeric hash code for the given key (does not change the hash set)
  contains &lt;elem&gt;  : prints the value associated with the given element or NOT PRESENT
  add &lt;elem&gt;       : inserts the given element into the hash set, reports existing element
  print            : prints all elements in the hash set in the order they were addded
  structure        : prints detailed structure of the hash set
  clear            : reinitializes hash set to be empty with default size
  save &lt;file&gt;      : writes the contents of the hash set to the given file
  load &lt;file&gt;      : clears the current hash set and loads the one in the given file
  next_prime &lt;int&gt; : if &lt;int&gt; is prime, prints it, otherwise finds the next prime and prints it
  expand           : expands memory size of hash set to reduce its load factor
  quit             : exit the program

HS&gt;&gt; print                                 # prints items in order, empty initially

HS&gt;&gt; structure                             # show hash table structure, empty intitially
elem_count: 0
table_size: 5
order_first: NULL
order_last : NULL
load_factor: 0.0000
[ 0] : 
[ 1] : 
[ 2] : 
[ 3] : 
[ 4] : 

HS&gt;&gt; add Rick                              # add items table
HS&gt;&gt; add Morty                             

HS&gt;&gt; print                                 # show items in order added
  1 Rick
  2 Morty

HS&gt;&gt; structure                             # show internal structure of the hash table
elem_count: 2
table_size: 5
order_first: Rick
order_last : Morty
load_factor: 0.4000
[ 0] :                                     # some buckets are empty
[ 1] : 
[ 2] : 
[ 3] : {2546943 Rick &gt;&gt;Morty}              # nodes show hash code, string stored, next string
[ 4] : {74531189 Morty &gt;&gt;NULL}             # last item added, points to null

HS&gt;&gt; add Summer                            # add more items
HS&gt;&gt; add Jerry
HS&gt;&gt; add Beth
HS&gt;&gt; add Tinyrick

HS&gt;&gt; print                                 # print items in order added
  1 Rick
  2 Morty
  3 Summer
  4 Jerry
  5 Beth
  6 Tinyrick

HS&gt;&gt; structure                             # show structure
elem_count: 6                              # NOTE: recently added items added to front of bucket lists
table_size: 5
order_first: Rick
order_last : Tinyrick
load_factor: 1.2000
[ 0] : 
[ 1] : {-1964728321 Tinyrick &gt;&gt;NULL} 
[ 2] : {2066967 Beth &gt;&gt;Tinyrick} 
[ 3] : {-1807340593 Summer &gt;&gt;Jerry} {2546943 Rick &gt;&gt;Morty} 
[ 4] : {71462654 Jerry &gt;&gt;Beth} {74531189 Morty &gt;&gt;Summer} 

HS&gt;&gt; contains Jerry                        # check if items contained / not in hashset
FOUND: Jerry
HS&gt;&gt; contains Rick
FOUND: Rick
HS&gt;&gt; contains Unity
NOT PRESENT
HS&gt;&gt; contains President
NOT PRESENT

HS&gt;&gt; add Jerry                             # items are unique, no changes made on detecting duplicates
Elem already present, no changes made
HS&gt;&gt; add Beth
Elem already present, no changes made

HS&gt;&gt; save rm.hashset                       # save the hash table file rm.hashset, can be loaded later
HS&gt;&gt; clear                                 # clear the hash table
HS&gt;&gt; print                                 # show cleared hash table is empty now
HS&gt;&gt; structure
elem_count: 0
table_size: 5
order_first: NULL
order_last : NULL
load_factor: 0.0000
[ 0] : 
[ 1] : 
[ 2] : 
[ 3] : 
[ 4] : 

HS&gt;&gt; add Birdperson                        # add new items to the empty hash table
HS&gt;&gt; add Squanchy
HS&gt;&gt; structure                             # show contents
elem_count: 2
table_size: 5
order_first: Birdperson
order_last : Squanchy
load_factor: 0.4000
[ 0] : 
[ 1] : 
[ 2] : {-724361712 Squanchy &gt;&gt;NULL} 
[ 3] : {2082041198 Birdperson &gt;&gt;Squanchy} 
[ 4] : 

HS&gt;&gt; load rm.hashset                       # clear current hash table and load from file
HS&gt;&gt; structure                             # show contents identical to when 'save' was used
elem_count: 6
table_size: 5
order_first: Rick
order_last : Tinyrick
load_factor: 1.2000
[ 0] : 
[ 1] : {-1964728321 Tinyrick &gt;&gt;NULL} 
[ 2] : {2066967 Beth &gt;&gt;Tinyrick} 
[ 3] : {-1807340593 Summer &gt;&gt;Jerry} {2546943 Rick &gt;&gt;Morty} 
[ 4] : {71462654 Jerry &gt;&gt;Beth} {74531189 Morty &gt;&gt;Summer} 

HS&gt;&gt; expand                                # expand the size of the hash table's internal array
HS&gt;&gt; print                                 # no effect on items/ordering in table
  1 Rick
  2 Morty
  3 Summer
  4 Jerry
  5 Beth
  6 Tinyrick

HS&gt;&gt; structure                             # show internal sturcture: larger array now
elem_count: 6

table_size: 11                             # array size is next_prime(2*5+1) = 11
order_first: Rick
order_last : Tinyrick
load_factor: 0.5455
[ 0] : 
[ 1] : {2066967 Beth &gt;&gt;Tinyrick} 
[ 2] : 
[ 3] : {-1807340593 Summer &gt;&gt;Jerry} {2546943 Rick &gt;&gt;Morty} 
[ 4] : 
[ 5] : 
[ 6] : {-1964728321 Tinyrick &gt;&gt;NULL} 
[ 7] : {74531189 Morty &gt;&gt;Summer} 
[ 8] : 
[ 9] : 
[10] : {71462654 Jerry &gt;&gt;Beth} 

HS&gt;&gt; add Birdperson                        # add additional items
HS&gt;&gt; add Squanchy
HS&gt;&gt; add Picklerick

HS&gt;&gt; structure                             # show structure again
elem_count: 9
table_size: 11
order_first: Rick
order_last : Picklerick
load_factor: 0.8182
[ 0] : {761532761 Picklerick &gt;&gt;NULL} 
[ 1] : {2066967 Beth &gt;&gt;Tinyrick} 
[ 2] : 
[ 3] : {-1807340593 Summer &gt;&gt;Jerry} {2546943 Rick &gt;&gt;Morty} 
[ 4] : 
[ 5] : 
[ 6] : {2082041198 Birdperson &gt;&gt;Squanchy} {-1964728321 Tinyrick &gt;&gt;Birdperson} 
[ 7] : {74531189 Morty &gt;&gt;Summer} 
[ 8] : {-724361712 Squanchy &gt;&gt;Picklerick} 
[ 9] : 
[10] : {71462654 Jerry &gt;&gt;Beth} 

HS&gt;&gt; expand                                # expand again
HS&gt;&gt; structure                             # show internal structure
elem_count: 9
table_size: 23                             # size is next_prime(2*11 + 1) = 23
order_first: Rick
order_last : Picklerick
load_factor: 0.3913
[ 0] : 
[ 1] : {761532761 Picklerick &gt;&gt;NULL} 
[ 2] : 
[ 3] : {2066967 Beth &gt;&gt;Tinyrick} 
[ 4] : 
[ 5] : 
[ 6] : 
[ 7] : 
[ 8] : {2082041198 Birdperson &gt;&gt;Squanchy} 
[ 9] : 
[10] : 
[11] : {-724361712 Squanchy &gt;&gt;Picklerick} {-1964728321 Tinyrick &gt;&gt;Birdperson} {74531189 Morty &gt;&gt;Summer} 
[12] : 
[13] : 
[14] : 
[15] : {2546943 Rick &gt;&gt;Morty} 
[16] : 
[17] : 
[18] : {-1807340593 Summer &gt;&gt;Jerry} 
[19] : 
[20] : 
[21] : {71462654 Jerry &gt;&gt;Beth} 
[22] : 

HS&gt;&gt; quit                                  # exit the application
&gt;&gt;                                         # back to normal shell
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc08fb0a" class="outline-3">
<h3 id="orgc08fb0a"><span class="section-number-3">5.3</span> Diagram of Hash Set Data structures</h3>
<div class="outline-text-3" id="text-5-3">
<div class="org-center">

<div id="org56fbb03" class="figure">
<p><img src="hashset2.png" alt="hashset2.png" style="max-width:100%;" />
</p>
<p><span class="figure-number">Figure 1: </span>Shows the structure of a hash set and the various C data structures (<code>structs</code>) which are involved. Details are discussed in subsequent sections.</p>
</div>
</div>
</div>
</div>



<div id="outline-container-org6f93202" class="outline-3">
<h3 id="org6f93202"><span class="section-number-3">5.4</span> <code>hashset_funcs.c</code>: Hash Table Functions</h3>
<div class="outline-text-3" id="text-5-4">
<p>
We will favor <b>separately chained</b> hash sets which have the
following features.
</p>
<ul class="org-ul">
<li>A hash set stores elements (strings) allowing fast lookup based on the
hash code of the element. When a programming environment provides a
"set" data structure, hash tables are frequently the backing data
structure.</li>
<li>The hash set has a 'table' which is a fixed size array. Each array
element is a pointer to a linked list node or <code>NULL</code>.</li>
<li>Elements in the hash table are stored in linked list nodes. Elements that
hash to the same table location are stored in the list at that
location</li>
<li>A <code>hashcode()</code> function is provided which generates an integer from
a string and is the first step to determining where key/value is
located.</li>
<li>The hash set also tracks the ordering that elements are added via
additional pointers. The hash set tracks the first and last elements
added allowing queue-like adds. Each node is part of a list for the
table index it is stored at AND part of the overall list of all
elements added in order.</li>
</ul>



<p>
Examine the header file <code>hashset.h</code> to see the two C structs which will
be used to represent hash tables.
</p>
<div class="org-src-container">
<pre class="src src-c">// Type for linked list nodes in hash set
typedef struct hashnode {
  char elem[64];                // string for the element in this node
  struct hashnode *table_next;  // pointer to next node at table index of this node, NULL if last node
  struct hashnode *order_next;  // pointer to next node in insert order, NULL if last element added
} hashnode_t;

// Type of hash table
typedef struct {
  int elem_count;               // number of elements in the table
  int table_size;               // how big is the table array
  hashnode_t **table;           // array of "buckets" which contain nodes
  hashnode_t *order_first;      // pointer to the first element node that was added
  hashnode_t *order_last;       // pointer to last element that node that was added
} hashset_t;
</pre>
</div>

<p>
Standard operations are supported by the hash set.
</p>
<ul class="org-ul">
<li>Adding an element</li>
<li>Determining if an element is contained or not in the set</li>
<li>Clearing the entire hash table</li>
<li>Printing all elements in the hash table</li>
<li>Expanding the memory used by the hash table to improve lookup
performance.</li>
</ul>

<p>
These are broken down into the following C functions which you will
need to implement in <code>hashset_funcs.c</code> except for the first
<code>hashcode()</code> function which is provided.
</p>

<pre class="example" id="org72a0604">
// hashset_funcs.c: utility functions for operating on hash sets. Most
// functions are used in the hashset_main.c which provides an
// application to work with the functions.

int hashcode(char key[]);
// PROVIDED: Compute a simple hash code for the given character
// string. The code is "computed" by casting the first 8 characters of
// the string to a numbers and returning their xor. The empty string
// has hash code 0. Longer strings will have numbers which are the
// integer interpretation of up to their first 8 bytes.  ADVANTAGE:
// constant time to compute the hash code. DISADVANTAGE: poor
// distribution for long strings; all strings with same first 8 chars
// hash to the same location.

void hashset_init(hashset_t *hs, int table_size);
// Initialize the hash set 'hs' to have given size and elem_count
// 0. Ensures that the 'table' field is initialized to an array of
// size 'table_size' and is filled with NULLs. Also ensures that the
// first/last pointers are initialized to NULL

int hashset_contains(hashset_t *hs, char elem[]);
// Returns 1 if the parameter `elem` is in the hash set and 0
// otherwise. Uses hashcode() and field `table_size` to determine
// which index in table to search.  Iterates through the list at that
// table index using strcmp() to check for `elem`. NOTE: The
// `hashcode()` function may return positive or negative
// values. Negative values are negated to make them positive. The
// "bucket" (index in hs-&gt;table) for `elem` is determined by with
// 'hashcode(key) modulo table_size'.

int hashset_add(hashset_t *hs, char elem[]);
// If the element is already present in the hash set, makes no changes
// to the hash set and returns 0. hashset_contains() may be used for
// this. Otherwise determines the bucket to add `elem` at via the same
// process as in hashset_contains() and adds it to the FRONT of the
// list at that table index. Adjusts the `hs-&gt;order_last` pointer to
// append the new element to the ordered list of elems. If this is the
// first element added, also adjsuts the `hs-&gt;first` pointer. Updates the
// `elem_count` field and returns 1 to indicate a successful addition.
//
// NOTE: Adding elems at the front of each bucket list allows much
// simplified logic that does not need any looping/iteration.

void hashset_free_fields(hashset_t *hs);
// De-allocates nodes/table for `hs`. Iterates through the ordered
// list of the hash set starting at the `order_first` field and
// de-allocates all nodes in the list. Also free's the `table`
// field. Sets all relevant fields to 0 or NULL as appropriate to
// indicate that the hash set has no more usable space. Does NOT
// attempt to de-allocate the `hs` itself as it may not be
// heap-allocated (e.g. in the stack or a global).

void hashset_show_structure(hashset_t *hs);
// Displays detailed structure of the hash set. Shows stats for the
// hash set as below including the load factor (element count divided
// by table_size) to 4 digits of accuracy.  Then shows each table
// array index ("bucket") on its own line with the linked list of
// elems in the bucket on the same line. 
// 
// EXAMPLE:
// elem_count: 4
// table_size: 5
// order_first: Rick
// order_last : Tinyrick
// load_factor: 0.8000
// [ 0] : {7738144525137111380 Tinyrick &gt;&gt;NULL} 
// [ 1] : 
// [ 2] : 
// [ 3] : {125779953153363 Summer &gt;&gt;Tinyrick} {1801677138 Rick &gt;&gt;Morty} 
// [ 4] : {521644699469 Morty &gt;&gt;Summer} 
//
// NOTES:
// - Uses format specifier "[%2d] : " to print the table indices
// - Nodes in buckets have the following format:
//   {1415930697 IceT &gt;&gt;Goldenfold}
//    |          |       |        
//    |          |       +-&gt; order_next-&gt;elem OR NULL if last node
//    |          +-&gt;`elem` string     
//    +-&gt; hashcode("IceT"), print using format "%ld" for 64-bit longs
// 

void hashset_write_elems_ordered(hashset_t *hs, FILE *out);
// Outputs all elements of the hash set according to the order they
// were added. Starts at the `order_first` field and iterates through
// the list defined there. Each element is printed on its own line
// preceded by its add position with 1 for the first elem, 2 for the
// second, etc. Prints output to `FILE *out` which should be an open
// handle. NOTE: the output can be printed to the terminal screen by
// passing in the `stdout` file handle for `out`.

void hashset_save(hashset_t *hs, char *filename);
// Writes the given hash set to the given `filename` so that it can be
// loaded later.  Opens the file and writes its 'table_size' and
// 'elem_count' to the file. Then uses the hashset_write_elems_ordered()
// function to output all elems in the hash set into the file.
// EXAMPLE FILE:
// 
// 5 6
//   1 Rick
//   2 Morty
//   3 Summer
//   4 Jerry
//   5 Beth
//   6 Tinyrick
// 
// First two numbers are the 'table_size' and 'elem_count' field and
// remaining text is the output of hashset_write_elems_ordered();
// e.g. insertion position and element.

int hashset_load(hashset_t *hs, char *filename);
// Loads a hash set file created with hashset_save(). If the file
// cannot be opened, prints the message
// 
// ERROR: could not open file 'somefile.hs'
//
// and returns 0 without changing anything. Otherwise clears out the
// current hash set `hs`, initializes a new one based on the size
// present in the file, and adds all elems from the file into the new
// hash set. Ignores the indices at the start of each line and uses
// hashset_add() to insert elems in the order they appear in the
// file. Returns 1 on successful loading (FIXED: previously indicated
// a different return value on success) . This function does no error
// checking of the contents of the file so if they are corrupted, it
// may cause an application to crash or loop infinitely.

int next_prime(int num);
// If 'num' is a prime number, returns 'num'. Otherwise, returns the
// first prime that is larger than 'num'. Uses a simple algorithm to
// calculate primeness: check if any number between 2 and (num/2)
// divide num. If none do, it is prime. If not, tries next odd number
// above num. Loops this approach until a prime number is located and
// returns this. Used to ensure that hash table_size stays prime which
// theoretically distributes elements better among the array indices
// of the table.

void hashset_expand(hashset_t *hs);
// Allocates a new, larger area of memory for the `table` field and
// re-adds all current elems to it. The size of the new table is
// next_prime(2*table_size+1) which keeps the size prime.  After
// allocating the new table, all table entries are initialized to NULL
// then the old table is iterated through and all elems are added to
// the new table according to their hash code. The memory for the old
// table is de-allocated and the new table assigned to the hash set
// fields "table" and "table_size".  This function increases
// "table_size" while keeping "elem_count" the same thereby reducing
// the load of the hash table. Ensures that the memory associated with
// the old table is free()'d. Makes NO special effort to preserve old
// nodes: re-adds everything into the new table and then frees the old
// one along with its nodes. Uses functions such as hashset_init(),
// hashset_add(), hashset_free_fields() to accomplish the transfer.

</pre>
</div>
</div>

<div id="outline-container-org885fed5" class="outline-3">
<h3 id="org885fed5"><span class="section-number-3">5.5</span> Provided <code>hash_code()</code> Function</h3>
<div class="outline-text-3" id="text-5-5">
<p>
The code for <code>hash_code()</code> is provided below. All hash tables require
a means of converting elements into a non-unique number. For consistency,
we will use the below code which employs several interesting C tricks
that will be discussed of the progression of the class. Some of the
advantages/disadvantages of the hash function are mentioned in the
comments.
</p>

<pre class="example" id="org959eee5">
// PROVIDED: Compute a simple hash code for the given character
// string. The code is "computed" by casting the first 8 characters of
// the string to a numbers and returning their xor. The empty string
// has hash code 0. Longer strings will have numbers which are the
// integer interpretation of up to their first 8 bytes.  ADVANTAGE:
// constant time to compute the hash code. DISADVANTAGE: poor
// distribution for long strings; all strings with same first 8 chars
// hash to the same location.
int hashcode(char key[]){
  int hc = 0;
  for(int i=0; key[i]!='\0'; i++){
    hc = hc*31 + key[i];
  }
  return hc;
}
</pre>
</div>
</div>

<div id="outline-container-orgf9ae260" class="outline-3">
<h3 id="orgf9ae260"><span class="section-number-3">5.6</span> <code>hashset_main.c</code>: main function / application</h3>
<div class="outline-text-3" id="text-5-6">
<p>
In <code>hashset_main.c</code> implement an interactive program which allows users
to type commands to manipulate the hash set. 
</p>

<p>
The provided <code>Makefile</code> should compile the <code>hashset_main</code> program as follows.
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt; make hashset_main                   # Compile hash table application
gcc -Wall -Wno-comment -Werror -g  -c hashset_main.c
gcc -Wall -Wno-comment -Werror -g  -c hashset_funcs.c
gcc -Wall -Wno-comment -Werror -g  -o hashset_main hashset_main.o hashset_funcs.o

&gt; ./hashset_main                      # start application, shows help message with commands
Hashset Application
Commands:
  hashcode &lt;elem&gt;  : prints out the numeric hash code for the given key (does not change the hash set)
  contains &lt;elem&gt;  : prints the value associated with the given element or NOT PRESENT
  add &lt;elem&gt;       : inserts the given element into the hash set, reports existing element
  print            : prints all elements in the hash set in the order they were addded
  structure        : prints detailed structure of the hash set
  clear            : reinitializes hash set to be empty with default size
  save &lt;file&gt;      : writes the contents of the hash set to the given file
  load &lt;file&gt;      : clears the current hash set and loads the one in the given file
  next_prime &lt;int&gt; : if &lt;int&gt; is prime, prints it, otherwise finds the next prime and prints it
  expand           : expands memory size of hash set to reduce its load factor
  quit             : exit the program
HS&gt;&gt;
</pre>
</div>

<p>
The following sections provide some implementation details.
</p>
</div>

<div id="outline-container-org1b44423" class="outline-4">
<h4 id="org1b44423">Read commands, Execute</h4>
<div class="outline-text-4" id="text-org1b44423">
<p>
The basic flow of <code>hashset_main.c</code> follows the same pattern that code for
a lab exercise demonstrates.  A good way to get started on the main
application is to <b>copy over the lab solution</b> and begin modifying it.
</p>
<ul class="org-ul">
<li>Create a <code>hashset_t</code> variable, likely on the stack as a local variable in
<code>main()</code></li>
<li>Start a loop that terminates when the user exits or there is no more
input</li>
<li>Each time the user enters a string, read it and check for one of the
built-in commands</li>
<li>On identifying the command, potentially read another string if
needed (commands like <code>add</code> and <code>contains</code>)</li>
<li>Call an appropriate <code>hashset_XXX()</code> function to handle the command</li>
</ul>
</div>
</div>

<div id="outline-container-org3804379" class="outline-4">
<h4 id="org3804379">Supported Commands</h4>
<div class="outline-text-4" id="text-org3804379">
<p>
To indicate to users of the program the supported commands, use the
following code to print out the initial option list.
</p>

<pre class="example" id="org7b6249c">
  printf("Hashset Application\n");
  printf("Commands:\n");
  printf("  hashcode &lt;elem&gt;  : prints out the numeric hash code for the given key (does not change the hash set)\n");
  printf("  contains &lt;elem&gt;  : prints the value associated with the given element or NOT PRESENT\n");
  printf("  add &lt;elem&gt;       : inserts the given element into the hash set, reports existing element\n");
  printf("  print            : prints all elements in the hash set in the order they were addded\n");
  printf("  structure        : prints detailed structure of the hash set\n");
  printf("  clear            : reinitializes hash set to be empty with default size\n");
  printf("  save &lt;file&gt;      : writes the contents of the hash set to the given file\n");
  printf("  load &lt;file&gt;      : clears the current hash set and loads the one in the given file\n");
  printf("  next_prime &lt;int&gt; : if &lt;int&gt; is prime, prints it, otherwise finds the next prime and prints it\n");
  printf("  expand           : expands memory size of hash set to reduce its load factor\n");
  printf("  quit             : exit the program\n");
</pre>
</div>
</div>

<div id="outline-container-org1a6a38a" class="outline-4">
<h4 id="org1a6a38a">Clearing Hash Table</h4>
<div class="outline-text-4" id="text-org1a6a38a">
<p>
When issuing the <code>clear</code> command, the contents of the current hash set
should be eliminated and the hash set reinitialized to the default
size. This is most easily done via.
</p>
<ol class="org-ol">
<li>Using the <code>hashset_free_fields()</code> function</li>
<li>Using <code>hashset_init()</code> with the <code>HASHSET_DEFAULT_TABLE_SIZE</code>
constant defined in <code>hashset.h</code>.</li>
</ol>
</div>
</div>

<div id="outline-container-orgf4ef952" class="outline-4">
<h4 id="orgf4ef952"><a id="org88a291d"></a> Paths to Files for Saving and Loading</h4>
<div class="outline-text-4" id="text-orgf4ef952">
<p>
Saving and loading data involves writing to files. The names
associated with the files must be specified as a <i>path</i> so that if
files are to be saved or loaded from subdirectories, include this
as part of the path.  For example, the <code>rm.hashset</code> file is
provided in the <code>data/</code> directory and once loading functionality is
code, it can be loaded as follows.
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt; ./hashset_main
...
HS&gt;&gt; load data/rm.hashset       # load existing hashset save file
HS&gt;&gt; print
  1 Rick
  2 Morty
  3 Summer
  4 Jerry
  5 Beth
  6 Tinyrick

HS&gt;&gt; structure                  # show structure
elem_count: 6
table_size: 5
order_first: Rick
order_last : Tinyrick
load_factor: 1.2000
[ 0] : 
[ 1] : {-1964728321 Tinyrick &gt;&gt;NULL} 
[ 2] : {2066967 Beth &gt;&gt;Tinyrick} 
[ 3] : {-1807340593 Summer &gt;&gt;Jerry} {2546943 Rick &gt;&gt;Morty} 
[ 4] : {71462654 Jerry &gt;&gt;Beth} {74531189 Morty &gt;&gt;Summer} 

HS&gt;&gt; expand                     # expand
HS&gt;&gt; add Birdperson             # add new items
HS&gt;&gt; add Goldenfold

HS&gt;&gt; save cur.hashset           # save to file in current directory

HS&gt;&gt; clear                      # empty hash table
HS&gt;&gt; print                      # show emptiness

HS&gt;&gt; load cur.hashset           # reload
HS&gt;&gt; print                      # items restored
  1 Rick
  2 Morty
  3 Summer
  4 Jerry
  5 Beth
  6 Tinyrick
  7 Birdperson
  8 Goldenfold
HS&gt;&gt; save data/new.hashset      # create another save file in data/ dir
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb6f4688" class="outline-4">
<h4 id="orgb6f4688">Failing to Load Files</h4>
<div class="outline-text-4" id="text-orgb6f4688">
<p>
If a file cannot be opened with the <code>load 'file.hm'</code> command, the
underlying <code>hashset_load()</code> should print an error of the form
</p>
<div class="org-src-container">
<pre class="src src-text">ERROR: could not open file 'somefile.hm'
</pre>
</div>
<p>
and the <code>hash_main.c</code> main loop should NOT change the hash set and
print the message
</p>
<div class="org-src-container">
<pre class="src src-text">load failed
</pre>
</div>
<p>
in response to the error. Below is a demonstration of this from the
automated tests.
</p>
<div class="org-src-container">
<pre class="src src-sh">...
HS&gt;&gt; print                      # current contents of set
  1 Rick
  2 Morty
  3 Summer
  4 Jerry
  5 Beth
  6 Tinyrick
  7 Birdperson
  8 Goldenfold

HS&gt;&gt; load notthere.hashset      # attempt to load file that doesn't exit
ERROR: could not open file 'notthere.hashset'
load failed

HS&gt;&gt; print                      # failed load does not modify current set
  1 Rick
  2 Morty
  3 Summer
  4 Jerry
  5 Beth
  6 Tinyrick
  7 Birdperson
  8 Goldenfold
HS&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaa11e23" class="outline-4">
<h4 id="orgaa11e23">Command Echoing: <code>-echo</code> option to <code>hashset_main</code></h4>
<div class="outline-text-4" id="text-orgaa11e23">
<p>
Some users may wish to "script" this the main program: allow it to
process input commands from a file rather than from the user typing.
This notion is discussed in a lab and should be reviewed if it is
unfamiliar.
</p>

<p>
An example of an input script is in <code>data/hashset_demo.script</code> which
looks like a lot of user commands:
</p>
<div class="org-src-container">
<pre class="src src-text">print
structure
add Rick
add Morty
print
structure
add Summer
add Jerry
add Beth
add Tinyrick
print
structure
contains Jerry
contains Rick
contains Unity
contains President
save rm.hashset
clear
print
structure
add Birdperson
add Squanchy
structure
load rm.hashset
structure
expand
print
structure
add Birdperson
add Squanchy
add Picklerick
structure
expand
structure
bye
</pre>
</div>

<p>
The file can be fed directly to the program without needing type it
using Unix pipes as per the following:
</p>
<div class="org-src-container">
<pre class="src src-sh">&gt; cat data/hashset_demo.script | ./hashset_main -echo
</pre>
</div>
<p>
Notice the use of a command line argument for <code>hashset_main</code>: the
<code>-echo</code> option. This is a REQUIRED feature which prints commands typed
by users to the screen. To implement this, do the following.
</p>

<p>
Model the structure of command echoing after what is shown in related
Lab work.
</p>
<ul class="org-ul">
<li>Use a variable in <code>main()</code> to indicate whether command echoing is on
or off; set it to off by default</li>
<li><p>
Check when <code>main()</code> starts  whether command line argument 1 is set
to <code>-echo</code> in which case turn echoing on. A condition like the
following is useful.
</p>
<div class="org-src-container">
<pre class="src src-c">  if(argc &gt; 1 &amp;&amp; strcmp("-echo",argv[1])==0) {
</pre>
</div></li>
<li>Each command should check for echoing and print the command being
run along with any arguments to it. This technique is demonstrated
in related lab work.</li>
</ul>

<p>
It will take some work to get the exact placement of echoes correct
but will ultimately lead to nice results that involve LITTLE typing
like the example below.
</p>

<div class="org-src-container">
<pre class="src src-sh">&gt; cat hashset_demo.script | hashset_main -echo 
Hashset Application
Commands:
  hashcode &lt;elem&gt;  : prints out the numeric hash code for the given key (does not change the hash set)
  contains &lt;elem&gt;  : prints the value associated with the given element or NOT PRESENT
  add &lt;elem&gt;       : inserts the given element into the hash set, reports existing element
  print            : prints all elements in the hash set in the order they were addded
  structure        : prints detailed structure of the hash set
  clear            : reinitializes hash set to be empty with default size
  save &lt;file&gt;      : writes the contents of the hash set to the given file
  load &lt;file&gt;      : clears the current hash set and loads the one in the given file
  next_prime &lt;int&gt; : if &lt;int&gt; is prime, prints it, otherwise finds the next prime and prints it
  expand           : expands memory size of hash set to reduce its load factor
  quit             : exit the program
HS&gt;&gt; print
HS&gt;&gt; structure
elem_count: 0
table_size: 5
order_first: NULL
order_last : NULL
load_factor: 0.0000
[ 0] : 
[ 1] : 
[ 2] : 
[ 3] : 
[ 4] : 
HS&gt;&gt; add Rick
HS&gt;&gt; add Morty
HS&gt;&gt; print
  1 Rick
  2 Morty
...
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc15a357" class="outline-3 grading 40">
<h3 id="orgc15a357"><span class="section-number-3">5.7</span> Grading Criteria for Problem 3&#xa0;&#xa0;&#xa0;<span class="tag"><span class="grading">grading</span>&#xa0;<span class="40">40</span></span></h3>
<div class="outline-text-3" id="text-5-7">
<p>
The following criteria will be checked in this problem.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Weight</th>
<th scope="col" class="org-left">Criteria</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">AUTOMATED TESTS via <code>make test-prob3</code></td>
</tr>

<tr>
<td class="org-right">20</td>
<td class="org-left"><code>test_hashset.org</code> tests</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">20 tests for <code>hashset_main</code> executable, exercises functions in <code>hashset_funcs.c</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">All tests run under Valgrind</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">1 point per test passed</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Code compiles without warnings (<code>make clean</code> followed by <code>make test-prob3</code> gives no errors/warnings)</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">NOTE: run individual tests via <code>make test-prob3 testnum=4</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">MANUAL INSPECTION</td>
</tr>

<tr>
<td class="org-right">15</td>
<td class="org-left"><code>hashset_funcs.c</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear commenting indicating intent during functions "calculate table index" or "iterate through list"</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Relatively short functions: nothing needs to be too long (50 lines tops)</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clearly written iteration loops to traverse linked lists in hash table functions</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of <code>strcmp()</code> to check elements during <code>hashset_contains()</code> operation</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of <code>hashset_contains()</code> during <code>hashset_add()</code> to check for duplicates</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Concise and commented code for <code>hashset_add()</code> which calculates table index and inserts new node at the front the list via <code>table_next</code> pointers</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Maintains the <code>order_first/order_last</code> fields during add operation</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>hashset_free_fields()</code> frees all list elements and the table array, assigns 0/NULL to all fields</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Uses the ordered list of elements to easily free all nodes during <code>hashset_free_fields()</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>hashset_save()</code> makes use of <code>hashset_write()</code> with an open file handle to avoid redundant code</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>hashset_load()</code> checks that files open successfully before using <code>hashset_free_fields()</code> to de-allocate memory</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">File closed after finished during saving and loading</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>next_prime()</code> is clearly written and easy to follow; follows the algorithm described in the function documentation</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>hashset_expand()</code> uses other functions in such as <code>next_prime()</code>, <code>hashset_add()</code> and <code>hashset_free_fields()</code> to avoid repeating code.</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left"><code>hashset_main.c</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Comments indicating what high-level command is being implemented in each part of <code>main</code></td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear structure of main loop, reading commands, selecting actions</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Use of string functions to identify which command to execute</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear efforts to honor <code>-echo</code> option and echo commands</td>
</tr>

<tr>
<td class="org-right">&#xa0;</td>
<td class="org-left">Clear effort to free all memory prior to exit by clearing hashset on exit</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


<div id="outline-container-orgcad914e" class="outline-2">
<h2 id="orgcad914e"><span class="section-number-2">6</span> Project Submission</h2>
<div class="outline-text-2" id="text-6">
</div>

<div id="outline-container-org47dab47" class="outline-3">
<h3 id="org47dab47"><span class="section-number-3">6.1</span> <a id="org4df19a2"></a> Submit to Gradescope</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Some of the pictures below mention 'Assignment' which is now 'Project'
and may mention some files that are not part of the current
project. The process of uploading submission is otherwise the same.
</p>

<ol class="org-ol">
<li><p>
In a terminal, change to your project code directory and type <b>make
zip</b> which will create a zip file of your code. A session should
look like this:
</p>
<div class="org-src-container">
<pre class="src src-sh">   &gt; cd Desktop/2021/p1-code      # location of assignment code

   &gt; ls 
   Makefile    stock_main.c  stock_funcs.c  hashset_main.c 
   ...

   &gt; make zip                     # create a zip file using Makefile target
   rm -f p1-code.zip
   cd .. &amp;&amp; zip "p1-code/p1-code.zip" -r "p1-code"
     adding: p1-code/ (stored 0%)
     adding: p1-code/Makefile (deflated 68%)
     adding: p1-code/test_stock_funcs1.org (deflated 69%)
     adding: p1-code/hashset_main.c (deflated 71%)
     ...
   Zip created in p1-code.zip

   &gt; ls p1-code.zip
   p1-code.zip
</pre>
</div></li>
<li><p>
Log into <a href="https://www.gradescope.com/">Gradescope</a> and locate and click 'Project 1' which will
open up submission
</p>
<div class="org-center">

<div id="org2ae8c20" class="figure">
<p><img src="gradescope01.png" alt="gradescope01.png" style="max-width:100%;" />
</p>
</div>
</div></li>
<li><p>
Click on the 'Drag and Drop' text which will open a file selection
dialog; locate and choose your <code>p1-code.zip</code> file
</p>
<div class="org-center">

<div id="orgd7176d8" class="figure">
<p><img src="gradescope02.png" alt="gradescope02.png" style="max-width:100%;" />
</p>
</div>
</div></li>
<li><p>
This will show the contents of the Zip file and should include your
C source files along with testing files and directories. 
</p>
<div class="org-center">

<div id="orgd15b03b" class="figure">
<p><img src="gradescope03.png" alt="gradescope03.png" style="max-width:100%;" />
</p>
</div>
</div></li>
<li><p>
Click 'Upload' which will show progress uploading files.  It may
take a few seconds before this dialog closes to indicate that the
upload is successful. Note: there is a limit of 256 files per
upload; normal submissions are not likely to have problems with
this but you may want to make sure that nothing has gone wrong such
as infinite loops creating many files or incredibly large files. 
</p>

<p>
<b>WARNING</b>: There is a limit of 256 files per zip. Doing <code>make zip</code>
will warn if this limit is exceeded but uploading to Gradescope
will fail without any helpful messages if you upload more the 256
files in a zip. 
</p>

<div class="org-center">

<div id="org59a348a" class="figure">
<p><img src="gradescope04.png" alt="gradescope04.png" style="max-width:100%;" />
</p>
</div>
</div></li>

<li><p>
Once files have successfully uploaded, the Autograder will begin
running the command line tests and recording results.  These are
the same tests that are run via <code>make test</code>.   
</p>
<div class="org-center">

<div id="org064b10a" class="figure">
<p><img src="gradescope05.png" alt="gradescope05.png" style="max-width:100%;" />
</p>
</div>
</div></li>
<li><p>
When the tests have completed, results will be displayed
summarizing scores along with output for each batch of tests.
</p>
<div class="org-center">

<div id="org99c4af9" class="figure">
<p><img src="gradescope06.png" alt="gradescope06.png" style="max-width:100%;" />
</p>
</div>
</div></li>
</ol>
</div>
</div>

<div id="outline-container-org00133b5" class="outline-3">
<h3 id="org00133b5"><span class="section-number-3">6.2</span> Late Policies</h3>
<div class="outline-text-3" id="text-6-2">
<p>
You may wish to review the policy on late project submission which
will cost 1 Engagement Point per day late. <b>No projects will be
accepted more than 48 hours after the deadline.</b>
</p>

<p>
<a href="https://www-users.cs.umn.edu/~kauffman/2021/syllabus.html">https://www-users.cs.umn.edu/~kauffman/2021/syllabus.html</a>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr/> <i> Author: Chris Kauffman (<a href="mailto:kauffman@umn.edu">kauffman@umn.edu</a>) <br/> Date: 2023-02-03 Fri 10:50 <br/> </i>
</div>
</body>
</html>
